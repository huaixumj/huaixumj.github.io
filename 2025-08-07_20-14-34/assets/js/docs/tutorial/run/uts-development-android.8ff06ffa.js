(window.webpackJsonp=window.webpackJsonp||[]).push([[458],{840:function(a,t,r){"use strict";r.r(t);var d=r(1),s=Object(d.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"android-uts-扩展开发"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#android-uts-扩展开发"}},[a._v("#")]),a._v(" Android UTS 扩展开发")]),a._v(" "),t("blockquote",[t("p",[a._v("版本要求: HBuilderX 3.6.9+")])]),a._v(" "),t("p",[a._v("HBuilderX 3.6.9+， 新增 uts 插件 Android 平台 真机运行支持通过 Gradle 下载三方仓储。")]),a._v(" "),t("p",[a._v("运行带有 uts 插件的项目到 Android 设备，如果您遇到以下提示，请配置"),t("a",{attrs:{href:"#%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"}},[a._v("运行环境")])]),a._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://web-ext-storage.dcloud.net.cn/hx/84E1472F-A959-4440-9C47-B8D8A4D0C9BB.png",loading:"lazy"}}),a._v(" "),t("h2",{attrs:{id:"uts-扩展插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uts-扩展插件"}},[a._v("#")]),a._v(" uts 扩展插件")]),a._v(" "),t("p",[a._v("当您运行带有 uts 插件的项目到 Android 设备时，会自动安装【uts 开发扩展 - Android】插件，请务必安装。具体如下：")]),a._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://qiniu-web-assets.dcloud.net.cn/unidoc/zh/20221111171012.jpg",loading:"lazy"}}),a._v(" "),t("h2",{attrs:{id:"环境配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境配置"}},[a._v("#")]),a._v(" 环境配置")]),a._v(" "),t("p",[a._v("入口【设置 - 运行配置】：如图")]),a._v(" "),t("p",[t("img",{attrs:{src:"/images/uts-android-4.png",alt:"image"}})]),a._v(" "),t("p",[a._v("HBuilderX 4.27之前，入口在 设置-插件配置 中。")]),a._v(" "),t("h3",{attrs:{id:"上面的截图展示了以下配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上面的截图展示了以下配置"}},[a._v("#")]),a._v(" 上面的截图展示了以下配置：")]),a._v(" "),t("h4",{attrs:{id:"配置-gradle"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-gradle"}},[a._v("#")]),a._v(" 配置 Gradle")]),a._v(" "),t("p",[a._v("gradle是Android的库管理工具。如果你的电脑没有单独安装gradle的话（Android Studio自带的gradle版本太低），按如下步骤下载。")]),a._v(" "),t("ol",[t("li",[a._v("点击图标 1 的下载地址进入下载页面。如图所示，点击红圈部分下载工具包。")])]),a._v(" "),t("p",[t("img",{attrs:{src:"/images/gradle.png",alt:"image"}})]),a._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[a._v("将步骤 1 下载的内容解压后，找到 bin 目录下的执行脚本，填入图标 2 处。")])]),a._v(" "),t("p",[t("strong",[a._v("注意")])]),a._v(" "),t("ul",[t("li",[a._v("内置的下载模板中 Android Gradle Plugin 使用的最低版本为 7.4.0，所以 Gradle "),t("strong",[a._v("最低版本要求7.5")]),a._v("及以上。")]),a._v(" "),t("li",[a._v("mac 为"),t("code",[a._v("%解压路径%/bin/gradle")]),a._v("；window 为"),t("code",[a._v("%解压路径%\\bin\\gradle.bat")]),a._v("。")])]),a._v(" "),t("h4",{attrs:{id:"配置-gradle-jdk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-gradle-jdk"}},[a._v("#")]),a._v(" 配置 Gradle JDK")]),a._v(" "),t("ul",[t("li",[a._v("不同版本 Gradle 依赖不同版本的 JDK 。HbuilderX 4.27之前 内置的 JDK 为 11，HBuilderX 4.27+ 内置的 JDK 为 17。Gradle8.0 以上，JDK 最低要求为17。请根据HbuilderX实际版本手动下载并配置 JDK 路径。配置方式如下")])]),a._v(" "),t("ol",[t("li",[t("p",[a._v("点击图标 3 的下载地址进入下载页面，选择所需要的版本。\n如本地已安装 JDK 可跳过此步骤。如果本地安装过Android Studio，那么其自带JDK，路径一般在“C:\\Program Files\\Android\\Android Studio\\jre”。")])]),a._v(" "),t("li",[t("p",[a._v("将步骤 1 下载的内容解压，填入图标 4 处（Mac电脑找到 Home 目录，Win电脑为解压后的根目录），可参考文档最后的示例。")])])]),a._v(" "),t("p",[t("strong",[a._v("注意")])]),a._v(" "),t("ul",[t("li",[a._v("HBuilderX 4.02+支持此配置项")]),a._v(" "),t("li",[a._v("Gradle8.0 最低要求 JDK 版本为 17。更多版本要求"),t("a",{attrs:{href:"https://developer.android.google.cn/build/releases/past-releases?hl=zh-cn",target:"_blank",rel:"noopener noreferrer"}},[a._v("参考文档"),t("OutboundLink")],1)])]),a._v(" "),t("h4",{attrs:{id:"配置-android-sdk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置-android-sdk"}},[a._v("#")]),a._v(" 配置 Android SDK")]),a._v(" "),t("p",[a._v("点击图标 5 的下载地址进入安卓官网，提供如下两种形式，下载Android Studio 或 单独下载 Command line tools only。")]),a._v(" "),t("h5",{attrs:{id:"◇-下载-android-studio"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#◇-下载-android-studio"}},[a._v("#")]),a._v(" ◇ 下载 Android Studio")]),a._v(" "),t("ol",[t("li",[a._v("如图所示，根据平台下载 Android Studio")])]),a._v(" "),t("p",[t("img",{attrs:{src:"/images/sdk-2.png",alt:"image"}})]),a._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[a._v("安装后必须启动 Android Studio，Android Studio 启动后会开始自动下载 Android SDK（需翻墙）。Android Studio初始化完毕后，一般会在如下目录找到 Android Studio 中 sdk 的路径，然后填入图标 6 处。")])]),a._v(" "),t("ul",[t("li",[a._v("默认路径 mac 为"),t("code",[a._v("/Users/用户名/Library/Android/sdk")]),a._v("；window 为"),t("code",[a._v("C:\\Users\\用户名\\AppData\\Local\\Android\\Sdk")])])]),a._v(" "),t("h5",{attrs:{id:"◇-如不想安装-android-studio-可通过下载-command-line-tools-only"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#◇-如不想安装-android-studio-可通过下载-command-line-tools-only"}},[a._v("#")]),a._v(" ◇ 如不想安装 Android Studio 可通过下载 Command line tools only")]),a._v(" "),t("p",[a._v("Android Studio占用体积较大，空间不足时可考虑单独下载 Command line tools only")]),a._v(" "),t("ol",[t("li",[a._v("如图所示，根据平台下载 Command line tools only。")])]),a._v(" "),t("p",[t("img",{attrs:{src:"/images/sdk.png",alt:"image"}})]),a._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[a._v("下载解压后通过`%解压目录%/bin/sdkmanager 脚本安装 build-tools 和 platforms")])]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v('sdkmanager --sdk_root=%sdk路径% --install "build-tools;30.0.0"\n\nsdkmanager --sdk_root=%sdk路径% --install "platforms;android-30"\n')])])]),t("ol",{attrs:{start:"4"}},[t("li",[t("p",[a._v("将"),t("code",[a._v("%sdk路径%")]),a._v("填入图标 6 处。")])]),a._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://developer.android.google.cn/studio/command-line/sdkmanager",target:"_blank",rel:"noopener noreferrer"}},[a._v("sdkmanager 使用文档"),t("OutboundLink")],1)])])]),a._v(" "),t("p",[t("strong",[a._v("注意")])]),a._v(" "),t("ul",[t("li",[a._v("下载 Android Studio 和下载 Command line tools only 选择一种形式下载 sdk 即可。")])]),a._v(" "),t("h4",{attrs:{id:"配置示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置示例"}},[a._v("#")]),a._v(" 配置示例")]),a._v(" "),t("p",[a._v("mac系统配置后如下图（根据本地目录结构有所不同）\n"),t("img",{attrs:{src:"/images/uts-android-1.png",alt:"image"}})]),a._v(" "),t("p",[a._v("win系统配置后如下图（根据本地目录结构有所不同）\n"),t("img",{attrs:{src:"/images/uts-android-3.png",alt:"image"}})]),a._v(" "),t("p",[t("strong",[a._v("注意")])]),a._v(" "),t("ul",[t("li",[a._v("如果环境已存在可以直接设置本地的工具包路径")]),a._v(" "),t("li",[a._v("此插件依赖 sdk 目录下 build-tools 版本不低于 30.0.0")]),a._v(" "),t("li",[a._v("此插件依赖 sdk 目录下 platforms 版本不低于 android-30")])]),a._v(" "),t("h2",{attrs:{id:"gradle缓存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gradle缓存"}},[a._v("#")]),a._v(" gradle缓存")]),a._v(" "),t("blockquote",[t("p",[a._v("项目依赖的三方仓储下载完成后会生成缓存，缓存如果有效，下次运行将直接跳过配置检测和下载过程。如需要缓存主动失效可清理gradle的缓存目录，正常存放于"),t("code",[a._v("用户目录/.gradle/caches")]),a._v("。")])])])}),[],!1,null,null,null);t.default=s.exports}}]);