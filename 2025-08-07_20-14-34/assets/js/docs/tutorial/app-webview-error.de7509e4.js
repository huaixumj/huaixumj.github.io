(window.webpackJsonp=window.webpackJsonp||[]).push([[384],{769:function(t,s,a){"use strict";a.r(s);var r=a(1),n=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("当webview组件(窗口)加载错误地址（如本地页面不存在）或者访问网络资源失败（如无法访问网络）时会自动显示默认错误页面："),s("br"),t._v(" "),s("img",{attrs:{src:"/images/error-default.jpg",alt:""}})]),t._v(" "),s("p",[t._v("如需修改默认错误页面样式，可以通过以下方法自定义Webview的404等错误页面。")]),t._v(" "),s("h3",{attrs:{id:"设置自定义错误页面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置自定义错误页面"}},[t._v("#")]),t._v(" 设置自定义错误页面")]),t._v(" "),s("p",[s("strong",[t._v("可视化界面配置")])]),t._v(" "),s("p",[t._v("打开项目的manifest.json文件，在 “App常用其它设置” -> “自定义404错误页面” 下点击 “浏览” 选择页面文件：\n"),s("img",{attrs:{src:"/images/error-manifest.png",alt:""}})]),t._v(" "),s("blockquote",[s("p",[t._v("注：建议使用html文件，并放到项目根目录下的 hybrid/html 文件夹中")])]),t._v(" "),s("p",[s("strong",[t._v("源码视图配置")]),s("br"),t._v('\n打开项目的manifest.json文件，切换到“源码视图”，根据项目类型进行配置错误页面路径，推荐使用本地地址，相对于应用根目录；设置 url 属性值为 "none" 表示关闭自定义错误页面功能，加载页面错误时显示系统默认错误页面内容。')]),t._v(" "),s("ul",[s("li",[t._v("uni-app项目"),s("br"),t._v('\n在 "app-plus" -> "error" 节点的 url 属性配置自定义错误页面路径，示例如下：')])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"app-plus"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"url"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hybrid/html/error.html"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n")])])]),s("ul",[s("li",[t._v("5+App/Wap2App项目"),s("br"),t._v('\n在 "plus" -> "error" 节点的 url 属性配置自定义错误页面路径，示例如下：')])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"plus"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"url"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error.html"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n")])])]),s("p",[t._v("其中url地址推荐使用本地地址，相对于应用根目录。\n设置为“none”则关闭跳转到错误页面功能，此时页面显示Webview默认的错误页面内容。")]),t._v(" "),s("h3",{attrs:{id:"错误页面中监听事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误页面中监听事件"}},[t._v("#")]),t._v(" 错误页面中监听事件")]),t._v(" "),s("p",[t._v('自定义404错误页面时，可能需要在 error.html 页面中获取错误原因，可以通过以下方法监听 "error" 事件获取完整错误信息，示例如下：')]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取错误信息")]),t._v("\ndocument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("e")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 错误页面的url地址")]),t._v("\n \t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" href "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 错误页面的完整路径（包括完整的协议头）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"运行时动态设置自定义错误页面"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#运行时动态设置自定义错误页面"}},[t._v("#")]),t._v(" 运行时动态设置自定义错误页面")]),t._v(" "),s("p",[t._v("如果需要单独自定义某个Webview窗口的错误页面，则需要在创建时通过"),s("a",{attrs:{href:"http://www.dcloud.io/docs/api/zh_cn/webview.html#plus.webview.WebviewStyle",target:"_blank",rel:"noopener noreferrer"}},[t._v("WebviewStyle"),s("OutboundLink")],1),t._v("对象的errorPage属性控制:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" styles "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("errorPage")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"error.html"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置为“none”则关闭此Webview窗口的跳转到错误页面功能")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" webview "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" plus"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webview"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" styles"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("   \nwebview"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("show")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("注：仅5+App/Wap2App项目支持")])]),t._v(" "),s("h3",{attrs:{id:"常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),s("ul",[s("li",[t._v("Android平台使用iframe时如果无法加载页面在不同版本系统上存在差异：\n"),s("ul",[s("li",[t._v("Android5.0及以上版本：Webview窗口对象不会加载错误页面，仅iframe节点显示无法加载页面；")]),t._v(" "),s("li",[t._v("5.0以下版本：Webview窗口对象会加载错误页面。")])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);