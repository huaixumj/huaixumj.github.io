(window.webpackJsonp=window.webpackJsonp||[]).push([[369],{752:function(t,s,a){"use strict";a.r(s);var n=a(1),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"开通"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开通"}},[t._v("#")]),t._v(" 开通")]),t._v(" "),s("ul",[s("li",[t._v("登录"),s("a",{attrs:{href:"https://dev.dcloud.net.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("DCloud开发者中心"),s("OutboundLink")],1),t._v("，通过实名认证后，可通过以下入口进入UniPush的Web控制台进行配置\n"),s("ul",[s("li",[t._v("HBuilderX中打开项目的manifest.json文件，在“App模块配置”项的“Push(消息推送)”->“UniPush”下点击"),s("code",[t._v("配置")]),t._v(" "),s("img",{attrs:{src:"/images/unipush-hx-config.png",alt:""}})]),t._v(" "),s("li",[t._v("登录"),s("a",{attrs:{href:"https://dev.dcloud.net.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("DCloud开发者中心"),s("OutboundLink")],1),t._v("，在“我的应用”列表中选择进入应用管理页面，点击上方选项卡中的“uniPush”，然后点击“应用信息”\n"),s("img",{attrs:{src:"/images/unipush-web-config.png",alt:""}})])])]),t._v(" "),s("li",[t._v("在UniPush开通界面配置“Android包名”、“Android应用签名”、“iOS Bundle Id”等信息，点击“开通”")]),t._v(" "),s("li",[t._v("开通后可进行其它消息推送参数配置\n"),s("ul",[s("li",[t._v("Android平台"),s("br"),t._v("\n为了提升App离线送达率，建议配置厂商推送设置")]),t._v(" "),s("li",[t._v("iOS平台"),s("br"),t._v("\n需配置推送证书，在“UniPush”页面的“配置管理”->“应用配置”可上传推送证书")])])])]),t._v(" "),s("p",[t._v("更多信息详见 "),s("a",{attrs:{href:"https://ask.dcloud.net.cn/article/35716",target:"_blank",rel:"noopener noreferrer"}},[t._v("UniPush开通指南"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),s("p",[t._v("在manifest.json文件“App模块配置”项的“Push(消息推送)”下，勾选“UniPush”\n"),s("img",{attrs:{src:"/images/unipush-manifest.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("注意")])]),t._v(" "),s("ul",[s("li",[t._v("UniPush模块需要开通后才能提交云端打包，否则会提示错误，如未开通UniPush不要勾选此模块")]),t._v(" "),s("li",[t._v("UniPush推送功能需要提交云端打包后才能生效，真机运行时请使用"),s("a",{attrs:{href:"https://ask.dcloud.net.cn/article/35115",target:"_blank",rel:"noopener noreferrer"}},[t._v("自定义调试基座"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("本地离线打包参考"),s("a",{attrs:{href:"https://nativesupport.dcloud.net.cn/AppDocs/usemodule/androidModuleConfig/push",target:"_blank",rel:"noopener noreferrer"}},[t._v("Android平台UniPush模块配置"),s("OutboundLink")],1),t._v("、"),s("a",{attrs:{href:"https://nativesupport.dcloud.net.cn/AppDocs/usemodule/iOSModuleConfig/push",target:"_blank",rel:"noopener noreferrer"}},[t._v("iOS平台UniPush模块配置"),s("OutboundLink")],1)])]),t._v(" "),s("h4",{attrs:{id:"unipush-gp-fcm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#unipush-gp-fcm"}},[t._v("#")]),t._v(" FCM配置")]),t._v(" "),s("h5",{attrs:{id:"概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),s("p",[t._v("在海外网络环境下，部分网络在连接UniPush技术支持供应商个推的推送服务时，可能出现不稳定的情况。此时，开发者可以接入 FCM 辅助通道，当在个推服务断线的情况下，通过谷歌的 FCM 推送通道下发消息，提升推送到达率。")]),t._v(" "),s("p",[s("strong",[t._v("使用FCM时手机端需安装Google移动服务（GMS），并且可以正常连接Google服务（国内网络需要翻墙）")])]),t._v(" "),s("p",[t._v("使用FCM必须先开通使用UniPush：")]),t._v(" "),s("ul",[s("li",[t._v("开通UniPush服务参考："),s("a",{attrs:{href:"https://ask.dcloud.net.cn/article/35716",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://ask.dcloud.net.cn/article/35716"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("App端使用UniPush参考："),s("a",{attrs:{href:"https://ask.dcloud.net.cn/article/35622",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://ask.dcloud.net.cn/article/35622"),s("OutboundLink")],1)])]),t._v(" "),s("h5",{attrs:{id:"从谷歌后台申请key信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#从谷歌后台申请key信息"}},[t._v("#")]),t._v(" 从谷歌后台申请key信息")]),t._v(" "),s("p",[t._v("进入 "),s("a",{attrs:{href:"https://firebase.google.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Firebase官网"),s("OutboundLink")],1),t._v("创建项目，获取google-services.json文件及Server key。")]),t._v(" "),s("p",[t._v("登录google账号，如果没有账号请先注册\n"),s("img",{attrs:{src:"/images/signin.png",alt:""}})]),t._v(" "),s("p",[t._v("登录后点击右上角的“Go to console”\n"),s("img",{attrs:{src:"/images/gotoconsole.png",alt:""}})]),t._v(" "),s("p",[t._v("打开项目列表页面，点击“Add project”创建项目\n"),s("img",{attrs:{src:"/images/addproject.png",alt:""}})]),t._v(" "),s("p",[t._v("输入项目名称（根据自己应用取名），点击“Continue”\n"),s("img",{attrs:{src:"/images/createproject1.png",alt:""}})]),t._v(" "),s("p",[t._v("确认是否需要使用Google Analytics服务（根据自己需要开启或关闭），点击“Continue”\n"),s("img",{attrs:{src:"/images/createproject2.png",alt:""}})]),t._v(" "),s("p",[t._v("确认后创建项目，点击“Continue”\n"),s("img",{attrs:{src:"/images/createproject3.png",alt:""}})]),t._v(" "),s("p",[t._v("进入项目详情页面，点击“Android”图标添加Android应用\n"),s("img",{attrs:{src:"/images/android.png",alt:""}})]),t._v(" "),s("p",[t._v("输入Android应用信息（包名、昵称、证书SHA-1），点击“Register App”\n"),s("img",{attrs:{src:"/images/regapp.png",alt:""}})]),t._v(" "),s("p",[t._v("注册Android应用后下载配置文件“google-services.json”，"),s("strong",[t._v("保存google-services.json文件后面需要使用")]),t._v("\n点击“Next”继续\n"),s("img",{attrs:{src:"/images/download.png",alt:""}})]),t._v(" "),s("p",[t._v("此步骤中的操作云端打包机已经处理，忽略提示信息，继续点击“Next”，进入下一步\n完成注册Android应用，点击“Continue to console”回到项目详情页面\n"),s("img",{attrs:{src:"/images/continuetoconsole.png",alt:""}})]),t._v(" "),s("p",[t._v("点击“Project settings”，进入项目设置页面\n"),s("img",{attrs:{src:"/images/settings.png",alt:""}})]),t._v(" "),s("p",[t._v("切换到"),s("code",[t._v("服务账号")]),t._v("项，点击"),s("code",[t._v("生成新的私钥")]),t._v("，"),s("strong",[t._v("保存私钥json文件到本地，后面需要使用")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/img_vendor_fcm0.jpg",alt:""}})]),t._v(" "),s("h5",{attrs:{id:"unipush后台配置fcm参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#unipush后台配置fcm参数"}},[t._v("#")]),t._v(" UniPush后台配置FCM参数")]),t._v(" "),s("p",[t._v("配置FCM需先开通UniPush，如应用未开通UniPush请先开通。\n在HBuilderX的mainfest.json页面，在“App SDK配置”项下的“uniPush”栏点击“配置”\n"),s("img",{attrs:{src:"/images/hx_unipush.png",alt:""}})]),t._v(" "),s("p",[t._v("打开DCloud的开发者中心后台进入应用列表，点击应用名称进入详情，点击上方“uniPush”选项卡，点击“厂商推送设置”按钮进入配置UniPush的FCM参数")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/img_vendor_fcm1.jpg",alt:""}})]),t._v(" "),s("p",[t._v("保存成功后在HBuilderX中重新提交云端打包，并在“App-云打包”界面选择google play 渠道包：\n"),s("img",{attrs:{src:"/images/hx_package.png",alt:""}})]),t._v(" "),s("p",[t._v("如果你已经完成了uniPush的代码开发，只需完成上述配置和打包即可，不用修改代码。")]),t._v(" "),s("p",[t._v("如果你还没有开发过推送代码，参考App端使用UniPush参考："),s("a",{attrs:{href:"https://ask.dcloud.net.cn/article/35622",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://ask.dcloud.net.cn/article/35622"),s("OutboundLink")],1)]),t._v(" "),s("h5",{attrs:{id:"本地离线打包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地离线打包"}},[t._v("#")]),t._v(" 本地离线打包")]),t._v(" "),s("p",[t._v("Android平台离线sdk集成UniPush支持FCM可参考："),s("a",{attrs:{href:"https://nativesupport.dcloud.net.cn/AppDocs/usemodule/androidModuleConfig/push?id=%e8%b0%b7%e6%ad%8c%e6%8e%a8%e9%80%81",target:"_blank",rel:"noopener noreferrer"}},[t._v("Push(消息推送)"),s("OutboundLink")],1)]),t._v(" "),s("h5",{attrs:{id:"注意事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),s("p",[t._v("** FCM 离线消息仅支持GOOGLE 推送，暂不支持国内设备商的海外发行版本**")]),t._v(" "),s("h4",{attrs:{id:"unipush-icons"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#unipush-icons"}},[t._v("#")]),t._v(" Android平台推送图标配置")]),t._v(" "),s("p",[t._v("UniPush和个推推送模块支持设置自定义推送图标，包括push图标和推送小图标(small)")]),t._v(" "),s("ul",[s("li",[t._v("push图标"),s("br"),t._v("\n默认使用应用图标")]),t._v(" "),s("li",[t._v("推送小图标(small)"),s("br"),t._v("\n默认使用个推提供的小图标")])]),t._v(" "),s("p",[t._v("显示效果如下图所示：")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/custom_push_icon_small_instructions.png",alt:""}})]),t._v(" "),s("h5",{attrs:{id:"源码视图配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#源码视图配置"}},[t._v("#")]),t._v(" 源码视图配置")]),t._v(" "),s("p",[t._v('打开项目的manifest.json文件，切换到“源码视图”，手动设置推送图标。\n在 "app-plus" -> "distribute" -> "sdkConfigs" -> "push" -> "unipush" -> "icons"节点下配置推送图标')]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"unipush"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("                    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，JSON对象，使用UniPush SDK配置，无需手动配置参数，云端打包自动获取配置参数")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"icons"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("                          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，JSON对象，推送图标配置")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"push"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("                               "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，JSON对象，Push图标配置")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ldpi"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，字符串类型，普通屏设备推送图标路径，分辨率要求48x48")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mdpi"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，字符串类型，大屏设备设备推送图标路径，分辨率要求64x64")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"hdpi"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，字符串类型，高分屏设备推送图标路径，分辨率要求96x96")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"xhdpi"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，字符串类型，720P高分屏设备推送图标路径，分辨率要求128x128")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"xxhdpi"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，字符串类型，1080P高密度屏幕推送图标路径，分辨率要求192x192")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"small"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("                               "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，JSON对象，Push小图标配置")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ldpi"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，字符串类型，普通屏设备推送小图标路径，分辨率要求18x18")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mdpi"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，字符串类型，大屏设备设备推送小图标路径，分辨率要求24x24")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"hdpi"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，字符串类型，高分屏设备推送小图标路径，分辨率要求36x36")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"xhdpi"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，字符串类型，720P高分屏设备推送小图标路径，分辨率要求48x48")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"xxhdpi"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，字符串类型，1080P高密度屏幕推送小图标路径，分辨率要求72x72")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"xxxhdpi"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                               "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//可选，字符串类型，4K屏设备推送小图标路径，分辨率要求96x96")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("也可在HBuilder X（3.5.1+ 版本） 中可视化配置")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/unipush_icons_hx_config.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("注意事项")])]),t._v(" "),s("ul",[s("li",[t._v('5+ App项目在manifest.json文件的 "plus" -> "distribute" -> "plugins" -> "push" -> "unipush" -> "icons"节点下配置推送图标')]),t._v(" "),s("li",[t._v("“个推推送”模块已不再维护，推荐使用UniPush模块，如需继续使用“个推推送”模块，可将“unipush”节点名称修改为“igexin”进行配置，完整配置信息可参考"),s("a",{attrs:{href:"/collocation/manifest-app"}},[t._v("App完整manifest.json")])])]),t._v(" "),s("h5",{attrs:{id:"推送小图标-small-要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#推送小图标-small-要求"}},[t._v("#")]),t._v(" 推送小图标(small)要求")]),t._v(" "),s("p",[t._v("设计规范需要注意：")]),t._v(" "),s("ol",[s("li",[t._v("必须是带 Alpha 透明通道的 PNG 图片。")]),t._v(" "),s("li",[t._v("背景必须是透明的。 （如果非透明就会显示为白色方块）")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/unipsuh_small_icon_style.png.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"使用unipush"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用unipush"}},[t._v("#")]),t._v(" 使用UniPush")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("uni-app项目详细使用教程请参考 "),s("a",{attrs:{href:"https://uniapp.dcloud.io/unipush",target:"_blank",rel:"noopener noreferrer"}},[t._v("统一推送UniPush"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("strong",[t._v("5+ App、Wap2App项目详细使用教程请参考 "),s("a",{attrs:{href:"https://ask.dcloud.net.cn/article/35622",target:"_blank",rel:"noopener noreferrer"}},[t._v("UniPush使用指南"),s("OutboundLink")],1)])])]),t._v(" "),s("h3",{attrs:{id:"常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),s("h4",{attrs:{id:"ios-pushregistermode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ios-pushregistermode"}},[t._v("#")]),t._v(" iOS启动时弹出发送通知授权框的问题")]),t._v(" "),s("p",[t._v("App勾选“Push（消息推送）”模块后，默认应用启动会立即申请推送消息权限，弹出系统发送通知授权框，如下："),s("br"),t._v(" "),s("img",{attrs:{src:"/images/ios-privacy.png",alt:""}}),s("br"),t._v('\n如果希望应用启动不申请推送消息权限（不弹出系统发送通知授权框），可以在manifest.json文件的源码视图中配置"app-plus" -> "distribute" -> "ios" -> "pushRegisterMode"字段值为"manual"，如下：')]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"app-plus"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"distribute"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ios"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pushRegisterMode"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"manual"')]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("需提交云端打包后生效"),s("br"),t._v('\n配置为"manual"，需要在App代码中调用'),s("a",{attrs:{href:"https://uniapp.dcloud.net.cn/api/plugins/push.html#getpushclientid",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni.getPushClientId"),s("OutboundLink")],1),t._v("触发申请推送消息权限，用户同意返回客户端推送标识")])]),t._v(" "),s("h4",{attrs:{id:"ios勾选推送并且基于hbuilderx-3-6-14-打包ipa变大的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ios勾选推送并且基于hbuilderx-3-6-14-打包ipa变大的问题"}},[t._v("#")]),t._v(" iOS勾选推送并且基于HBuilderX 3.6.14+打包ipa变大的问题")]),t._v(" "),s("ol",[s("li",[t._v("为什么会变大?"),s("br"),t._v("\n原因是推送SDK升级需要支持Swift环境，之前工程如果不包含Swift环境需要添加Swift环境(打包使用Swift语言开发的原生插件同样有类似问题)。")]),t._v(" "),s("li",[t._v("为什么只有生产包变大?"),s("br"),t._v("\n只有用生产证书+AppStore类型的描述文件打出来的ipa会增大80M左右，苹果为了兼容iOS12.2之前的Swift版本，打包AppStore类型的ipa需要将全部版本的Swift环境添加到ipa的根目录，而测试证书以及adhoc描述文件打的包不会添加多个版本的Swift环境。\n另：设置支持系统大于iOS12.2也可解决以上问题 "),s("a",{attrs:{href:"https://uniapp.dcloud.net.cn/collocation/manifest-app.html#ios",target:"_blank",rel:"noopener noreferrer"}},[t._v("设置iOS支持的最低版本"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("ipa变大会导致用户下载的应用变大吗?"),s("br"),t._v("\n大约只会增到2-3M左右。ipa上传的AppStore后苹果会根据用户手机系统最终只会保留一份Swift环境，用户实际下载的安装包不会大特别多。")])])])}),[],!1,null,null,null);s.default=r.exports}}]);