(window.webpackJsonp=window.webpackJsonp||[]).push([[416],{804:function(e,a,t){"use strict";t.r(a);var s=t(1),r=Object(s.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"运行和发行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行和发行"}},[e._v("#")]),e._v(" 运行和发行")]),e._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://im.dcloud.net.cn/#/?joinGroup=668685db8185e1e6e7b7b15e",target:"_blank",rel:"noopener noreferrer"}},[e._v("uni-app 鸿蒙化技术交流群"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"compatibility"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#compatibility"}},[e._v("#")]),e._v(" 兼容性说明")]),e._v(" "),a("ul",[a("li",[e._v("HBuilderX 4.24+ 开始支持运行到鸿蒙平台")]),e._v(" "),a("li",[e._v("鸿蒙开发只支持 Vue3、不支持 Vue2，不支持 plus、但支持 nvue")]),e._v(" "),a("li",[e._v("nvue 编译到鸿蒙后非原生渲染，而是与 web 一样渲染（自动注入一些默认样式进行兼容）")]),e._v(" "),a("li",[e._v("Vue3 也支持选项式代码风格，参考"),a("a",{attrs:{href:"https://uniapp.dcloud.net.cn/tutorial/migration-to-vue3.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue2 升 Vue3 指南"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("HBuilderX 4.41+ 开始运行到鸿蒙设备时支持修改代码后热刷更新")]),e._v(" "),a("li",[e._v("HBuilderX 4.41+ 开始运行到鸿蒙设备时控制台显示的应用日志支持回源代码")]),e._v(" "),a("li",[e._v("HBuilderX 4.43+ 开始支持将 "),a("code",[e._v("mainfest.json")]),e._v(" 里面配置的应用版本名称/应用版本号（"),a("code",[e._v("versionName")]),e._v("/"),a("code",[e._v("versionCode")]),e._v("）应用于鸿蒙平台，且优先于 "),a("code",[e._v("harmony-configs/AppScope/app.json5")]),e._v(" 中的设置")]),e._v(" "),a("li",[e._v("HBuilderX 4.61+ 开始支持 uni-app x 项目，且支持开启调试功能")]),e._v(" "),a("li",[e._v("HBuilderX 4.61+ 开始支持配置签名证书，且支持自动申请调试证书")]),e._v(" "),a("li",[e._v("HBuilderX 4.71+ 开始支持 uni-app x 项目运行到 x86_64 平台的鸿蒙模拟器")]),e._v(" "),a("li",[e._v("x86_64 平台的鸿蒙模拟器升级到 HarmonyOs 5.1.1(19) Beta1 开始支持运行 uniapp 项目")])]),e._v(" "),a("h2",{attrs:{id:"env"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#env"}},[e._v("#")]),e._v(" 开发环境要求")]),e._v(" "),a("ul",[a("li",[e._v("注册鸿蒙开发者账号，"),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("地址"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("HBuilderX 4.24+ "),a("a",{attrs:{href:"https://www.dcloud.io/hbuilderx.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("下载地址"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("DevEco Studio "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/download/?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("下载地址"),a("OutboundLink")],1),e._v(" "),a("ul",[a("li",[e._v("HBuilderX 4.24+ 要求 DevEco Studio 5.0.3.400+")]),e._v(" "),a("li",[e._v("HBuilderX 4.31+ 要求 DevEco Studio 5.0.3.800+。")]),e._v(" "),a("li",[e._v("HBuilderX 4.61+ 针对 uni-app x 项目要求 DevEco Studio 5.0.7.100+。")]),e._v(" "),a("li",[e._v("uni-app 项目要求鸿蒙系统版本 API 12 以上，uni-app x 项目要求鸿蒙系统版本 API 14 以上（DevEco Studio 有内置鸿蒙模拟器）")])])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/download/?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("点击下载"),a("OutboundLink")],1),e._v(" DevEco5.1.1Beta 版本，下载 API19 模拟器即可运行 uni-app 鸿蒙项目和元服务，除此之外的模拟器暂不支持。")])]),e._v(" "),a("h3",{attrs:{id:"project-path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#project-path"}},[e._v("#")]),e._v(" 项目根目录与鸿蒙工程目录")]),e._v(" "),a("p",[e._v("默认情况下，HBuilderX 会在项目内的 "),a("code",[e._v("unpackage")]),e._v(" 目录下游创建鸿蒙工程目录，用于构建鸿蒙的运行包和发行包：")]),e._v(" "),a("ul",[a("li",[e._v("调试运行的时候默认使用的鸿蒙工程目录位于 "),a("code",[e._v("unpackage/dist/dev/app-harmony")])]),e._v(" "),a("li",[e._v("发行打包的时候默认使用的鸿蒙工程目录位于 "),a("code",[e._v("unpackage/dist/build/app-harmony")])])]),e._v(" "),a("p",[e._v("鸿蒙工具链对于鸿蒙工程目录的路径有一定的限制条件：不能包含中文字符和某些特殊字符，准确地说，允许在路径中使用的字符仅限于大小写英文字母、数字、正斜杠、反斜杠、下划线、连字符、冒号、句点，\n如果安装了较新版本的 DevEco Studio 则还允许包含空格。")]),e._v(" "),a("p",[e._v("鸿蒙工具链在对鸿蒙工程目录进行构建的过程中，会在内部产生一些路径比较长的文件，在 Windows 系统中很容易超过系统对于文件路径长度的限制，从而导致构建失败。\n从实测来看，留给鸿蒙工程目录本身的路径长度大约 110 个字符。如果 HBuilderX 使用了默认的鸿蒙工程目录位置，那么 uni-app 项目根目录的路径长度大约最多可以用到 77 个字符。")]),e._v(" "),a("p",[e._v("所以，一般而言，为了避免鸿蒙工程构建过程中出现异常情况，uni-app 项目所在的根目录应该"),a("strong",[e._v("路径不要太长，也不要包含中文或者其它特殊字符")]),e._v("。")]),e._v(" "),a("p",[e._v("从 HBuilderX 4.61+ 开始支持通过配置指定使用特定的目录作为鸿蒙工程目录，这样就可以避免上述对于 uni-app 项目路径的额外限制了。\n方法是在项目根目录下的 "),a("code",[e._v(".hbuilderx/launch.json")]),e._v(" 中添加如下内容（如果该文件不存在则手动创建）：")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"1.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"configurations"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"uni-app:app-harmony"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"distPathDev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"D:/harmony-project-dev"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"distPathBuild"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"D:/harmony-project-build"')]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("p",[e._v("其中 "),a("code",[e._v("distPathDev")]),e._v(" 用于指定调试运行的时候使用的鸿蒙工程目录，"),a("code",[e._v("distPathBuild")]),e._v(" 用于指定发行打包的时候使用的鸿蒙工程目录。")]),e._v(" "),a("p",[e._v("指定的目录不必已经存在，HBuilderX 会创建所需的目录，如果目录已经存在的话 HBuilderX 还可能根据需要尝试删除然后重建。")]),e._v(" "),a("p",[e._v("通过指定鸿蒙工程目录的位置，还可以实现与原生鸿蒙工程的联编调试，具体方法可以参考 "),a("a",{attrs:{href:"https://uniapp.dcloud.net.cn/tutorial/debug/uni-uts-debug-harmony.html#%E8%81%94%E7%BC%96%E8%B0%83%E8%AF%95",target:"_blank",rel:"noopener noreferrer"}},[e._v("联编调试"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"hbxsettings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hbxsettings"}},[e._v("#")]),e._v(" 在 HBuilderX 中设置 DevEco Studio 的安装位置")]),e._v(" "),a("p",[e._v("HBuilderX 依赖于 DevEco Studio 里面带的鸿蒙工具链，所以需要电脑已经安装了符合版本要求的 DevEco Studio。")]),e._v(" "),a("p",[e._v("打开 HBuilderX，点击上方菜单 - 工具 - 设置，再点击 运行配置，在鸿蒙运行配置中设置 DevEco Studio 的安装路径。")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/0c206e8a-868f-49de-8ca2-e7a2d2b768a8.png",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"run-mode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-mode"}},[e._v("#")]),e._v(" 运行的方式")]),e._v(" "),a("p",[e._v("HBuilderX 4.27 版本之前需要配置 "),a("code",[e._v("manifest.json")]),e._v(" 里面设置 "),a("code",[e._v("app-harmony.projectPath")]),e._v(" 属性。")]),e._v(" "),a("p",[e._v("HBuilderX 4.27+ 开始已经把鸿蒙工程模板内置到 HBuilderX 中，【运行到鸿蒙】时自动创建鸿蒙工程目录，与 uni-app 项目的编译产物合并，\n然后调用鸿蒙工具链完成打包和安装、运行等操作，同时从运行设备上收集输出的日志显示到 HBuilderX 的控制台。")]),e._v(" "),a("p",[e._v("新的内置模板的方式虽然在调试运行过程中不再调起 DevEco Studio，但一般来说仍然需要安装 DevEco Studio，因为：")]),e._v(" "),a("ol",[a("li",[e._v("HBuilderX 需要使用 DevEco Studio 提供的鸿蒙工具链来完成相关操作。")]),e._v(" "),a("li",[e._v("启动鸿蒙模拟器这个操作只能在 DevEco Studio 中完成。")]),e._v(" "),a("li",[e._v("调试运行时如果需要进行数字签名，可以在 DevEco Studio 中自动申请调试证书。")])]),e._v(" "),a("h3",{attrs:{id:"connectvirtually"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#connectvirtually"}},[e._v("#")]),e._v(" 启动鸿蒙模拟器")]),e._v(" "),a("p",[e._v("鸿蒙模拟器只能在 DevEco Studio 中启动。\n在 DevEco Studio 中打开任意一个项目（也可以新建一个空项目），然后在下图的位置进入设备管理器：")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/1720085379828ap3pkhhfmig.png",alt:""}})]),e._v(" "),a("p",[e._v("如果没有登录华为账号，此时需要先登录，登录成功后看到如下页面")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/17200854641084hsm583p5jo.png",alt:""}})]),e._v(" "),a("p",[e._v("选择模拟器型号，选第一个即可")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/17200855617759sfquhr1j0o.png",alt:""}})]),e._v(" "),a("p",[e._v("安装完模拟器后，点击启动按钮启动模拟器")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/17200856058101582lbghgf8.png",alt:""}}),e._v(" "),a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/1720085712493il2ep17ldg8.png",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"connectmobile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#connectmobile"}},[e._v("#")]),e._v(" 连接鸿蒙真机")]),e._v(" "),a("p",[a("strong",[e._v("注意：真机需要鸿蒙系统版本 API 12 以上")])]),e._v(" "),a("p",[e._v("打开鸿蒙手机的开发者模式，开启 USB 调试，通过 USB 线连接电脑，在此处能看到对应的设备标识符则表示连接成功")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/1720091392422r91cpejpp7g.png",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"run"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run"}},[e._v("#")]),e._v(" 运行项目到鸿蒙设备")]),e._v(" "),a("p",[e._v("连接好鸿蒙设备之后，就可以在 HBuilderX 中把当前打开的 uni-app (x) 项目运行到鸿蒙设备上了。")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("HBuilderX 打开项目，或者新建一个空白的 uni-app 项目，选 vue3（也可使用已有的 uni-app vue3 项目）")])]),e._v(" "),a("li",[a("p",[e._v("编译 uni-app 到鸿蒙")])])]),e._v(" "),a("p",[e._v("点击 HBuilderX 上方【运行】菜单 - 运行到手机或模拟器 - 运行到鸿蒙")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/52a7f8f1-ea77-4733-b5f2-d92d20ff87cf.png",alt:""}})]),e._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[e._v("【首次运行】第一次运行本项目时会在项目根目录下生成 "),a("code",[e._v("harmony-configs")]),e._v(" 目录用于存放鸿蒙配置文件")])]),e._v(" "),a("p",[e._v("参考："),a("a",{attrs:{href:"#configs"}},[e._v("更多配置指南")])]),e._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[e._v("选择运行设备")])]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/b28d3e2d-fd5d-4600-8626-2faa5acce823.png",alt:""}})]),e._v(" "),a("p",[e._v("在编译代码构建运行包的时候，有三个缓存使用策略可供选择：")]),e._v(" "),a("ul",[a("li",[a("strong",[e._v("根据变化差量更新缓存")]),e._v("：正常使用缓存来避免重复操作，提高构建效率。")]),e._v(" "),a("li",[a("strong",[e._v("强制使用缓存，跳过编译")]),e._v("：如果没有修改代码，只想重新运行起来，则可以使用这种方式，此时若 HBuilderX 检查到已经有构建好的运行包存在，则直接安装运行，否则按正常方式构建再运行。")]),e._v(" "),a("li",[a("strong",[e._v("清空缓存")]),e._v("：每次升级 HBuilderX 之后，新旧版本的鸿蒙工程目录可能不完全兼容，为避免旧版本的干扰，首次运行的时候可以选择这个选项。\n另外，如果运行时出现结果不符合预期的奇怪情况，可以尝试使用这种方式重新构建运行，以消除缓存错乱带来的干扰。")])]),e._v(" "),a("p",[e._v("如果是运行到真机设备上，需要配置签名证书资料。\nHBuilderX 4.61+ 开始支持直接配置证书资料，点击对话框中的【配置调试证书】按钮打开配置对话框，支持自动申请调试证书。\n对于更早版本的 HBuilderX，需要在首次运行之后，在 "),a("code",[e._v("unpackage")]),e._v(" 目录下找到自动生成的鸿蒙工程目录，在 DevEco Studio 里面打开它再去申请证书。\n参考："),a("a",{attrs:{href:"#signing"}},[e._v("证书签名配置指南")])]),e._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[e._v("构建、安装运行包")])]),e._v(" "),a("p",[e._v("HBuilderX 会对当前项目进行编译，然后把编译产物和配置文件组装到鸿蒙工程目录，再调用鸿蒙工具链进行构建、安装等操作，最终在鸿蒙设备上运行起来。")]),e._v(" "),a("p",[e._v("在把运行包安装到手机设备上的时候，HBuilderX 4.61 以前的版本会先尝试卸载手机设备上已安装的应用，应用的私有存储都会被删除；\nHBuilderX 4.61+ 开始不再先尝试卸载，而会进行覆盖安装，只有在安装失败的时候才会尝试卸载并重新安装一次。\n如果需要从全新安装开始调试运行的话，需自行手动卸载。")]),e._v(" "),a("h2",{attrs:{id:"debug-mode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#debug-mode"}},[e._v("#")]),e._v(" 调试的方式")]),e._v(" "),a("p",[e._v("HBuilderX 4.61+ 开始支持针对 uni-app x 项目的调试功能，支持断点调试，可以在控制台里面点击调试按钮开启。")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"60px",border:"1px solid silver"},attrs:{src:"/images/b7c69c0e-0447-41f1-b974-35eb8d076cc8.png",alt:""}})]),e._v(" "),a("p",[e._v("点击【开启调试】按钮的时候如果还在编译阶段，则会在后续应用运行起来的时候进入调试状态。")]),e._v(" "),a("p",[e._v("如果点击时应用已经运行起来，则直接进入调试状态，此后代码运行遇到断点就会停下来，但应用启动阶段的代码断点因为已经错过了时机而不会停下来，要想调试那些代码的话可以点击旁边的【重启应用】按钮。")]),e._v(" "),a("p",[e._v("如果要退出调试状态，再次点击该按钮即可。")]),e._v(" "),a("h2",{attrs:{id:"signing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing"}},[e._v("#")]),e._v(" 证书签名配置指南")]),e._v(" "),a("p",[e._v("数字签名证书的配置最终需要落在鸿蒙工程根目录中的 "),a("code",[e._v("build-profile.json5")]),e._v(" 文件中起作用。")]),e._v(" "),a("p",[e._v("对于 HBuilderX 4.61 以前的版本，需要手动配置 "),a("code",[e._v("harmony-configs/build-profile.json5")]),e._v(" 文件，该文件在构建阶段会覆盖到自动生成的鸿蒙工程的 "),a("code",[e._v("build-profile.json5")]),e._v(" 文件中。")]),e._v(" "),a("p",[e._v("从 HBuilderX 4.61+ 开始支持以交互方式配置相关信息（且支持自动申请调试证书），这些信息在构建阶段会被覆盖填写到鸿蒙工程的 "),a("code",[e._v("build-profile.json5")]),e._v(" 文件中。\n为了兼容以前的版本，如果没有以交互方式配置签名证书，则在 "),a("code",[e._v("harmony-configs/build-profile.json5")]),e._v(" 中配置的相关信息仍会有效。")]),e._v(" "),a("h3",{attrs:{id:"signing-configs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing-configs"}},[e._v("#")]),e._v(" 在 HBuilderX 里面直接配置证书签名")]),e._v(" "),a("p",[e._v("从 HBuilderX 4.61+ 开始支持这种配置方式。在【运行到鸿蒙】操作的【选择运行设备】对话框中，点击【配置调试证书】按钮，打开配置对话框：")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/809e96c5-0a38-4453-bfd6-b2b13c8fb763.png",alt:""}})]),e._v(" "),a("p",[e._v("在 "),a("code",[e._v("manifest.json")]),e._v(" 的编辑页面中，【鸿蒙 App 配置】里面也有打开配置对话框的按钮，分别用于配置调试证书和发布证书：")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/e86e28dc-637d-4f76-ba28-7fbef140d5d3.png",alt:""}})]),e._v(" "),a("p",[e._v("配置证书的对话框：")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/24685aaa-9362-468b-9437-0f4ccbb1a762.png",alt:""}}),e._v(" "),a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/1edad4f0-5fe3-40eb-9a77-130b950d2d02.png",alt:""}})]),e._v(" "),a("h4",{attrs:{id:"signing-configs-files"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing-configs-files"}},[e._v("#")]),e._v(" 证书资料文件")]),e._v(" "),a("p",[e._v("需要设置的文件总共有三个：")]),e._v(" "),a("ul",[a("li",[e._v("私钥库文件（"),a("code",[e._v(".p12")]),e._v("）：里面保存着数字签名用的私钥，由开发者自己手动生成或者 DevEco Studio 自动申请调试证书时自动生成。有两层密码保护（私钥库密码和私钥密码），须妥善保管，尤其是发布证书的私钥一定不能泄露。")]),e._v(" "),a("li",[e._v("证书文件（"),a("code",[e._v(".cer")]),e._v("）：由华为签署颁发，用于证明开发者的身份。在 AppGallery Connect 手动申请并下载获得，或者在自动生成调试证书时自动下载。")]),e._v(" "),a("li",[e._v("签名描述文件（"),a("code",[e._v(".p7b")]),e._v("）：由华为颁发，里面包含了跟应用相关的签名信息，如包名、ACL 权限等，调试证书还包括可用于调试运行的设备列表。在 AppGallery Connect 手动添加并下载获得，或者在自动生成调试证书时自动下载。")])]),e._v(" "),a("p",[e._v("如果已经在 AppGallery Connect 中手动申请过证书，则开发者手中应该已经掌握了所有的必备信息（三个文件，两个密码和一个私钥别名），填写到对话框中即完成配置。\n其中三个文件的位置如果位于 "),a("code",[e._v("harmony-configs")]),e._v(" 目录里面，则会被处理为相对路径。")]),e._v(" "),a("p",[e._v("如果是通过 DevEco Studio 自动申请的调试证书，在 "),a("code",[e._v("build-profile.json5")]),e._v(" 文件里能找到完整的证书配置信息。\n需注意的是，在保存那三个文件的目录里还应该有一个 "),a("code",[e._v("material")]),e._v(" 子目录，它跟私钥库文件（"),a("code",[e._v(".p12")]),e._v("）和两个密码是配合使用的，如果想把私钥库文件移到别的地方去，这个 "),a("code",[e._v("material")]),e._v(" 目录也要复制过去（否则密码将失效）。")]),e._v(" "),a("h4",{attrs:{id:"signing-configs-bundle-name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing-configs-bundle-name"}},[e._v("#")]),e._v(" 应用包名")]),e._v(" "),a("p",[e._v("自动申请得到的签名描述文件是跟给定的包名绑定的，只能用于对设置了相同包名的项目进行签名。")]),e._v(" "),a("p",[e._v("如果是自己手动申请的签名证书，请注意与这里的包名保持一致，否则在填写了签名描述文件之后会出现提示警告。")]),e._v(" "),a("h4",{attrs:{id:"signing-configs-devices"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing-configs-devices"}},[e._v("#")]),e._v(" 运行设备")]),e._v(" "),a("p",[e._v("只有在配置调试证书的对话框里有这项内容。当自动申请调试证书的时候，得到的签名描述文件与给定的设备是绑定的，签名后的应用只能运行于这里列出的设备。")]),e._v(" "),a("p",[e._v("如果是自己手动申请的签名证书，请注意签名描述文件里面包含了这里列出的所有设备，否则在填写了签名描述文件之后会出现提示警告。")]),e._v(" "),a("p",[e._v("点击左侧的【检测】按钮会自动检测出当前已经连接的运行设备（真机或者模拟器），并自动填写到文本框里。")]),e._v(" "),a("p",[e._v("填写的内容是设备的唯一标识，可以填写多个，用半角逗号或者换行符分隔。")]),e._v(" "),a("p",[e._v("如果没有填写有效的设备唯一标识，则无法进行自动申请调试证书的操作。")]),e._v(" "),a("h4",{attrs:{id:"signing-configs-password"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing-configs-password"}},[e._v("#")]),e._v(" 密码")]),e._v(" "),a("p",[e._v("私钥库密码和私钥密码需符合一定的要求：须由 "),a("code",[e._v("6 ~ 64")]),e._v(" 个字符组成，可包含大小写字母、数字以及如下特殊字符 "),a("code",[e._v("~!@#$%^&*()-_=+\\|[{}];:\\'\",<.>/?")]),e._v("，首字符不能为连字符（"),a("code",[e._v("-")]),e._v("）。")]),e._v(" "),a("p",[e._v("如果是在 AppGallery Connect 中手动申请的证书，开发者应该知道申请时所使用的密码，直接在这里填写就可以了。")]),e._v(" "),a("p",[e._v("如果是通过 DevEco Studio 自动申请的调试证书，在 "),a("code",[e._v("build-profile.json5")]),e._v(" 文件里能找到证书配置信息，其中的密码是加密过的，一般是 76 个或更多的 HEX 字符。\n这种加密后的密码也可以直接拿来填写，但需要注意，这种密码要跟前面提到的 "),a("code",[e._v("material")]),e._v(" 目录配合使用，否则在签名时将会发生错误。")]),e._v(" "),a("h4",{attrs:{id:"signing-configs-auto"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing-configs-auto"}},[e._v("#")]),e._v(" 自动申请调试证书")]),e._v(" "),a("p",[e._v("对于调试证书，可以选择自动申请，此时 HBuilderX 会使用开发者授权的账号身份调用 AppGallery Connect 的 API 来自动完成证书的申请和配置。")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("注意")]),e._v(" "),a("p",[e._v("受 API 提供能力的限制暂时无法申请到包含了 ACL 权限的调试证书，如果应用中有使用到 ACL 权限，则仍需采用 "),a("a",{attrs:{href:"#signing-deveco"}},[e._v("下一节介绍的方式")]),e._v(" 配置签名证书。")])]),e._v(" "),a("p",[e._v("点击【自动申请】按钮，会触发浏览器打开华为的登录授权页面：")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px",border:"1px solid silver"},attrs:{src:"/images/87c07603-e9b8-479b-a116-9de37167df66.png",alt:""}})]),e._v(" "),a("p",[e._v("完成登录授权：")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"100px",border:"1px solid silver"},attrs:{src:"/images/b00dcd88-7754-463f-9605-86d839f4b6b5.png",alt:""}})]),e._v(" "),a("p",[e._v("回到 HBuilderX 的对话框中，正常情况下完成自动申请之后，点击【保存】按钮保存即可。")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/a796976c-9a8a-4623-8212-8fd8bab94b37.png",alt:""}})]),e._v(" "),a("p",[e._v("如果自动申请过程中出现错误，可根据错误提示信息进行处理：")]),e._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[e._v("尚未完成开发者注册")]),e._v(" "),a("p",[e._v("数字证书是由华为的 AppGallery Connect 服务系统（简称 AGC）颁发的，开发者首先需要先"),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("注册鸿蒙开发者账号"),a("OutboundLink")],1),e._v("，然后再到 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/service/josp/agc/index.html?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("AppGallery Connect"),a("OutboundLink")],1),e._v(" 申请数字证书。")])]),e._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[e._v("未找到包名为 xx 的应用")]),e._v(" "),a("p",[e._v("登录 AGC 之后，进入【证书、APP ID 和 Profile】中的【APP ID】页面，为指定的包名创建应用，然后才能为该应用申请证书。")])]),e._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[e._v("没查到运行设备的注册信息")]),e._v(" "),a("p",[e._v("申请的调试证书中需要包含当前正在使用的鸿蒙设备（真机或者模拟器）的标识，该设备标识首先需要在 AGC 中注册。")]),e._v(" "),a("p",[e._v("HBuilderX 会尝试自动把当前运行设备的标识注册到 AGC 中，如果失败，请手动在 AGC 中注册：\n登录 AGC 之后，进入【证书、APP ID 和 Profile】中的【设备】页面，把当前设备的 UDID 添加到设备列表中。")]),e._v(" "),a("p",[e._v("可以在前面提到的 "),a("a",{attrs:{href:"#signing-configs-devices"}},[e._v("运行设备")]),e._v(" 得到鸿蒙设备的 UDID 标识，\n也可以通过如下的命令行来获取，具体请参考 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/bm-tool-V5#%E8%8E%B7%E5%8F%96udid%E5%91%BD%E4%BB%A4get?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("华为的官方文档"),a("OutboundLink")],1),e._v("：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("hdc shell bm get -u\n")])])])]),e._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[e._v("证书个数已经达到限制")]),e._v(" "),a("p",[e._v("AGC 中每个开发者账号可以创建的证书是有数量限制的，如果已经达到限制则需要删除一些以释放额度。")]),e._v(" "),a("p",[e._v("登录 AGC 之后，进入【证书、APP ID 和 Profile】中的【证书】页面，从证书列表中删除掉一些已经不再需要的证书。")]),e._v(" "),a("p",[e._v("需要注意的是，如果删除了某个证书，则基于该证书生成的 profile 文件也将失效，可以进入【Profile】页面在列表中找到失效的 profile 并删除掉。")])]),e._v(" "),a("h3",{attrs:{id:"signing-deveco"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing-deveco"}},[e._v("#")]),e._v(" 通过 DevEco Studio 获取证书签名配置")]),e._v(" "),a("p",[e._v("HBuilderX 4.61 之前的版本，只能通过 "),a("code",[e._v("harmony-configs/build-profile.json5")]),e._v(" 文件来配置签名证书，里面的证书资料信息只能由 DevEco Studio 来生成,\n即使是自己在华为 AppGallery Connect 网站上手动申请的证书，也需要填写到 DevEco Studio 里面才能最终得到所需的 "),a("code",[e._v("build-profile.json5")]),e._v(" 文件。")]),e._v(" "),a("p",[e._v("DevEco Studio 须先打开一个鸿蒙工程才可进行证书相关的操作，建议先执行一次【运行到鸿蒙】，然后在项目的 "),a("code",[e._v("unpackage")]),e._v(" 目录下找到临时生成的鸿蒙工程目录，\n在 DevEco Studio 里面打开后再进行后面的操作。\n如果是自己在 DevEco Studio 里面独立创建一个新的鸿蒙工程，虽然也可以用于申请证书，但需注意以下几点：")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("由于证书资料中包含应用的包名，所以在这个鸿蒙工程中设置的应用包名应该与将要开发的 uni-app 应用项目中设置的鸿蒙应用包名（在 "),a("code",[e._v("manifest.json")]),e._v(" 中设置）相一致，这样申请到的证书资料才会有效；")])]),e._v(" "),a("li",[a("p",[e._v("这个鸿蒙工程的根目录中的 "),a("code",[e._v("build-profile.json5")]),e._v(" 文件中的内容应该与 HBuilderX 自动生成的鸿蒙工程中的对应文件保持一致（随着版本迭代该文件的内容可能会有少许变化），否则在后续操作中可能产生异常。")])]),e._v(" "),a("li",[a("p",[e._v("如果有用到 ACL 权限，需在 "),a("code",[e._v("entry/src/main/module.json5")]),e._v(" 中声明，这样获得的证书中才能包含相关的授权。参考 "),a("a",{attrs:{href:"#permission"}},[e._v("权限配置指南")])])])]),e._v(" "),a("p",[e._v("完成申请证书的操作之后，把这个鸿蒙工程中的 "),a("code",[e._v("build-profile.json5")]),e._v(" 文件复制到 uni-app 项目的 "),a("code",[e._v("harmony-configs/build-profile.json5")]),e._v(" 即可。")]),e._v(" "),a("h4",{attrs:{id:"signing-dialog"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing-dialog"}},[e._v("#")]),e._v(" 打开证书配置对话框")]),e._v(" "),a("p",[e._v("点击 DevEco Studio 上方菜单 File - Project Structure...")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/1720087126462d9133uo0hmg.png",alt:""}})]),e._v(" "),a("h4",{attrs:{id:"signing-debug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing-debug"}},[e._v("#")]),e._v(" 调试用的数字签名证书")]),e._v(" "),a("p",[e._v("在使用模拟器进行调试运行的时候，一般是不需要做数字签名的，但如果是用真机进行调试运行，或者业务代码用到了 ACL 权限，那么就需要申请并配置一个"),a("strong",[e._v("调试证书")]),e._v("用于数字签名。")]),e._v(" "),a("p",[e._v("参考 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-debugcert-0000001914263178?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("申请调试证书"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("在对话框中选择 Project - Signing Configs，并勾选 Automatically generate signature，即可自动生成签名证书资料")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/17200873385940vk5oj9ihk.png",alt:""}})]),e._v(" "),a("p",[e._v("参考 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-signing-V5#section18815157237?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("自动签名"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("通过 DevEco Studio 自动申请得到的证书，缺省会保存到电脑的用户目录下，在 Windows 系统中一般是 "),a("code",[e._v("%USERPROFILE%\\.ohos\\config")]),e._v("，在 Mac 系统中一般是 "),a("code",[e._v("~/.ohos/config")]),e._v("。\n配置信息中包含的三个文件缺省都是采用绝对路径来表示，也可以把这些文件移到 "),a("code",[e._v("harmony-configs")]),e._v(" 目录下，这样就可以使用相对路径来表示，相对于 "),a("code",[e._v("harmony-configs")]),e._v(" 目录。\n如果要移动证书文件的位置，需注意跟这三个文件一起的还有一个名为 "),a("code",[e._v("material")]),e._v(" 的目录，也要一起移动。")]),e._v(" "),a("p",[e._v("也可以在对话框中填写手动申请到的证书，填写的时候注意三个文件要在同一个目录。")]),e._v(" "),a("p",[e._v("完成以上操作后，鸿蒙工程中的 "),a("code",[e._v("build-profile.json5")]),e._v(" 文件就包含了完整的调试证书配置信息（在 "),a("code",[e._v("app.signingConfigs")]),e._v(" 数组里，"),a("code",[e._v("name")]),e._v(" 属性的值是 "),a("code",[e._v('"default"')]),e._v("）。")]),e._v(" "),a("h4",{attrs:{id:"signing-release"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing-release"}},[e._v("#")]),e._v(" 发布用的数字签名证书")]),e._v(" "),a("p",[e._v("在发行安装包的时候，一定需要配置一个"),a("strong",[e._v("发布证书")]),e._v("，否则只能拿到一个未签名的安装包，是无法实际使用的。")]),e._v(" "),a("p",[e._v("发布证书只能手动申请，申请完成后把拿到的相关资料文件填写到 DevEco Studio 里面，填写的时候注意三个文件要在同一个目录。")]),e._v(" "),a("p",[e._v("参考 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-releasecert-0000001946273961?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("申请发布证书"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("在对话框中选择 Project - Signing Configs，不要勾选 Automatically generate signature，创建一个名为 "),a("code",[e._v("release")]),e._v(" 的配置项。")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/8ab460c4-33c0-465e-9704-10d6bb935448.png",alt:""}})]),e._v(" "),a("p",[e._v("完成以上操作后，鸿蒙工程中的 "),a("code",[e._v("build-profile.json5")]),e._v(" 文件就包含了完整的发布证书配置信息（在 "),a("code",[e._v("app.signingConfigs")]),e._v(" 数组里，"),a("code",[e._v("name")]),e._v(" 属性的值是 "),a("code",[e._v('"release"')]),e._v("）。")]),e._v(" "),a("h4",{attrs:{id:"signing-profile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing-profile"}},[e._v("#")]),e._v(" 把生成的证书配置信息拷贝到 uni-app 项目中")]),e._v(" "),a("p",[e._v("无论是调试证书还是发布证书，生成的证书资料信息都在鸿蒙工程根目录下的 "),a("code",[e._v("build-profile.json5")]),e._v(" 文件中，把这个文件复制到 uni-app 项目的 "),a("code",[e._v("harmony-configs/build-profile.json5")]),e._v(" 即可。")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/1a2b004c-2b31-4a48-912e-b31ed4740449.png",alt:""}})]),e._v(" "),a("h2",{attrs:{id:"publish"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#publish"}},[e._v("#")]),e._v(" 发行鸿蒙应用到应用市场")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("使用 HBuilderX 4.28+，点击【发行】-【App-Harmony-本地打包】")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/c42f9a21-d782-41e3-9342-bfa3265cbc54.png",alt:""}})]),e._v(" "),a("p",[e._v("如果项目中没有 "),a("code",[e._v("harmony-configs")]),e._v(" 目录，此时会自动生成。")])]),e._v(" "),a("li",[a("p",[e._v("如果日志窗口提示没有配置签名证书资料，则去 "),a("a",{attrs:{href:"#signing-release"}},[e._v("配置发布证书的资料")])])]),e._v(" "),a("li",[a("p",[e._v("配置完证书资料后，再次点击【发行】- 【App-Harmony-本地打包】即可得到已签名的 "),a("code",[e._v(".app")]),e._v(" 安装包文件")])]),e._v(" "),a("li",[a("p",[e._v("最后还需参考鸿蒙官方文档发布鸿蒙应用到应用市场，详见"),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/app/agc-help-releaseharmony-0000001933963166?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("文档"),a("OutboundLink")],1)])])]),e._v(" "),a("h2",{attrs:{id:"permission"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#permission"}},[e._v("#")]),e._v(" 权限配置指南")]),e._v(" "),a("p",[e._v("部分 API 需要在配置文件显示声明权限才能调用，权限的配置文件路径为："),a("code",[e._v("/harmony-configs/entry/src/main/module.json5")]),e._v("，配置节点为："),a("code",[e._v("requestPermissions")]),e._v("，如下图所示")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/bfb249bd-30c0-4be4-b50e-e2695860507d.png",alt:""}})]),e._v(" "),a("p",[e._v("具体请查看以下文档")]),e._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/declare-permissions-V5?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("声明权限"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/permissions-for-all-V5?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("基础权限列表"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/restricted-permissions-V5?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("受限权限列表"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"configs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configs"}},[e._v("#")]),e._v(" 更多配置指南")]),e._v(" "),a("p",[e._v("HBuilderX 支持把 "),a("code",[e._v("manifest.json")]),e._v(" 里面的一些配置项传递给鸿蒙工程，打开这个文件，下面这些配置项与鸿蒙相关：")]),e._v(" "),a("h3",{attrs:{id:"config-basic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config-basic"}},[e._v("#")]),e._v(" 基础配置")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/da24a937-cb3e-4afb-b8c6-604b31b3fb3d.png",alt:""}})]),e._v(" "),a("p",[e._v("目前这里的应用名称、应用版本名称、应用版本号将传递给鸿蒙工程使用。")]),e._v(" "),a("h3",{attrs:{id:"config-app-harmony"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config-app-harmony"}},[e._v("#")]),e._v(" 鸿蒙 App 配置")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/245d9e69-055e-402a-8e71-634443f359df.png",alt:""}})]),e._v(" "),a("p",[e._v("这里的配置是专用于传递给鸿蒙工程使用。")]),e._v(" "),a("p",[e._v("以上的配置项有可能随着 HBuilderX 的升级而有所增加，其优先级高于后面所述的 "),a("code",[e._v("harmony-configs")]),e._v(" 目录。如果这些仍没有满足需求，则可以自行在 "),a("code",[e._v("harmony-configs")]),e._v(" 目录中进行配置。")]),e._v(" "),a("h3",{attrs:{id:"config-dir"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#config-dir"}},[e._v("#")]),e._v(" 使用 "),a("code",[e._v("harmony-configs")]),e._v(" 配置目录")]),e._v(" "),a("p",[e._v("项目的根目录下有一个 "),a("code",[e._v("harmony-configs")]),e._v(" 目录，每当执行跟鸿蒙相关的操作时，HBuilderX 都会检查这个目录，如果目录不存在则会自动创建。\nHBuilderX 早期版本所创建目录初始会存在几个常用的配置文件，4.36+ 版本该目录初始为空。")]),e._v(" "),a("p",[e._v("在执行运行或者发行到鸿蒙的操作过程中，HBuilderX 会根据内置模板生成一个鸿蒙工程目录（一般在 "),a("code",[e._v("unpackage")]),e._v(" 目录下游），然后把 "),a("code",[e._v("harmony-configs")]),e._v(" 目录下的所有内容都原样覆盖过去，\n然后再调用鸿蒙的工具链进行编译打包等操作。")]),e._v(" "),a("p",[e._v("所以，"),a("code",[e._v("harmony-configs")]),e._v(" 目录中的所有文件最终都会原样进入鸿蒙工程目录参与项目构建，所有需要对鸿蒙工程的定制化配置都可以写在这个目录下。")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("注意")]),e._v(" "),a("ul",[a("li",[e._v("在 "),a("code",[e._v("manifest.json")]),e._v(" 支持的鸿蒙相关的配置项将具有更高的优先级。")]),e._v(" "),a("li",[a("code",[e._v("harmony-configs")]),e._v(" 目录下应该"),a("strong",[e._v("仅放置必要的文件")]),e._v("，多余的文件有可能对鸿蒙工具链的执行产生意外的干扰，导致项目无法正常编译打包。")]),e._v(" "),a("li",[e._v("当升级 HBuilderX 到新版本之后，由于其内置的鸿蒙工程模板有可能调整，导致与旧版本的配置文件产生不兼容的情况，所以如果以前正常的项目在升级后出现打包错误的话，\n建议清空 "),a("code",[e._v("harmony-configs")]),e._v(" 目录的原有内容（注意做好备份），再删除 "),a("code",[e._v("unpackage")]),e._v(" 目录，重新运行之后再按需要逐步恢复 "),a("code",[e._v("harmony-configs")]),e._v(" 里面应有的配置。")])])]),e._v(" "),a("p",[e._v("关于 "),a("code",[e._v("harmony-configs")]),e._v(" 目录的使用要遵守鸿蒙的技术规范，具体可参考 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-configuration-file-stage-V5?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("鸿蒙官方文档"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("经常会用到的配置文件有：")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("harmony-configs/build-profile.json5")])]),e._v(" "),a("p",[e._v("其中的 "),a("code",[e._v("app.signingConfigs")]),e._v(" 用于设置数字签名资料，参见 "),a("a",{attrs:{href:"#signing"}},[e._v("证书签名配置指南")])]),e._v(" "),a("p",[e._v("HBuilderX 4.61+ 开始已经支持"),a("a",{attrs:{href:"#signing-configs"}},[e._v("在 HBuilderX 里面直接配置证书签名")]),e._v("，建议采用此方式，无需使用 "),a("code",[e._v("build-profile.json5")]),e._v("。")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("harmony-configs/entry/src/main/module.json5")])]),e._v(" "),a("p",[e._v("修改其中的 "),a("code",[e._v("module.requestPermissions")]),e._v(" 来设置运行权限，参见 "),a("a",{attrs:{href:"#permission"}},[e._v("权限配置指南")])])]),e._v(" "),a("li",[a("p",[a("code",[e._v("harmony-configs/AppScrope/app.json5")])]),e._v(" "),a("p",[e._v("其中的 "),a("code",[e._v("app.bundleName")]),e._v(" 用于设置应用包名。\nHX 4.31+ 已经支持在项目的 "),a("code",[e._v("manifest.json")]),e._v(" 里面以图形界面修改应用包名，如果在那里做了设置，将优先于这里的设置。")]),e._v(" "),a("p",[e._v("其中的 "),a("code",[e._v("app.versionName")]),e._v(" 和 "),a("code",[e._v("app.versionCode")]),e._v(" 用于设置应用版本名称和版本号。\nHX 4.43+ 已经支持使用项目的 "),a("code",[e._v("manifest.json")]),e._v(" 里面的应用版本名称和版本号，将优先于这里的设置。")]),e._v(" "),a("p",[e._v("一般而言，新版本已经不再需要 "),a("code",[e._v("harmony-configs/AppScrope/app.json5")]),e._v(" 文件了。")])])]),e._v(" "),a("h2",{attrs:{id:"tips"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tips"}},[e._v("#")]),e._v(" 注意事项")]),e._v(" "),a("ol",[a("li",[e._v("移植已有的 uni-app 项目源码时，如有其他 npm 依赖，请自行安装")]),e._v(" "),a("li",[e._v("现阶段条件编译仅 APP-HARMONY、APP 可以命中鸿蒙平台")]),e._v(" "),a("li",[e._v("HBuilderX 4.27 以前的版本，在 HBuilderX 里运行后，需要再去鸿蒙 DevEco Studio 里运行；在 HBuilderX 中改动源码后，需要在 DevEco Studio 内点重新运行才能生效")]),e._v(" "),a("li",[e._v("如果模拟器白屏了，尝试重启软件 DevEco Studio，再重启项目")]),e._v(" "),a("li",[e._v("如果模拟器无法连接了，尝试重启电脑")])]),e._v(" "),a("h2",{attrs:{id:"question"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#question"}},[e._v("#")]),e._v(" 常见问题")]),e._v(" "),a("h3",{attrs:{id:"q1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q1"}},[e._v("#")]),e._v(" 如何修改应用名称、版本、图标、权限等信息")]),e._v(" "),a("p",[e._v("manifest.json 里面已经支持一些应用配置项，未直接支持的可以通过 "),a("code",[e._v("harmony-configs")]),e._v(" 来设置，详情参见 "),a("a",{attrs:{href:"#configs"}},[e._v("更多配置指南")]),e._v("。")]),e._v(" "),a("p",[e._v("同时可以参考鸿蒙官方文档："),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/application-component-configuration-stage-V5?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("应用/组件级配置"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"q2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q2"}},[e._v("#")]),e._v(" 应用图标资源规范")]),e._v(" "),a("p",[e._v("为保证图标在系统内显示的一致性，应用预置的图标资源应满足以下要素：")]),e._v(" "),a("ul",[a("li",[e._v("图标资源必须为分层资源（一张前景图和一张背景图）")]),e._v(" "),a("li",[e._v("图标资源尺寸必须为 1024*1024px")]),e._v(" "),a("li",[e._v("图标资源必须为为正方形图像，系统会为对应场景自动生成遮罩裁切")])]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/b0a3c063-02c4-47f3-a23e-5d04ad5c4293.png",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"q3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q3"}},[e._v("#")]),e._v(" 启动图资源规范")]),e._v(" "),a("p",[e._v("启动页可以配置背景色代码（默认为#FFFFFF）和一张启动图，启动图没有尺寸要求，但建议为正方形 logo 图")]),e._v(" "),a("h3",{attrs:{id:"ifndef"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ifndef"}},[e._v("#")]),e._v(" 如何进行条件编译")]),e._v(" "),a("p",[e._v("仅 APP-HARMONY 和 APP 可以条件编译命中鸿蒙平台，APP-PLUS 不能命中中鸿蒙平台")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// #ifdef APP-HARMONY")]),e._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'仅鸿蒙会编译'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// #endif")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// #ifndef APP-HARMONY")]),e._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'仅非鸿蒙会编译'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// #endif")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// #ifdef APP")]),e._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'安卓、苹果、鸿蒙会编译，小程序和Web不会编译'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// #endif")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// #ifndef APP")]),e._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'安卓、苹果、鸿蒙不会编译，小程序和Web会编译'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// #endif")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// #ifdef APP-PLUS")]),e._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'安卓、苹果会编译，鸿蒙不会编译，小程序和Web也不会编译'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// #endif")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// #ifndef APP-PLUS")]),e._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'安卓、苹果不会编译，鸿蒙会编译，小程序和Web也会编译'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// #endif")]),e._v("\n")])])]),a("h3",{attrs:{id:"q4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q4"}},[e._v("#")]),e._v(" 鸿蒙 DevEco Studio 如何开启热重载")]),e._v(" "),a("p",[e._v("HBuilderX 4.27 以前的版本需要在 DevEco Studio 中运行由 uni-app 项目生成的鸿蒙工程，虽然鸿蒙官方文档提供了如何开启热重载，详见"),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hot-reload-0000001527628941-V5?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("文档"),a("OutboundLink")],1),e._v("，\n但目前只能针对 ets 文件的修改进行热更，还无法针对 uni-app 打包的 js 文件进行热更。")]),e._v(" "),a("p",[e._v("HBuilderX 4.27+ 支持直接运行到鸿蒙设备，修改源代码之后需重新调用鸿蒙工具链编译打包，并重新安装到鸿蒙设备上运行，不支持热重载。")]),e._v(" "),a("p",[e._v("HBuilderX 4.41+ 支持热重载，但跟具体修改的代码文件有关，如果进行了无法热重载的修改，会自动重新安装整个应用并重新运行。")]),e._v(" "),a("h3",{attrs:{id:"q5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q5"}},[e._v("#")]),e._v(" 如何查看 console 打印的日志")]),e._v(" "),a("p",[e._v("运行到鸿蒙时，在 uni-app 页面通过 console.log 打印日志可以直接在 HBuilderX 查看。")]),e._v(" "),a("p",[e._v("HBuilderX 4.41+ 在真机运行时需要连接到与主机电脑相同的局域网才能正确接收到日志。")]),e._v(" "),a("p",[e._v("注意：在 UTS 代码里面打印对象或数组时，需要 "),a("code",[e._v("JSON.stringify")]),e._v(" 才能正确显示内容，如 "),a("code",[e._v('console.log("obj", JSON.stringify(obj))')])]),e._v(" "),a("h3",{attrs:{id:"no-log-output"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#no-log-output"}},[e._v("#")]),e._v(" 运行到鸿蒙时不显示日志")]),e._v(" "),a("p",[e._v("HBuilderX 早期版本使用鸿蒙工具链中的 hilog 来收集日志并显示，可能因为设备连接问题或者鸿蒙系统版本升级调整等原因导致日志收集不到。")]),e._v(" "),a("p",[e._v("HBuilderX 4.41+ 在真机运行时需要连接到与主机电脑相同的局域网才能正确接收到日志。")]),e._v(" "),a("p",[e._v("另外，HBuilderX 4.41+ 在控制台工具条中增加了“显示原生日志”的选项，开启后可以看到更多的日志内容。")]),e._v(" "),a("p",[e._v("作为一个应急处理方案，可以打开一个命令行窗口，执行命令 "),a("code",[e._v("hdc shell hilog -T JSAPP")]),e._v(" 来直接从连接的鸿蒙设备查看日志。")]),e._v(" "),a("h3",{attrs:{id:"q6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q6"}},[e._v("#")]),e._v(" 运行出现白屏或闪退怎么解决?")]),e._v(" "),a("p",[e._v("如果你的项目能安装到模拟器上，但是打开闪退，如果你是 Windows系统，你可能使用了低于 API19beta 的模拟器，阅读 "),a("a",{attrs:{href:"#env"}},[e._v("开发环境要求")]),e._v(" 进行下载安装。")]),e._v(" "),a("p",[e._v("如果配置了 "),a("code",[e._v("harmony-configs/build-profile.json5")]),e._v(" 文件，请确认里面的 "),a("code",[e._v("app.products")]),e._v("设置了 "),a("code",[e._v('"useNormalizedOHMUrl": true')]),e._v("。")]),e._v(" "),a("p",[e._v("如果不是上述的原因，最常见的情况就是使用了不支持的组件或者 API，请逐个排查所使用的组件和 API 是否已经兼容了鸿蒙平台，先保证空白工程能运行，排除你的环境、配置问题。"),a("code",[e._v("pages.json")]),e._v(" 只保留一个页面，先自行验证，每个人的问题不一样，需要先自查，可能的问题比如用到了 plus api，用到了条件编译忽略了 app-android 导致逻辑命中失败。")]),e._v(" "),a("p",[e._v("二分排查速度最快，可以尝试对 "),a("code",[e._v("pages.json")]),e._v(" 进行代码二分法排查（删除一半页面如果正常了代表被删除的那一半页面中有造成白屏或闪退的页面）。")]),e._v(" "),a("p",[e._v("也可以查阅HBuilderX 的原生日志、DevEco 的 log 面板日志，筛选 Warn 级别的日志，观察是否有错误。")]),e._v(" "),a("h3",{attrs:{id:"q7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q7"}},[e._v("#")]),e._v(" 模拟器已启动，但无法连接?")]),e._v(" "),a("p",[e._v("确保"),a("a",{attrs:{href:"#signing"}},[e._v("签名证书资料")]),e._v("没有问题的情况下，尝试重启电脑")]),e._v(" "),a("h3",{attrs:{id:"q8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q8"}},[e._v("#")]),e._v(" 报启动鸿蒙失败，请手动启动鸿蒙")]),e._v(" "),a("p",[e._v("此问题仅会在 HBuilderX 4.27 以前的版本存在，因为编译 uni-app 代码完成之后需要调起 DevEco Studio 来运行鸿蒙工程。")]),e._v(" "),a("p",[e._v("请用下面的方法确保设置的 DevEco Studio 安装路径是正确的，重新设置之后请重启 HBuilderX。")]),e._v(" "),a("p",[a("strong",[e._v("Windows 系统")])]),e._v(" "),a("ol",[a("li",[e._v("确保路径是正确的")])]),e._v(" "),a("p",[e._v("Windows 系统快速复制路径方法")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/1721024978448hkblu60vadg.png",alt:""}})]),e._v(" "),a("p",[e._v("注意：复制后的 "),a("code",[e._v("\\")]),e._v(" 要改成 "),a("code",[e._v("/")])]),e._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[e._v("如果步骤 1 操作完还是不行，请尝试")])]),e._v(" "),a("p",[e._v("原路径后面添加 "),a("code",[e._v("/bin/devecostudio64.exe")]),e._v("，然后重启 HBuilderX")]),e._v(" "),a("p",[a("strong",[e._v("Mac 系统")])]),e._v(" "),a("ol",[a("li",[e._v("确保路径是正确的")])]),e._v(" "),a("p",[e._v("Mac 系统快速复制路径方法")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/ee1f4941-3736-4df8-a35c-bb3929fb124f.png",alt:""}})]),e._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[e._v("如果步骤 1 操作完还是不行，请尝试")])]),e._v(" "),a("p",[e._v("原路径后面添加 "),a("code",[e._v("/Contents/MacOS/devecostudio")]),e._v("，然后重启 HBuilderX")]),e._v(" "),a("h3",{attrs:{id:"q9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q9"}},[e._v("#")]),e._v(" 通过 app-plus:titleNView 配置页面右上角按钮未生效")]),e._v(" "),a("p",[e._v("当前导航栏未支持，可以尝试关闭原生导航栏，使用自己的自定义导航栏组件实现。")]),e._v(" "),a("h3",{attrs:{id:"q10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q10"}},[e._v("#")]),e._v(" 鸿蒙支持 uniPush 推送吗?")]),e._v(" "),a("p",[e._v("HBuilderX 4.31 起支持 uniPush 推送，具体配置请参考"),a("a",{attrs:{href:"https://uniapp.dcloud.net.cn/unipush-v2.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("文档"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"q11"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q11"}},[e._v("#")]),e._v(" release 模式进入使用了组合式 api 的页面报错"),a("code",[e._v("Cannot read property route of undefined")])]),e._v(" "),a("p",[e._v("此问题由于 arkTs 的混淆 Bug 引发，即使进入到一个空的组合式 api 页面也会出现这个报错，已反馈给鸿蒙团队处理。")]),e._v(" "),a("p",[e._v("临时解决方案：在鸿蒙项目"),a("code",[e._v("entry/obfuscation-rules.txt")]),e._v("文件中增加一行"),a("code",[e._v("-disable-obfuscation")]),e._v("来禁用混淆。")]),e._v(" "),a("h3",{attrs:{id:"install-parse-native-so-failed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-parse-native-so-failed"}},[e._v("#")]),e._v(" 在部分设备的模拟器上无法运行，报错"),a("code",[e._v("依赖包与运行设备不兼容 Install Failed: error: failed to install bundle")])]),e._v(" "),a("blockquote",[a("p",[e._v("此章节仅针对 HBuilderX 4.29 及之前版本，4.31 及之后的版本暂不支持在 x86_64 平台的模拟器上运行。")])]),e._v(" "),a("p",[e._v("在 x86_64 平台（绝大多数 Windows 系统和部分 MacOS 系统）上使用【运行到鸿蒙】并选择了模拟器作为运行设备的时候，可能会遇到这个报错。")]),e._v(" "),a("p",[e._v("这是由于 HBuilderX 4.29 及之前版本在默认配置里面依赖了支付宝 SDK，而这个包不支持运行在 x86_64 平台的模拟器上，所以在打包后安装到模拟器设备时会报错。")]),e._v(" "),a("p",[e._v("出现这种情况时，如果并不需要这个依赖，可以修改 "),a("code",[e._v("harmony-configs/oh-package.json5")]),e._v(" 文件，在 "),a("code",[e._v("dependencies")]),e._v(" 里面删除 "),a("code",[e._v("@cashier_alipay/cashiersdk")]),e._v(" 就行了；\n如果确实需要，那就只能改用真机设备来运行了。")]),e._v(" "),a("h3",{attrs:{id:"q13"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q13"}},[e._v("#")]),e._v(" harmony 应用怎样调试？")]),e._v(" "),a("blockquote",[a("p",[e._v("HBuilderX 4.61+ 开始支持 uts、uvue、ets 的调试"),a("a",{attrs:{href:"https://uniapp.dcloud.net.cn/tutorial/debug/uni-uts-debug-harmony.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("文档地址"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("参考鸿蒙文档 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/web-debugging-with-devtools?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("使用 DevTools 工具调试前端页面"),a("OutboundLink")],1),e._v(" 进行处理。在 uni-app 的开发模式 "),a("code",[e._v("setWebDebuggingAccess")]),e._v(" 会自动开启，此步骤可以跳过。")]),e._v(" "),a("p",[e._v("业务逻辑 debug 可参考 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/jsvm-debugger-cpuprofiler-heapsnapshot?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("JSVM-API调试&定位"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"q14"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#q14"}},[e._v("#")]),e._v(" Windows 系统中如何使用模拟器")]),e._v(" "),a("p",[e._v("目前下载 API19 模拟器即可运行 uni-app 鸿蒙项目和元服务，"),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/download/?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("点击下载"),a("OutboundLink")],1),e._v(" DevEco5.1.1Beta 版本，低于低版本的模拟器不支持在 Wndows 平台运行模拟器。")]),e._v(" "),a("p",[a("strong",[e._v("在满足兼容性要求的前提下，如果要在 Windows 系统如使用模拟器则需要开启以下功能")])]),e._v(" "),a("p",[e._v("打开控制面板 - 程序与功能 - 开启以下功能")]),e._v(" "),a("ol",[a("li",[e._v("Hyper-V")]),e._v(" "),a("li",[e._v("Windows 虚拟机监控程序平台")]),e._v(" "),a("li",[e._v("虚拟机平台")])]),e._v(" "),a("p",[e._v("注意: 需要 win10 专业版或 win11 专业版才能开启以上功能，家庭版需先升级成专业版或企业版")]),e._v(" "),a("p",[a("img",{staticClass:"zooming",staticStyle:{"max-height":"200px"},attrs:{src:"/images/1720085210915b1knhu7l3u8.png",alt:""}})]),e._v(" "),a("h3",{attrs:{id:"cli-compiler-outdated"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cli-compiler-outdated"}},[e._v("#")]),e._v(" cli 项目运行到鸿蒙时运行起来的是空项目")]),e._v(" "),a("p",[e._v("cli 项目的 uni-app 编译器是跟随项目配置的，跟 HBuilderX 的版本并不直接相关，如果是以前创建的 cli 项目，可能因为关联的编译器版本太低而出现此现象。")]),e._v(" "),a("p",[e._v("建议升级 cli 项目的编译器版本，参考 "),a("a",{attrs:{href:"https://uniapp.dcloud.net.cn/quickstart-cli.html#cliversion",target:"_blank",rel:"noopener noreferrer"}},[e._v("更新编译器的版本"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"no-harmony-build"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#no-harmony-build"}},[e._v("#")]),e._v(" 点击“运行到鸿蒙”之后没有反应，或者提示打包失败，没有其它提示")]),e._v(" "),a("p",[e._v("删除 "),a("code",[e._v("harmony-configs")]),e._v(" 目录（如果目录里有自己修改过的内容请先做好备份），再删除 "),a("code",[e._v("unpackage")]),e._v(" 目录，然后重试。")]),e._v(" "),a("h3",{attrs:{id:"file-readonly"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#file-readonly"}},[e._v("#")]),e._v(" 报错如 "),a("code",[e._v("EPERM: operation not permitted, copyfile ...")])]),e._v(" "),a("p",[e._v("源代码中有资源文件（比如图片）带有只读属性，导致再次打包的时候鸿蒙工具链删除失败报错。找到有问题的文件去掉只读属性，再删除 "),a("code",[e._v("unpackage")]),e._v(" 目录，重试即可。")]),e._v(" "),a("h3",{attrs:{id:"tools-execution-failed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tools-execution-failed"}},[e._v("#")]),e._v(" 报错如 "),a("code",[e._v("hvigor ERROR: Tools execution failed")])]),e._v(" "),a("p",[e._v("HBuilderX  在打包的时候会调用鸿蒙的工具链，其中用到了  java  程序，这种问题一般是因为 java 程序版本不匹配导致的。\n早期版本是优先使用环境变量 PATH 里面能找到的 java 程序，临时的解决办法是在 PATH 环境变量里去掉 java 程序的路径，再重新启动 HBuilderX。\nHBuilderX 4.31+ 会优先使用鸿蒙工具链自带的 java 程序，就不会是这个原因了。")]),e._v(" "),a("p",[e._v("检查电脑上安装的 java 版本，可能是版本过低。建议卸载 java 或者在 PATH 环境变量里去掉 java 的路径。\n新版本（4.31+）已调整为优先使用鸿蒙工具链自带的  java  就不会受这个影响了。")]),e._v(" "),a("h3",{attrs:{id:"long-path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#long-path"}},[e._v("#")]),e._v(" 报错如 "),a("code",[e._v("Unexpected token (Note that you need plugins to import files that are not JavaScript)")]),e._v(" 或 "),a("code",[e._v("Please make sure that the splash page has one and only one '@Entry' decorator")])]),e._v(" "),a("p",[e._v("鸿蒙工具链运行时要求所涉及到的文件的路径总长度不能超过 255 个字符。请尝试把 uni-app 项目的目录位置改到一个比较短的路径下，可能会避开这个问题。")]),e._v(" "),a("h3",{attrs:{id:"install-pnpm-failed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-pnpm-failed"}},[e._v("#")]),e._v(" 报错如 "),a("code",[e._v("...HBuilderX\\plugins\\node\\npm.cmd install,pnpm execute failed")]),e._v(" 或 "),a("code",[e._v("network request to https://registry.npmjs.org/pnpm failed")])]),e._v(" "),a("p",[e._v("鸿蒙工具链在首次运行的时候需要安装一些依赖的工具，且此操作只能在 DevEco Studio 中才能正确执行，方法是在 DevEco Studio 里面随便创建一个工程然后构建运行一下即可。")]),e._v(" "),a("p",[e._v("如果在 DevEco Studio 里面也报了同样的错误，则可以尝试自行设置 npm 的镜像源来解决问题，比如设置环境变量 "),a("code",[e._v("NPM_CONFIG_REGISTRY=https://registry.npmmirror.com")]),e._v(" 使用境内的镜像源。")]),e._v(" "),a("h3",{attrs:{id:"schema-validate-failed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#schema-validate-failed"}},[e._v("#")]),e._v(" 报错如 "),a("code",[e._v("hvigor ERROR: Schema validate failed")])]),e._v(" "),a("p",[e._v("可能是使用的 DevEco Studio 版本过低，要求 5.0.3.800+。")]),e._v(" "),a("p",[e._v("也可能是自行配置的 "),a("code",[e._v("harmony-configs/build-profile.json5")]),e._v(" 文件里面有错误，导致 DevEco Studio 无法正确解析。\n请参考 "),a("a",{attrs:{href:"#config-dir"}},[e._v("文档")]),e._v(" 的方法确保配置正确。")]),e._v(" "),a("h3",{attrs:{id:"signing-configs-failed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signing-configs-failed"}},[e._v("#")]),e._v(" 报错 "),a("code",[e._v("签名证书资料配置错误")])]),e._v(" "),a("p",[e._v("如果项目中配置的签名证书资料有误，则会报这个错，常见的原因是指向的文件不存在，或者密码设置错误。")]),e._v(" "),a("p",[e._v("请参考 "),a("a",{attrs:{href:"#signing"}},[e._v("证书签名配置指南")]),e._v(" 检查相关的配置项。")]),e._v(" "),a("h3",{attrs:{id:"permissions-failed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#permissions-failed"}},[e._v("#")]),e._v(" 报错 "),a("code",[e._v("运行所需的权限没有签名授权")])]),e._v(" "),a("p",[e._v("参考 "),a("a",{attrs:{href:"#permission"}},[e._v("权限配置指南")])]),e._v(" "),a("p",[e._v("这是由于默认配置里面声明申请了一些权限，其中包含受限权限（需要白名单授权的 ACL 权限），这就要求安装包必须用具备足够权限授权的数字证书进行签名，否则无法安装到设备上。")]),e._v(" "),a("p",[e._v("目前已知的 ACL 权限包括：")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("ohos.permission.WRITE_IMAGEVIDEO")])]),e._v(" "),a("li",[a("code",[e._v("ohos.permission.WRITE_CONTACTS")])]),e._v(" "),a("li",[a("code",[e._v("ohos.permission.READ_PASTEBOARD")])])]),e._v(" "),a("p",[e._v("如果业务代码里面并没有实际使用到这些权限，一个简单的办法就是修改 "),a("code",[e._v("harmony-configs/entry/src/main/module.json5")]),e._v(" 文件，\n删除 "),a("code",[e._v("module.requestPermissions")]),e._v(" 数组里面涉及这三项的内容，重新运行即可。\n"),a("strong",[e._v("注：从 HX 4.31+ 开始默认配置中已经不再包含 ACL 权限，如果需要的话请自行修改 "),a("code",[e._v("harmony-configs/entry/src/main/module.json5")]),e._v(" 文件添加权限声明。")])]),e._v(" "),a("p",[e._v("如果确实需要这里的某些权限，那就需要申请一个调试证书，并配置到 "),a("code",[e._v("harmony-configs/build-profile.json5")]),e._v(" 文件的 "),a("code",[e._v("app.signingConfigs")]),e._v(" 中。\n具体请参考 "),a("a",{attrs:{href:"#signing-debug"}},[e._v("调试用的数字签名证书")])]),e._v(" "),a("h3",{attrs:{id:"bundle-name-mismatch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bundle-name-mismatch"}},[e._v("#")]),e._v(" 报错 "),a("code",[e._v("配置的 bundleName 与签名证书不符")])]),e._v(" "),a("p",[e._v("如果配置了签名证书，打包之后会进行签名，但如果项目中配置的 "),a("code",[e._v("bundleName")]),e._v(" 与签名证书申请时所填报的 "),a("code",[e._v("bundleName")]),e._v(" 不符，就会报这个错。\n可以修改 "),a("code",[e._v("harmony-configs/AppScrope/app.json5")]),e._v(" 文件中 "),a("code",[e._v("app.bundleName")]),e._v(" 为签名证书申请时所填的应用包名，\n也可以根据配置的 "),a("code",[e._v("bundleName")]),e._v(" 重新申请证书。")]),e._v(" "),a("p",[a("strong",[e._v("注：从 HX 4.31+ 开始应该在项目的 manifest.json 文件的【鸿蒙 App 配置】中设置【包名】。")])]),e._v(" "),a("h3",{attrs:{id:"signature-verification-failed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#signature-verification-failed"}},[e._v("#")]),e._v(" 报错 "),a("code",[e._v("签名验证失败")])]),e._v(" "),a("p",[e._v("当运行到鸿蒙时，在把打包后的 "),a("code",[e._v(".hap")]),e._v(" 安装到设备上时，可能会遇到这个报错。\n一个常见的原因是当前使用的设备没有添加到签名用的 profile 文件中，要解决这个问题，\n首先要 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-device-0000001946142249?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("注册调试设备"),a("OutboundLink")],1),e._v("，\n然后 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/app/agc-help-add-debugprofile-0000001914423102?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("申请调试 Profile"),a("OutboundLink")],1),e._v("\n或修改已有的 profile 文件并重新下载。")]),e._v(" "),a("h3",{attrs:{id:"no-signature-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#no-signature-file"}},[e._v("#")]),e._v(" 报错 "),a("code",[e._v("没有签名无法安装")])]),e._v(" "),a("p",[e._v("当运行到鸿蒙时，如果选择真机为运行设备，则必须配置好数字签名证书，否则无法安装到真机上。\n具体的配置方法请参考 "),a("a",{attrs:{href:"#signing"}},[e._v("证书签名配置指南")])]),e._v(" "),a("h3",{attrs:{id:"sign-info-inconsistent"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sign-info-inconsistent"}},[e._v("#")]),e._v(" 报错 "),a("code",[e._v("签名不一致")])]),e._v(" "),a("p",[e._v("当运行到鸿蒙时，所使用的签名证书与鸿蒙设备中已安装的应用不一致，此时无法覆盖安装。请先手动删除已安装的应用。")]),e._v(" "),a("h3",{attrs:{id:"device-unauthorized"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#device-unauthorized"}},[e._v("#")]),e._v(" 报错 "),a("code",[e._v("运行设备未信任授权给调试设备")])]),e._v(" "),a("p",[e._v("当运行到鸿蒙真机时，需要在手机上信任授权给调试设备（当前运行 HBuilderX 的电脑），如果没有信任授权，则电脑无法安装应用到手机上，就会报这个错。")]),e._v(" "),a("p",[e._v("重新连接手机到电脑，在弹出提示框的时候选择信任并授权。必要时可以进入手机的【开发者选项】重新设置。")]),e._v(" "),a("h3",{attrs:{id:"install-timeout"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-timeout"}},[e._v("#")]),e._v(" 报错 "),a("code",[e._v("安装超时，设备没有响应")])]),e._v(" "),a("p",[e._v("有记录显示，在 Windows 系统下，运行到鸿蒙时如果选择模拟器作为运行设备，可能会出现超时的情况，原因尚不清楚，有可能与模拟器系统里存在以前安装的相同包名的应用有关，\n如遇这种情况，可以尝试手工在模拟器里面删除旧的应用然后重试。")]),e._v(" "),a("h3",{attrs:{id:"launcher-damaged"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#launcher-damaged"}},[e._v("#")]),e._v(" 报错 "),a("code",[e._v("检测到App真机运行插件出现破损")])]),e._v(" "),a("p",[e._v("由于未知原因导致【App 真机运行】插件出现破损，需要重新安装。\n请在 HX 主菜单中选择【工具>插件安装】，找到【App 真机运行】插件并点击卸载，然后在主菜单中选择【运行>运行到手机或模拟器>下载真机运行插件】重新安装。\n如果安装过【App 真机运行(uni-app x)】插件，需要先卸载掉，否则无法卸载【App 真机运行】插件。")]),e._v(" "),a("h3",{attrs:{id:"remove-harmony-project-failed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#remove-harmony-project-failed"}},[e._v("#")]),e._v(" 报错 "),a("code",[e._v("无法删除旧的鸿蒙工程目录")])]),e._v(" "),a("p",[e._v("为了能够重建完整的鸿蒙工程目录，HBuilderX 需要先删除旧的鸿蒙工程目录，但是由于某些原因（比如其中有文件被其它程序占用）导致删除失败。\n为确保正确执行后续的操作，请先设法手工删除该目录，然后再重新开始操作。")]),e._v(" "),a("h3",{attrs:{id:"bundlename-incorrect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bundlename-incorrect"}},[e._v("#")]),e._v(" 报错 "),a("code",[e._v("未正确配置鸿蒙应用的包名")])]),e._v(" "),a("p",[e._v("应该在 "),a("code",[e._v("manifest.json")]),e._v(" 的【鸿蒙配置】中设置正确的包名，具体要求请参考 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/app/agc-help-createharmonyapp-0000001945392297?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("配置应用包名"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"hbuilder-x-升级至-4-51-后报错-owns-a-higher-api-version-or-a-higher-sdkreleasetype-compared-to-current-compilation-process"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hbuilder-x-升级至-4-51-后报错-owns-a-higher-api-version-or-a-higher-sdkreleasetype-compared-to-current-compilation-process"}},[e._v("#")]),e._v(" HBuilder X 升级至 "),a("code",[e._v("4.51")]),e._v(" 后报错 "),a("code",[e._v("owns a higher api version or a higher sdkReleaseType compared to current compilation process.")])]),e._v(" "),a("p",[e._v("需要在工程级的 "),a("code",[e._v("build-profile.json5")]),e._v(" 的 "),a("code",[e._v("products")]),e._v(" 字段（如果有多项都要配置）中配置 "),a("code",[e._v('compatibleSdkVersionStage: "beta6"')]),e._v(" 后重新运行 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/ide-hvigor-build-profile-V5?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("鸿蒙文档"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"hmr-failed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hmr-failed"}},[e._v("#")]),e._v(" 报错 "),a("code",[e._v("没有连接到正在运行的应用，热更新失败，请尝试重新运行以建立连接")])]),e._v(" "),a("p",[e._v("在把 uni-app 项目运行到鸿蒙设备上以后，修改代码后会触发差量编译，然后会对鸿蒙设备中运行的应用执行热更新操作。在某些情况下有可能出现此种报错。")]),e._v(" "),a("p",[e._v("首先确认在鸿蒙设备里确实已经运行了应用，然后尝试在 HBuilderX 里面重新运行到鸿蒙看是否能解决问题。")]),e._v(" "),a("p",[e._v("在某些电脑环境下，存在一种偶发的情况也会导致出现此种报错，原因尚不完全清楚，重启 hdc server 可以解决问题。\nhdc 是安装 DevEco Studio 时自带的鸿蒙工具链中的一个重要工具，正常情况下它的安装位置在：")]),e._v(" "),a("ul",[a("li",[e._v("Windows 环境下为 "),a("code",[e._v("<DevEco Studio安装目录>\\sdk\\default\\openharmony\\toolchains\\hdc.exe")])]),e._v(" "),a("li",[e._v("Mac 环境下为 "),a("code",[e._v("<DevEco Studio安装目录>/Contents/sdk/default/openharmony/toolchains/hdc")])])]),e._v(" "),a("p",[e._v("在命令行中执行 "),a("code",[e._v("hdc kill -r")]),e._v(" 命令以重启 hdc server，然后在 HBuilderX 里面重新运行到鸿蒙即可。")]),e._v(" "),a("p",[e._v("如果上述命令仍未能解决问题，就需要自行查找 hdc server 进程并杀掉它。在 MacOS 系统下可以使用下面的命令：")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 先查找出 hdc server 的进程号")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("ps")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-ef")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("grep")]),e._v(" hdc\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 再杀掉指定的进程")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("kill")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-9")]),e._v(" 进程号\n")])])]),a("p",[e._v("在 Windows 系统下可以打开任务管理器找到 hdc 进程（一般显示名为 "),a("code",[e._v("POSIX WinThreads for Windows")]),e._v("）杀掉即可。")]),e._v(" "),a("h3",{attrs:{id:"widget"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#widget"}},[e._v("#")]),e._v(" 鸿蒙应用如何开发服务卡片 Widget？")]),e._v(" "),a("p",[e._v("在鸿蒙应用、鸿蒙元服务中可以开发卡片，放置到桌面上，展示特定的应用数据、提供快速启动应用的入口。目前，卡片开发有两种方式：")]),e._v(" "),a("ul",[a("li",[e._v("ArkTS UI 开发，需要使用 ArkTS 语法编写布局、支持自定义 Canvas，同时支持鸿蒙应用和元服务，属于原生开发，具体参考 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/arkts-ui-widget-working-principles?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("开发基于 ArkTS UI 的卡片"),a("OutboundLink")],1),e._v(" 文章。")]),e._v(" "),a("li",[e._v("JS UI 开发，不支持元服务，仅支持鸿蒙应用开发。提供了类似 HTML+CSS 的方案实现布局，相比 ArkTS UI 有一些能力限制。具体参考 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/js-ui-widget-development?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("开发基于 JS UI 的卡片"),a("OutboundLink")],1)])]),e._v(" "),a("p",[e._v("下面介绍如何开发基于 UI 的卡片，思路和原生开发一致，推荐在 DevEco 中完成卡片开发。")]),e._v(" "),a("ul",[a("li",[e._v("打开 entry/src/build-profile.json5 文件")]),e._v(" "),a("li",[e._v("选择 DevEco 的菜单 File - New - Service Widget - Dynamic Widget。如果没有找个选项，说明没有打开上面的文件")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/images/1f6ddb67-ef68-4d06-a9a4-5e75acd56180.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("选择 Hello World 模版")]),e._v(" "),a("li",[e._v("在打开的 Configure Your Service Widget 选择 JS。如果没有请注意是不是选择的动态模版，元服务不支持开发 JS 范式卡片")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/images/5016a987-a6a1-4630-bcb7-2c17f5130c66.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("此时变动的文件如下")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/images/ad4d4808-9fac-4f5d-bfa9-5616372a8e1f.png",alt:""}})]),e._v(" "),a("p",[e._v("此时，就有了默认的卡片，点击会打开默认应用入口。")]),e._v(" "),a("p",[e._v("更多 API 和数据共享参考 "),a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/harmonyos-guides/js-ui-widget-development?ha_source=Dcloud&ha_sourceId=89000448",target:"_blank",rel:"noopener noreferrer"}},[e._v("开发卡片事件"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"鸿蒙如何设置隐私协议弹窗"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#鸿蒙如何设置隐私协议弹窗"}},[e._v("#")]),e._v(" 鸿蒙如何设置隐私协议弹窗？")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://developer.huawei.com/consumer/cn/doc/architecture-guides/user_agreement_and_privacy_policy-0000002331953689",target:"_blank",rel:"noopener noreferrer"}},[e._v("鸿蒙平台文档要求"),a("OutboundLink")],1),e._v(" 用户首次打开应用，需要同意用户协议与隐私政策，才可进入应用。")]),e._v(" "),a("p",[e._v("也请开发者注意 “App不得因用户不同意提供非必要个人信息，而拒绝用户使用其基本功能服务” 这一条规则，根据自己实际情况，开放符合自己业务规范的基本服务。具体请参考 "),a("a",{attrs:{href:"/tutorial/app-disagreemode"}},[e._v("《未同意隐私政策模式运行》")])]),e._v(" "),a("p",[e._v("在具体技术实现时候，在应用首页引用相关自定义组件进行弹窗，并持久化用户的选择。目前隐私弹窗不需要额外的配置，在 UI 层自行实现即可。")]),e._v(" "),a("p",[e._v("其他平台鸿蒙用户可访问：")]),e._v(" "),a("ul",[a("li",[e._v("鸿蒙元服务用户，可参考 "),a("a",{attrs:{href:"/tutorial/mp-harmony/intro#permission"}},[e._v("元服务如何配置权限")])]),e._v(" "),a("li",[e._v("uni-app x 用户，可参考 组件"),a("a",{attrs:{href:"https://doc.dcloud.net.cn/uni-app-x/api/dialog-page",target:"_blank",rel:"noopener noreferrer"}},[e._v("dialogPage"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("其他平台用户，可参考 "),a("a",{attrs:{href:"/collocation/manifest-app#privacyregistermode"}},[e._v("App 完整 manifest.json")]),e._v(" 相关说明。")])]),e._v(" "),a("h3",{attrs:{id:"鸿蒙提审报应用使用了-harmonyos-beta-版本的-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#鸿蒙提审报应用使用了-harmonyos-beta-版本的-api"}},[e._v("#")]),e._v(" 鸿蒙提审报应用使用了 HarmonyOS beta 版本的 API")]),e._v(" "),a("p",[e._v("鸿蒙应用提审时候提示：")]),e._v(" "),a("p",[e._v("经检测发现，您的应用使用了HarmonyOS beta版本的API。\n修改建议：为提升消费者使用体验，请使用HarmonyOS release版本的API开发应用，申请上架。请参考版本说明集成release版本API")]),e._v(" "),a("p",[e._v("解决方案：重新下载 release 版本的 DevEco。代码不变，重新发行打包，之后上传提审即可。")])])}),[],!1,null,null,null);a.default=r.exports}}]);