(window.webpackJsonp=window.webpackJsonp||[]).push([[143],{529:function(t,a,s){"use strict";s.r(a);var n=s(1),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"app-vue-app-uvue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#app-vue-app-uvue"}},[t._v("#")]),t._v(" App.vue/App.uvue")]),t._v(" "),a("p",[a("code",[t._v("App.vue/uvue")]),t._v("是uni-app的主组件。uni-app js引擎版是app.vue。uni-app x是app.uvue。以下出现的"),a("code",[t._v("app.vue")]),t._v("一般泛指包含了"),a("code",[t._v("app.uvue")])]),t._v(" "),a("p",[t._v("所有页面都是在"),a("code",[t._v("App.vue")]),t._v("下进行切换的，是应用入口文件。但"),a("code",[t._v("App.vue")]),t._v("本身不是页面，这里不能编写视图元素，也就是没有"),a("code",[t._v("<template>")]),t._v("。")]),t._v(" "),a("p",[t._v("这个文件的作用包括：监听应用生命周期、配置全局样式、配置全局的存储globalData")]),t._v(" "),a("p",[t._v("应用生命周期仅可在"),a("code",[t._v("App.vue")]),t._v("中监听，在页面监听无效。")]),t._v(" "),a("h2",{attrs:{id:"applifecycle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#applifecycle"}},[t._v("#")]),t._v(" 应用生命周期")]),t._v(" "),a("p",[a("code",[t._v("uni-app")]),t._v(" 支持如下应用生命周期函数：")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("函数名")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("说明")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("平台兼容")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("onLaunch")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("当"),a("code",[t._v("uni-app")]),t._v(" 初始化完成时触发（全局只触发一次），参数为应用启动参数，同 "),a("a",{attrs:{href:"https://uniapp.dcloud.net.cn/api/getLaunchOptionsSync.html#getlaunchoptionssync",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni.getLaunchOptionsSync"),a("OutboundLink")],1),t._v(" 的返回值")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("onShow")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("当 "),a("code",[t._v("uni-app")]),t._v(" 启动，或从后台进入前台显示，参数为应用启动参数，同 "),a("a",{attrs:{href:"https://uniapp.dcloud.net.cn/api/getLaunchOptionsSync.html#getlaunchoptionssync",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni.getLaunchOptionsSync"),a("OutboundLink")],1),t._v(" 的返回值")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("onHide")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("当 "),a("code",[t._v("uni-app")]),t._v(" 从前台进入后台")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("onError")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("当 "),a("code",[t._v("uni-app")]),t._v(" 报错时触发")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("app-uvue 不支持")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("onUniNViewMessage")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("对 "),a("code",[t._v("nvue")]),t._v(" 页面发送的数据进行监听，可参考 "),a("a",{attrs:{href:"https://uniapp.dcloud.io/tutorial/nvue-api?id=communication",target:"_blank",rel:"noopener noreferrer"}},[t._v("nvue 向 vue 通讯"),a("OutboundLink")],1)]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("app-uvue 不支持")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("onUnhandledRejection")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("对未处理的 Promise 拒绝事件监听函数（2.8.1+ app-uvue 暂不支持）")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("app-uvue 不支持")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("onPageNotFound")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("页面不存在监听函数")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("app-uvue 不支持")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("onThemeChange")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("监听系统主题变化")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("app-uvue 不支持")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("onLastPageBackPress")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("最后一个页面按下Android back键，常用于自定义退出")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("app-uvue-android 3.9+")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("onExit")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("监听应用退出")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("app-uvue-android 3.9+")])])])]),t._v(" "),a("p",[a("strong",[t._v("示例代码")])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只能在App.vue里监听应用的生命周期")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onLaunch")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'App Launch'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\tconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'应用启动路径：'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onShow")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("options")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'App Show'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\tconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'应用启动路径：'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onHide")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\tconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'App Hide'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[a("strong",[t._v("注意")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("应用生命周期仅可在"),a("code",[t._v("App.vue")]),t._v("中监听，在其它页面监听无效")]),t._v("。")]),t._v(" "),a("li",[t._v("以组合式 API 使用时，在 Vue2 和 Vue3 中存在一定区别，请分别参考："),a("RouterLink",{attrs:{to:"/tutorial/vue-composition-api.html"}},[t._v("Vue2 组合式 API 使用文档")]),t._v(" 和 "),a("RouterLink",{attrs:{to:"/tutorial/vue3-composition-api.html"}},[t._v("Vue3 组合式 API 使用文档")]),t._v("。")],1),t._v(" "),a("li",[t._v("应用启动参数，可以在API "),a("code",[t._v("uni.getLaunchOptionsSync")]),t._v("获取，"),a("a",{attrs:{href:"https://uniapp.dcloud.net.cn/api/getLaunchOptionsSync.html#getlaunchoptionssync",target:"_blank",rel:"noopener noreferrer"}},[t._v("详见"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("onlaunch里进行页面跳转，如遇白屏报错，请参考"),a("a",{attrs:{href:"https://ask.dcloud.net.cn/article/35942",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://ask.dcloud.net.cn/article/35942"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("code",[t._v("App.vue")]),t._v(" 不能写模板")]),t._v(" "),a("li",[t._v("onPageNotFound 页面实际上已经打开了（比如通过分享卡片、小程序码）且发现页面不存在，才会触发，api 跳转不存在的页面不会触发（如 uni.navigateTo）")])]),t._v(" "),a("h2",{attrs:{id:"globaldata"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#globaldata"}},[t._v("#")]),t._v(" globalData")]),t._v(" "),a("p",[t._v("小程序有globalData，这是一种简单的全局变量机制。这套机制在uni-app里也可以使用，并且全端通用。")]),t._v(" "),a("p",[t._v("当然vue框架的全局变量，另有其他方式定义。")]),t._v(" "),a("p",[a("strong",[t._v("以下是 App.vue 中定义globalData的相关配置：")])]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token script"}},[a("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("  \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n        "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("globalData")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n            "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("text")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text'")]),t._v("  \n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  \n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("  \n")])])]),a("p",[t._v("js中操作globalData的方式如下：\n"),a("code",[t._v("getApp().globalData.text = 'test'")])]),t._v(" "),a("p",[t._v("在应用onLaunch时，getApp对象还未获取，暂时可以使用this.globalData获取globalData。")]),t._v(" "),a("p",[t._v("如果需要把globalData的数据绑定到页面上，可在页面的onShow页面生命周期里进行变量重赋值。")]),t._v(" "),a("p",[t._v("nvue的weex编译模式中使用globalData的话，由于weex生命周期不支持onShow，但熟悉5+的话，可利用监听webview的addEventListener show事件实现onShow效果，或者直接使用weex生命周期中的beforeCreate。但建议开发者使用uni-app编译模式，而不是weex编译模式。")]),t._v(" "),a("p",[t._v("globalData是简单的全局变量，如果使用状态管理，请使用"),a("code",[t._v("vuex")]),t._v("（main.js中定义）")]),t._v(" "),a("h2",{attrs:{id:"全局样式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#全局样式"}},[t._v("#")]),t._v(" 全局样式")]),t._v(" "),a("p",[t._v("在"),a("code",[t._v("App.vue")]),t._v("中，可以定义一些全局通用样式，例如需要加一个通用的背景色，首屏页面渲染的动画等都可以写在App.vue中。")]),t._v(" "),a("p",[t._v("注意如果工程下同时有vue和nvue文件，全局样式的所有css会应用于所有文件，而nvue支持的css有限，编译器会在控制台报警，提示某些css无法在nvue中支持。此时需要把nvue不支持的css写在单独的条件编译里。如：")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token style"}},[a("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* #ifndef APP-PLUS-NVUE */")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token atrule"}},[a("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./common/uni.css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* #endif*/")]),t._v("\n")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);