(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{465:function(t,e,l){"use strict";l.r(e);var a=l(1),v=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[e("strong",[t._v("SocketTask")]),t._v(" 由 "),e("a",{attrs:{href:"/api/request/websocket#connectsocket"}},[t._v("uni.connectSocket()")]),t._v(" 接口创建。")]),t._v(" "),e("p",[e("strong",[t._v("平台差异说明")])]),t._v(" "),e("p",[t._v("支付宝小程序、抖音小程序，没有明确的文档来具体说明这个对象，而是指向了 "),e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/WebSocket",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web Websocket"),e("OutboundLink")],1),t._v(" 对象。")]),t._v(" "),e("h2",{attrs:{id:"sockettask-onmessage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sockettask-onmessage"}},[t._v("#")]),t._v(" SocketTask.onMessage(CALLBACK)")]),t._v(" "),e("p",[t._v("监听 WebSocket 接受到服务器的消息事件")]),t._v(" "),e("p",[e("strong",[t._v("回调函数")])]),t._v(" "),e("p",[e("code",[t._v("Function")])]),t._v(" "),e("p",[t._v("WebSocket 接受到服务器的消息事件的回调函数")]),t._v(" "),e("p",[e("strong",[t._v("回调函数中的参数")])]),t._v(" "),e("p",[e("code",[t._v("Object")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("属性")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("data")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String/ArrayBuffer")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("服务器返回的消息")])])])]),t._v(" "),e("h2",{attrs:{id:"sockettask-send"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sockettask-send"}},[t._v("#")]),t._v(" SocketTask.send(OBJECT)")]),t._v(" "),e("p",[t._v("通过 WebSocket 连接发送数据")]),t._v(" "),e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("属性")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("是否必填")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("data")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String/ArrayBuffer")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("需要发送的内容")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("success")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用成功的回调函数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("fail")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用失败的回调函数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("complete")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用结束的回调函数（调用成功、失败都会执行）")])])])]),t._v(" "),e("h2",{attrs:{id:"sockettask-close"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sockettask-close"}},[t._v("#")]),t._v(" SocketTask.close(OBJECT)")]),t._v(" "),e("p",[t._v("关闭 WebSocket 连接")]),t._v(" "),e("p",[e("strong",[t._v("参数")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("属性")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("是否必填")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("code")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Number")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("1000（表示正常关闭连接）")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("一个数字值表示关闭连接的状态号，表示连接被关闭的原因。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("reason")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("一个可读的字符串，表示连接被关闭的原因。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("success")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用成功的回调函数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("fail")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用失败的回调函数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("complete")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}}),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用结束的回调函数（调用成功、失败都会执行）")])])])]),t._v(" "),e("h2",{attrs:{id:"sockettask-onopen"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sockettask-onopen"}},[t._v("#")]),t._v(" SocketTask.onOpen(CALLBACK)")]),t._v(" "),e("p",[t._v("监听 WebSocket 连接打开事件")]),t._v(" "),e("p",[e("strong",[t._v("回调函数")])]),t._v(" "),e("p",[e("code",[t._v("Function")])]),t._v(" "),e("p",[t._v("WebSocket 连接打开事件的回调函数")]),t._v(" "),e("p",[e("strong",[t._v("回调函数中的参数")])]),t._v(" "),e("p",[e("code",[t._v("Object")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("属性")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("data")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String/ArrayBuffer")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("服务器返回的消息")])])])]),t._v(" "),e("h2",{attrs:{id:"sockettask-onclose"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sockettask-onclose"}},[t._v("#")]),t._v(" SocketTask.onClose(CALLBACK)")]),t._v(" "),e("p",[t._v("监听 WebSocket 连接关闭事件")]),t._v(" "),e("p",[e("strong",[t._v("回调函数")])]),t._v(" "),e("p",[e("code",[t._v("Function")])]),t._v(" "),e("p",[t._v("WebSocket 连接关闭事件的回调函数")]),t._v(" "),e("p",[e("strong",[t._v("回调函数中的参数")])]),t._v(" "),e("p",[e("code",[t._v("Object")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("属性")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("平台兼容性")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("code")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("number")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("一个数字值表示关闭连接的状态号，表示连接被关闭的原因。")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("HBuilderX(3.7.12+)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("reason")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("一个可读的字符串，表示连接被关闭的原因。")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("HBuilderX(3.7.12+)")])])])]),t._v(" "),e("h2",{attrs:{id:"sockettask-onerror"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sockettask-onerror"}},[t._v("#")]),t._v(" SocketTask.onError(CALLBACK)")]),t._v(" "),e("p",[t._v("监听 WebSocket 错误事件")]),t._v(" "),e("p",[e("strong",[t._v("回调函数")])]),t._v(" "),e("p",[e("code",[t._v("Function")])]),t._v(" "),e("p",[t._v("WebSocket 错误事件的回调函数")]),t._v(" "),e("p",[e("strong",[t._v("回调函数中的参数")])]),t._v(" "),e("p",[e("code",[t._v("Object")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("属性")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("errMsg")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("错误信息")])])])])])}),[],!1,null,null,null);e.default=v.exports}}]);