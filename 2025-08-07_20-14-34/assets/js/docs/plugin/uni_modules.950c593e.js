(window.webpackJsonp=window.webpackJsonp||[]).push([[300],{685:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"uni-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uni-modules"}},[t._v("#")]),t._v(" uni_modules")]),t._v(" "),s("h2",{attrs:{id:"什么是-uni-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是-uni-modules"}},[t._v("#")]),t._v(" 什么是 uni_modules")]),t._v(" "),s("p",[t._v("主流的语言/平台，都有自己包管理方案，js有npm、yarn或pnpm、Android有仓储、iOS有cocoapods、鸿蒙有ohpm、dart有pub。。。")]),t._v(" "),s("p",[t._v("uni-app是大一统开发，包括客户端和uniCloud服务器。在客户端部分包括web、Android、iOS、各家小程序。")]),t._v(" "),s("p",[t._v("在uni-app中可以调用npm库，可以调用Android仓储里的aar，可以调用iOS的cocoapods里framework，以及鸿蒙的ohpm。")]),t._v(" "),s("p",[t._v("甚至uts语言本身也可以编译为js、kotlin、swift、ArkTS。")]),t._v(" "),s("p",[t._v("那么uni-app的开发者，需要一个大一统的包管理方案，那就是"),s("code",[t._v("uni_modules")]),t._v("。")]),t._v(" "),s("p",[s("code",[t._v("uni_modules")]),t._v("是uni-app的包管理方案（HBuilderX 3.1.0+支持），它是一个海纳百川型的设计，")]),t._v(" "),s("ul",[s("li",[t._v("不管是js/uts库、组件、页面、uniCloud云函数、公共模块等的封装，甚至是整个项目，都可以封装成一个"),s("code",[t._v("uni_modules")]),t._v("。（类似Android的aar）")]),t._v(" "),s("li",[t._v("不管是npm、Android仓储、iOS的cocoapods、鸿蒙的ohpm，都可以纳入"),s("code",[t._v("uni_modules")]),t._v("中。")])]),t._v(" "),s("p",[t._v("由于uni-app有自己的项目目录结构规范（uni-app"),s("RouterLink",{attrs:{to:"/tutorial/project.html"}},[t._v("详见")]),t._v("、uni-app x"),s("a",{attrs:{href:"https://doc.dcloud.net.cn/uni-app-x/project.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("详见"),s("OutboundLink")],1),t._v("），\n所以你可以简单理解，把一个项目的这些工程目录都挪到了一个uni_modules下，打包成了一个模块，这里面只要符合uni-app规范的文件都可以放。")],1),t._v(" "),s("p",[t._v("详细的uni_modules目录结构"),s("a",{attrs:{href:"#dir"}},[t._v("见下")])]),t._v(" "),s("h3",{attrs:{id:"uni-modules的优势"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uni-modules的优势"}},[t._v("#")]),t._v(" uni_modules的优势")]),t._v(" "),s("ol",[s("li",[t._v("uni_modules支持在"),s("a",{attrs:{href:"https://ext.dcloud.net.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("插件市场"),s("OutboundLink")],1),t._v("计费销售。由DCloud提供商业插件的代码加密和版权保护。")]),t._v(" "),s("li",[t._v("HBuilderX提供了对"),s("code",[t._v("uni_modules")]),t._v("的便捷管理，可以对一个"),s("code",[t._v("uni_modules")]),t._v("点右键（如果是项目型"),s("code",[t._v("uni_modules")]),t._v("，是对根目录的package.json点右键），直接上传"),s("code",[t._v("uni_modules")]),t._v("、更新"),s("code",[t._v("uni_modules")]),t._v("、安装依赖。版本更新时还会给出新旧代码的详细对比。")])]),t._v(" "),s("p",[t._v("与之前插件市场的普通插件相比，"),s("code",[t._v("uni_modules")]),t._v("有何优势？")]),t._v(" "),s("ol",[s("li",[t._v("支持在HBuilderX里直接发布、更新、删除。而无需在web界面操作。")]),t._v(" "),s("li",[t._v("支持依赖（在package.json中配置）")]),t._v(" "),s("li",[t._v("插件文件位置统一。以往下载一个插件，不知道给工程下多少个目录写入了多少个文件，这种困惑不再存在。删除插件时也可以一处统一删除")])]),t._v(" "),s("p",[t._v("有"),s("code",[t._v("node_modules")]),t._v("了，为何还发明一个"),s("code",[t._v("uni_modules")]),t._v("的轮子？")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("node_modules")]),t._v(" 不满足全平台包管理需求，无法容纳Android仓储、iOS的cocoapods、鸿蒙的ohpm。")]),t._v(" "),s("li",[s("code",[t._v("node_modules")]),t._v(" 不满足云端一体的需求。uniCloud的云函数、公共模块、schema和前端部分，无法在"),s("code",[t._v("node_modules")]),t._v("模式下有效融合。很多组件是云端一体组件，即有客户端又有服务器，需要按uni-app的目录规范放置。")]),t._v(" "),s("li",[s("code",[t._v("uni_modules")]),t._v(" 有付费和商业的插件，DCloud插件市场提供了版权保护。而"),s("code",[t._v("node_modules")]),t._v("不支持付费和版权保护。")]),t._v(" "),s("li",[s("code",[t._v("node_modules")]),t._v(" 层层嵌套"),s("code",[t._v("node_modules")]),t._v("，造成数量惊人的文件数目。"),s("code",[t._v("uni_modules")]),t._v("支持依赖但不支持module嵌套，鼓励开发者优化包体积。当然这算差异，并非"),s("code",[t._v("uni_modules")]),t._v("的优势")]),t._v(" "),s("li",[s("code",[t._v("uni_modules")]),t._v(" 在js支持的平台，也容纳了"),s("code",[t._v("node_modules")]),t._v("，没有排斥。")])]),t._v(" "),s("p",[t._v("除了发布插件，"),s("code",[t._v("uni_modules")]),t._v("同时也是一种大型工程的模块分割方案。比如一个旅游应用，可以把机票、酒店、火车票、自由行等模块分拆成不同的"),s("code",[t._v("uni_modules")]),t._v("，由不同的部门来开发。")]),t._v(" "),s("h2",{attrs:{id:"dir"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dir"}},[t._v("#")]),t._v(" 目录结构")]),t._v(" "),s("h3",{attrs:{id:"项目插件的uni-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#项目插件的uni-modules"}},[t._v("#")]),t._v(" 项目插件的uni_modules")]),t._v(" "),s("p",[s("code",[t._v("uni_modules")]),t._v("插件如果是项目类型的插件，只需要在项目的根目录下放一个符合"),s("code",[t._v("uni_modules")]),t._v("规范的package.json。")]),t._v(" "),s("p",[t._v("右键点击这个package.json，即可对这个项目插件进行更新、或发布到插件市场。")]),t._v(" "),s("p",[t._v("比如"),s("a",{attrs:{href:"https://ext.dcloud.net.cn/plugin?id=3268",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni-admin"),s("OutboundLink")],1),t._v("、"),s("a",{attrs:{href:"https://ext.dcloud.net.cn/plugin?id=5057",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni-starter"),s("OutboundLink")],1),t._v("，都可以通过这种方式更新。")]),t._v(" "),s("h3",{attrs:{id:"非项目插件的uni-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#非项目插件的uni-modules"}},[t._v("#")]),t._v(" 非项目插件的uni_modules")]),t._v(" "),s("p",[t._v("如果是非项目类型的插件，比如组件、js sdk、页面模板、云函数，则需要放置在项目的"),s("code",[t._v("uni_modules")]),t._v("目录下。")]),t._v(" "),s("p",[t._v("此时"),s("code",[t._v("uni_modules")]),t._v("目录下的目录结构和uni-app的项目结构是一致的，如下：")]),t._v(" "),s("pre",{pre:!0,attrs:{"data-lang":""}},[t._v("\t"),s("code",{pre:!0,attrs:{class:"lang-",style:"padding:0"}},[t._v("\nuni_modules                                项目根目录下\n└── [plugin_id] // 插件 ID\n    ├── uniCloud                           插件内的uniCloud内容会被虚拟合并到项目根目录的uniCloud中（注意：插件内的uniCloud目录，没有-aliyun,-tcb后缀）\n    ├── components                         符合vue组件规范的uni-app组件目录，支持easycom规范\n    ├── utssdk                             存放uts插件\n    ├── hybrid                             存放本地网页的目录，"),s("a",{pre:!0,attrs:{href:"/component/web-view"}},[t._v("详见")]),t._v("\n    ├── pages                              业务页面文件存放的目录 \n    ├── static                             存放应用引用静态资源（如图片、视频等）的目录，"),s("b",[t._v("注意：")]),t._v("静态资源只能存放于此\n    ├── wxcomponents                       存放小程序组件的目录，"),s("a",{pre:!0,attrs:{href:"/frame?id=%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%BB%84%E4%BB%B6%E6%94%AF%E6%8C%81"}},[t._v("详见")]),t._v("\n    ├── license.md                         插件使用协议说明\n    ├── package.json                       插件配置，必选(除此之外均`可选`)                          \n    ├── readme.md                          插件文档\n    ├── changelog.md                       插件更新日志\n    ├── menu.json                          如果是uniCloud admin插件，可以通过menu.json注册动态菜单，"),s("a",{pre:!0,attrs:{href:"/uniCloud/admin?id=admin-%e6%8f%92%e4%bb%b6%e5%bc%80%e5%8f%91"}},[t._v("详见 menu.json 配置")]),t._v("\n\t")]),t._v("\n")]),t._v(" "),s("p",[t._v("也就是"),s("code",[t._v("uni_modules")]),t._v("目录下相当于复制一遍uni-app的项目结构。")]),t._v(" "),s("p",[s("strong",[t._v("Tips")])]),t._v(" "),s("ul",[s("li",[t._v("插件目录不支持pages.json、App.vue/uvue、main.js/uts、manifest.json、uni.scss文件，如果需要插件使用者修改这些文件内容，请在插件文档(readme.md)中详细说明。")]),t._v(" "),s("li",[t._v("插件目录支持"),s("code",[t._v("pages_init.json")]),t._v("，可以方便注册页面到项目的pages.json中，"),s("a",{attrs:{href:"#pages-init"}},[t._v("见下")])]),t._v(" "),s("li",[t._v("在插件内部引用资源、跳转页面时，请尽量使用相对路径。")]),t._v(" "),s("li",[t._v("插件内components目录同样支持easycom规范，插件使用者可以直接在项目中使用插件内符合easycom规范的组件，当项目或插件内存在easycom组件冲突，编译时会给予提示，您可以通过修改组件目录及组件文件名称来解决冲突问题。")])]),t._v(" "),s("p",[t._v("在HBuilderX中，"),s("code",[t._v("uni_modules")]),t._v("下如果包含了uniCloud目录的内容，会被以引用的方式，显示到主项目根目录下的uniCloud中。此时文件前的图标左下角会显示一个快捷方式箭头。")]),t._v(" "),s("p",[t._v("如下图，项目中有一个"),s("code",[t._v("uni_modules")]),t._v("名为"),s("code",[t._v("uni-config-center")]),t._v("，它下面包含了名为"),s("code",[t._v("uni-config-center")]),t._v("的公共模块。所以在项目根目录的公共模块目录common下，也会多出一个"),s("code",[t._v("uni-config-center")]),t._v("。")]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/uni_modules.jpg",alt:""}})]),t._v(" "),s("p",[t._v("HBuilderX 中打开配有引用图标指示的文件，会打开原始地址。")]),t._v(" "),s("h4",{attrs:{id:"uts插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uts插件"}},[t._v("#")]),t._v(" uts插件")]),t._v(" "),s("p",[t._v("在uni_modules的utssdk目录，可以放置uts插件。")]),t._v(" "),s("p",[s("strong",[t._v("uts插件是非常重要的一种跨端插件")]),t._v("。它支持API插件和组件插件，可通过原生能力，封装后给uni-app(x)扩展API和组件。")]),t._v(" "),s("p",[t._v("在utssdk目录下，然后可以新建app-android、app-ios、app-harmony、web、mp-weixin等目录，每个目录下可以存放不同客户端平台的专用代码。")]),t._v(" "),s("p",[t._v("在app-android、app-ios、app-harmony目录，可以放置Android原生的aar、so库，iOS原生的framework，鸿蒙的har，也支持配置Android仓储、iOS的cocoapods、鸿蒙的ohpm。")]),t._v(" "),s("p",[t._v("在web和mp目录下，也支持放置npm库。")]),t._v(" "),s("p",[t._v("虽然utssdk目录下有这么多平台专用目录，但utssdk的根目录下可以放置一个"),s("code",[t._v("interface.uts")]),t._v("的声明。这个文件统一了不同平台的接口，把不同平台的原生能力，转换为统一的API或组件，给前端开发者使用。")]),t._v(" "),s("p",[t._v("这是非常重要的设计，这也是uni-app区别于其他跨平台工具的重要特色。")]),t._v(" "),s("p",[t._v("以获取电量的API为例，uni.getBatteryInfo()，在根目录的interface.uts中定义了api的对外暴露接口、定义统一的错误码，然后在各个客户端平台的目录中，实现电量获取这个API。")]),t._v(" "),s("p",[t._v("uni.getBatteryInfo的插件和源码详见："),s("a",{attrs:{href:"https://ext.dcloud.net.cn/plugin?id=9295",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://ext.dcloud.net.cn/plugin?id=9295"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("uts插件开发的详细指南见："),s("a",{attrs:{href:"https://doc.dcloud.net.cn/uni-app-x/plugin/uts-plugin.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://doc.dcloud.net.cn/uni-app-x/plugin/uts-plugin.html"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("em",[s("strong",[t._v("注意事项")])])]),t._v(" "),s("p",[t._v("使用 import 导入uts插件时，仅支持导入到插件根目录，不支持导入插件内部的文件。")]),t._v(" "),s("div",{staticClass:"language-ts extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ts"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 正确的写法")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" test "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/uni_modules/uts-osapi"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 错误的写法")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" test "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@/uni_modules/uts-osapi/index.uts"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"hbuilderx中使用-uni-modules-插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hbuilderx中使用-uni-modules-插件"}},[t._v("#")]),t._v(" HBuilderX中使用 uni_modules 插件")]),t._v(" "),s("h3",{attrs:{id:"下载uni-modules插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载uni-modules插件"}},[t._v("#")]),t._v(" 下载uni_modules插件")]),t._v(" "),s("ol",[s("li",[t._v("在"),s("a",{attrs:{href:"https://ext.dcloud.net.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("插件市场"),s("OutboundLink")],1),t._v("查找uni_modules插件")]),t._v(" "),s("li",[t._v("在插件详情页,右侧会标明该插件是否支持uni_modules，点击"),s("code",[t._v("使用 HBuilderX 导入插件")]),t._v(" "),s("img",{attrs:{src:"/images/import_uni_modules.png",alt:""}})]),t._v(" "),s("li",[t._v("选择要导入的uni-app项目\n"),s("img",{attrs:{src:"/images/import_uni_modules_dialog.png",alt:""}})])]),t._v(" "),s("p",[s("strong",[t._v("Tips")])]),t._v(" "),s("ul",[s("li",[t._v("uni_modules支持组件easycom，使用者可以直接使用插件内符合easycom规范的组件")]),t._v(" "),s("li",[t._v("其他资源，如图片，js等，在项目中可以直接按目录结构引入即可使用，如：")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@/uni_modules/xx-yy/js_sdk/test.js'")]),t._v("\n")])])]),s("ul",[s("li",[t._v("如果是加密插件，加密文件不支持单独对外导出，即：不能使用 import 语句直接导入插件内的某个加密文件（uts加密插件导入插件根目录即可）")]),t._v(" "),s("li",[t._v("uni-app项目下uts插件不支持导入非utssdk以外的uts文件")]),t._v(" "),s("li",[t._v("uts插件utssdk内的文件以及这些文件引入的非utssdk内的uts文件均不支持单独对外导出")]),t._v(" "),s("li",[t._v("如果要使用uni_modules中的页面，"),s("a",{attrs:{href:"#pages-init"}},[t._v("见下")])])]),t._v(" "),s("h3",{attrs:{id:"安装uni-modules插件依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装uni-modules插件依赖"}},[t._v("#")]),t._v(" 安装uni_modules插件依赖")]),t._v(" "),s("ol",[s("li",[t._v("导入插件时，HBuilderX会自动安装当前插件的所有三方依赖。")]),t._v(" "),s("li",[t._v("您还可以在插件目录右键手动执行"),s("code",[t._v("安装插件三方依赖")]),t._v(" "),s("img",{attrs:{src:"/images/deps_uni_modules.png",alt:""}})])]),t._v(" "),s("h3",{attrs:{id:"更新uni-modules插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新uni-modules插件"}},[t._v("#")]),t._v(" 更新uni_modules插件")]),t._v(" "),s("ol",[s("li",[t._v("可以通过插件目录右键"),s("code",[t._v("从插件市场更新")]),t._v("，来检查更新当前所使用的插件\n"),s("img",{attrs:{src:"/images/check_uni_modules.png",alt:""}})]),t._v(" "),s("li",[t._v("对比插件，确认更新内容\n"),s("img",{attrs:{src:"/images/compare_uni_modules.png",alt:""}})])]),t._v(" "),s("h3",{attrs:{id:"卸载uni-modules插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#卸载uni-modules插件"}},[t._v("#")]),t._v(" 卸载uni_modules插件")]),t._v(" "),s("p",[t._v("uni_modules插件目录是独立存在的，如果您不再需要该插件，可以直接删除该插件目录。")]),t._v(" "),s("p",[s("strong",[t._v("Tips")])]),t._v(" "),s("ul",[s("li",[t._v("导入uni_modules规范插件需要使用 3.1.0 以上版本的 HBuilderX")])]),t._v(" "),s("h2",{attrs:{id:"uni-modules的插件配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uni-modules的插件配置"}},[t._v("#")]),t._v(" uni_modules的插件配置")]),t._v(" "),s("p",[t._v("如果你是插件作者，需要了解uni_modules的配置。如果是使用者，可无需关心本章节。")]),t._v(" "),s("h3",{attrs:{id:"package-json"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#package-json"}},[t._v("#")]),t._v(" package.json")]),t._v(" "),s("p",[t._v("package.json在每个"),s("code",[t._v("uni_modules")]),t._v("插件中都必须存在，包含了插件的基本信息。以下是package.json的详细配置说明（注意：平台兼容性相关配置有变更，需区分HBuilderX版本）。\n其中有些配置仅发布到插件市场时需要，如果你做的uni_modules并不对外发布到插件市场，相关字段可忽略。")]),t._v(" "),s("h4",{attrs:{id:"new-platform"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#new-platform"}},[t._v("#")]),t._v(" 平台兼容性改版")]),t._v(" "),s("blockquote",[s("p",[t._v("为更好的区分uni_modules插件对各平台的支持，从"),s("code",[t._v("HBuilderX 4.71")]),t._v("起，平台兼容性针对"),s("code",[t._v("uni-app")]),t._v("及"),s("code",[t._v("uni-app x")]),t._v("两个维度做了拆分，对各平台的定义做了调整，并新增了"),s("code",[t._v("多语言")]),t._v("、"),s("code",[t._v("暗黑模式")]),t._v("、"),s("code",[t._v("宽屏模式")]),t._v("的定义，具体规范变更如下：")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ......")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"engines"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// HBuilderX/cli 最低兼容版本")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"HBuilderX"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^3.1.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni-app"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^4.1.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新增，支持的uni-app 版本")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni-app-x"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^4.2.0"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新增，支持的uni-app x版本")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dcloudext"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ......")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"darkmode"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新增，暗黑模式")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"i18n"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"√"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新增，多语言")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"widescreen"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"√"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新增，宽屏模式")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni_modules"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ......")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"platforms"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 平台兼容性废弃原y(Yes)、n(No)、u(Unknow)的规范，调整为: √ 表示支持；x 表示不支持；- 表示不确定；默认为 -")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cloud"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tcb"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"√"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"aliyun"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"√"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"alipay"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"x"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"client"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 前端平台兼容性下增加“uni-app”、“uni-app-x”两个节点，兼容性数据分别放在两个节点下")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni-app"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// uni-app")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调整，改为全小写")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"vue2"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"vue3"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"web"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新增，移除了之前的“H5-mobile”和“H5-pc”")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"safari"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"chrome"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"app"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调整，改为全小写")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调整，去掉app-前缀")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nvue"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调整，去掉app-前缀")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"android"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"minVersion"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"extVersion"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.1.0"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新增，支持此平台的插件版本")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ios"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"harmony"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mp"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 小程序：调整，键由中文改为英文，全小写")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"weixin"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"alipay"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"toutiao"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"baidu"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"kuaishou"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"jd"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"harmony"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"qq"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lark"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"quickapp"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 快应用：调整，键由中文改为英文，全小写")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"huawei"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"union"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni-app-x"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// uni-app x")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"web"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新增，移除了之前的“H5-mobile”和“H5-pc”")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"safari"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"chrome"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"app"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调整，改为全小写")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"android"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"minVersion"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"5.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"extVersion"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.1.0"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新增，支持此平台的插件版本")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ios"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"harmony"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"mp"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 小程序：调整，键由中文改为英文，全小写")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"weixin"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-"')]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("p",[t._v("HBuilderX 4.71+发布界面\n"),s("img",{attrs:{src:"/images/client-platform-v2.png",alt:""}})]),t._v(" "),s("p",[t._v("平台兼容性规范改版后，使用HBuilderX 4.71之前的版本发布到"),s("a",{attrs:{href:"https://ext.dcloud.net.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("DCloud插件市场"),s("OutboundLink")],1),t._v("时，插件市场会自动将平台兼容性转换为新版规范以做兼容。为了有更准确的平台兼容性设置，建议升级HBuilderX使用HBuilderX 4.71+来操作发布。")]),t._v(" "),s("p",[t._v("除了以上变更为，其余配置和HBuilderX 4.71之前版本一致，HBuilderX 4.71之前版本完整规范如下：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意，不能直接拷贝本段代码到编辑器中，package.json 目前不支持注释。本段代码加的注释只是用于解释代码。")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"作者ID-插件英文名称"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必填，插件ID，格式为：'作者ID-插件英文名称'，例如：'xx-yy'，其中作者ID和插件名称只能包含英文、数字，作者ID不能使用'DCloud'、'uni'等关键字")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"displayName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"插件显示名称"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必填，用于展示在插件市场的显示名称")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.0.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必填，插件版本")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"插件描述"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必填，插件描述")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"keywords"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必填，插件标签关键词，最多5个")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"repository"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github:user/repo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 仓库地址")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"engines"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// HBuilderX/cli 最低兼容版本")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"HBuilderX"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"^3.1.0"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dcloudext"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// DCloud插件市场配置")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"category"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"前端组件"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"通用组件"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可选（HBuilderX低于3.6.0时必填）， 插件市场分类")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"component-vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必填（HBuilderX 3.6.0 以上支持），插件市场分类标识，分类标识可以参考下边列出的表格")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sale"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 销售 （目前仅限uniCloud类插件）")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"regular"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 普通授权版价格，单位为元，如果为免费插件，设置普通授权版价格为 0 即可。")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"price"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.00"')]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sourcecode"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 源码授权版价格，单位为元")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"price"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.00"')]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"contact"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件作者 QQ，方便管理员审核时与作者快速沟通。")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"qq"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"declaration"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 隐私、权限及商业化声明")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ads"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  必填，本插件是否包含广告，如包含需详细说明广告表达方式、展示频率，请如实填写，如不包含，可填“无”")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"data"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 必填，本插件采集的数据、发送的服务器地址、以及数据用途说明，请如实填写，如不采集任何数据，可填写“插件不采集任何数据”，如果使用的三方SDK需要采集数据，可填写“插件使用的 XX SDK会采集数据，详情可参考：https://other-sdk.com/"')]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"permissions"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 必填，本插件需要申请的系统权限列表，请如实填写，如不需要任何权限，可填“无”")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"npmurl"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// npm 地址")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni_modules"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// uni_modules配置")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"init"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node scripts/init.js"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新增于 HBuilderX 3.6.7，初次安装此插件时执行，如果一次安装多个插件及依赖会在所有插件安装完毕执行")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 依赖的 uni_modules 插件ID列表，如 ["plugin-id-1", "plugin-id-2"] 表示当前插件依赖 plugin-id-1、plugin-id-2 两个插件')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"encrypt"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置云函数，公共模块，clientDB Action加密")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uniCloud/cloudfunctions/uni-admin/controller/permission.js"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意这里是真实的文件路径，uni_modules下的uniCloud不带-aliyun、-tcb后缀，但是项目根目录下的uniCloud是带有后缀的")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 平台兼容性当前规范仅针对HBuilderX 4.71以前的版本，从HBuilderX 4.71起规范有调整，详见下方“平台兼容性改版”相关说明")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"platforms"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 平台兼容性：y 表示 Yes，支持；n 表示 No，不支持；u 表示 Unknown，不确定；默认为 u")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cloud"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 云端平台兼容性")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"tcb"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"aliyun"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"y"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"client"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 前端平台兼容性")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"App"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"app-vue"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"app-nvue"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"n"')]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"H5-mobile"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Safari"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当需要指定最小版本才支持时，可以配置minVersion")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"minVersion"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"14.0.2"')]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Android Browser"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"微信浏览器(Android)"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"u"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"QQ浏览器(Android)"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"u"')]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"H5-pc"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Chrome"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"IE"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"u"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Edge"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"u"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Firefox"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"u"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Safari"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"u"')]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"小程序"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"微信"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"阿里"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"百度"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"抖音"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"y"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"QQ"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"y"')]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"快应用"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"华为"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"u"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"联盟"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"u"')]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"treeShaking"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//摇树配置")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"app"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"android"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Android平台需要摇树")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ios"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//iOS平台需要摇树")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"harmony"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//鸿蒙平台不需要摇树")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"web"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Web平台不需要摇树")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("HBuilderX 4.71之前版本发布界面\n"),s("img",{attrs:{src:"/images/client-platform.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("Tips")])]),t._v(" "),s("ul",[s("li",[t._v("上述配置基于npm "),s("a",{attrs:{href:"https://docs.npmjs.com/cli/v6/configuring-npm/package-json",target:"_blank",rel:"noopener noreferrer"}},[t._v("package.json"),s("OutboundLink")],1),t._v("规范扩展，故标准的package.json属性也同样支持，比如可以通过files来控制要上传的插件包内容")]),t._v(" "),s("li",[t._v("插件市场分类标识（对应：package.json->dcloudext->type）")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("一级分类")]),t._v(" "),s("th",[t._v("二级分类")]),t._v(" "),s("th",[t._v("type")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("前端组件")]),t._v(" "),s("td",[t._v("通用组件")]),t._v(" "),s("td",[t._v("component-vue")])]),t._v(" "),s("tr",[s("td",[t._v("前端组件")]),t._v(" "),s("td",[t._v("小程序组件")]),t._v(" "),s("td",[t._v("component-mp")])]),t._v(" "),s("tr",[s("td",[t._v("JS SDK")]),t._v(" "),s("td",[t._v("通用 SDK")]),t._v(" "),s("td",[t._v("sdk-js")])]),t._v(" "),s("tr",[s("td",[t._v("uts插件")]),t._v(" "),s("td",[t._v("API插件")]),t._v(" "),s("td",[t._v("uts")])]),t._v(" "),s("tr",[s("td",[t._v("uts插件")]),t._v(" "),s("td",[t._v("uni-app兼容模式组件")]),t._v(" "),s("td",[t._v("component-uts")])]),t._v(" "),s("tr",[s("td",[t._v("uts插件")]),t._v(" "),s("td",[t._v("标准模式组件")]),t._v(" "),s("td",[t._v("uts-vue-component")])]),t._v(" "),s("tr",[s("td",[t._v("uni-app前端模板")]),t._v(" "),s("td",[t._v("前端页面模板")]),t._v(" "),s("td",[t._v("uniapp-template-page")])]),t._v(" "),s("tr",[s("td",[t._v("uni-app前端模板")]),t._v(" "),s("td",[t._v("uni-app前端项目模板")]),t._v(" "),s("td",[t._v("uniapp-template-project")])]),t._v(" "),s("tr",[s("td",[t._v("uniCloud")]),t._v(" "),s("td",[t._v("云函数模板")]),t._v(" "),s("td",[t._v("unicloud-template-function")])]),t._v(" "),s("tr",[s("td",[t._v("uniCloud")]),t._v(" "),s("td",[t._v("云端一体页面模板")]),t._v(" "),s("td",[t._v("unicloud-template-page")])]),t._v(" "),s("tr",[s("td",[t._v("uniCloud")]),t._v(" "),s("td",[t._v("云端一体项目模板")]),t._v(" "),s("td",[t._v("unicloud-template-project")])]),t._v(" "),s("tr",[s("td",[t._v("uniCloud")]),t._v(" "),s("td",[t._v("Admin插件")]),t._v(" "),s("td",[t._v("unicloud-admin")])]),t._v(" "),s("tr",[s("td",[t._v("uniCloud")]),t._v(" "),s("td",[t._v("DB Schema及验证函数")]),t._v(" "),s("td",[t._v("unicloud-database")])])])]),t._v(" "),s("h4",{attrs:{id:"treeshaking"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#treeshaking"}},[t._v("#")]),t._v(" 摇树配置")]),t._v(" "),s("p",[t._v("配置模块是否需要摇树：")]),t._v(" "),s("ul",[s("li",[t._v("true 表示需要摇树，即项目的代码中使用了发布时才包含此模块")]),t._v(" "),s("li",[t._v("false 表示不需要摇树，即项目的代码中没有使用也会包含此模块")])]),t._v(" "),s("p",[t._v("默认值为true。")]),t._v(" "),s("p",[t._v("规范：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni_modules"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"treeShaking"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean | Record<string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("boolean|Record<string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("boolean>>\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("配置所有平台都不需要摇树：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni_modules"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"treeShaking"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("按平台分别配置是否需要摇树：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni_modules"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"treeShaking"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"app"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"android"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ios"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"harmony"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"web"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"uni-modules-config-json"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uni-modules-config-json"}},[t._v("#")]),t._v(" uni_modules.config.json")]),t._v(" "),s("p",[s("code",[t._v("uni_modules.config.json")]),t._v("在项目根目录，可以配置插件更新后的触发脚本（通常用于执行自定义的自动化任务），插件uniCloud支持的服务空间。以下是"),s("code",[t._v("uni_modules.config.json")]),t._v("的详细配置说明")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"postupdate"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node scripts/upgrade.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 更新插件后执行该脚本，可从process.env.UNI_MODULES_ID获取当前被更新的插件ID，如果存在多个，以,隔开")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"preupload"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node scripts/preupload.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 上传插件之前执行该脚本，可从process.env.UNI_MODULES_ID获取当前被更新的插件ID，如果存在多个，以,隔开")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"postupload"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node scripts/postupload.js"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 上传插件之后(无论上传成功还是失败)执行该脚本，可从process.env.UNI_MODULES_ID获取当前被更新的插件ID，如果存在多个，以,隔开")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni_modules"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni-id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插件ID")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uniCloud"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aliyun"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tcb"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当项目同时存在aliyun，tcb时可手动指定该插件所属的服务空间")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("Tips")])]),t._v(" "),s("ul",[s("li",[t._v("当项目内仅关联了一个服务空间，此时"),s("code",[t._v("uni_modules")]),t._v("插件内的uniCloud相关资源会自动归属至该服务空间，无需在uni_modules.config.json中配置uniCloud所属服务空间")]),t._v(" "),s("li",[t._v("当项目内关联了两个服务空间（阿里云和腾讯云同时存在）\n"),s("ul",[s("li",[t._v("若未在uni_modules.config.json中配置平台，则上传该插件uniCloud资源时，会提示上传至选择哪个服务空间")]),t._v(" "),s("li",[t._v("若已在uni_modules.config.json中配置平台，则上传时以配置为准，自动归属至指定的服务空间")])])])]),t._v(" "),s("h3",{attrs:{id:"npmignore"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#npmignore"}},[t._v("#")]),t._v(" npmignore")]),t._v(" "),s("p",[t._v("uni_modules插件发布到插件市场是通常需要忽略掉一些目录或文件，比如"),s("code",[t._v("unpackage")]),t._v("、"),s("code",[t._v(".hbuilderx")]),t._v("、"),s("code",[t._v("node_modules")]),t._v("等，这时可以通过npmignore文件来实现文件的忽略。")]),t._v(" "),s("p",[t._v("文件名："),s("strong",[t._v(".npmignore")]),t._v("，注意开头有个点。典型的npmignore文件内容如下：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(".hbuilderx\nunpackage\nnode_modules\npackage-lock.json\n")])])]),s("p",[s("strong",[t._v("注意")])]),t._v(" "),s("ul",[s("li",[t._v("项目根目录下的"),s("code",[t._v(".npmignore")]),t._v("对发布项目、插件模板生效。"),s("code",[t._v("uni_modules/插件Id/.npmignore")]),t._v("对发布插件生效")])]),t._v(" "),s("h3",{attrs:{id:"pages-init"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pages-init"}},[t._v("#")]),t._v(" pages_init页面注册")]),t._v(" "),s("blockquote",[s("p",[t._v("新增于HBuilderX 3.5.0+")])]),t._v(" "),s("p",[t._v("过去，插件作者提供页面类插件时，需要在文档中手动告知使用者在pages.json中注册哪些页面。如：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pages"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"path"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uni_modules/xx-yy/pages/demo/demo"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 按插件所在目录引入对应的页面")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("code",[t._v("pages_init.json")]),t._v("解决了这个烦恼。")]),t._v(" "),s("p",[t._v("当uni_modules插件根目录下存在"),s("code",[t._v("pages_init.json")]),t._v("文件，在插件导入工程时，会弹出一个合并页面路由的pages.json修改界面。插件使用者点击确认按钮即可完成插件页面向项目pages.json的注册。")]),t._v(" "),s("p",[t._v("示例插件："),s("a",{attrs:{href:"https://ext.dcloud.net.cn/plugin?id=4992",target:"_blank",rel:"noopener noreferrer"}},[t._v("问题反馈页面管理员端模板"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("示例代码如下：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pages"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"path"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uni_modules/uni-feedback-admin/pages/uni-feedback-admin/add"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"style"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"navigationBarTitleText"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"新增"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"path"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uni_modules/uni-feedback-admin/pages/uni-feedback-admin/edit"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"style"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"navigationBarTitleText"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"编辑"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"path"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uni_modules/uni-feedback-admin/pages/uni-feedback-admin/list"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"style"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"navigationBarTitleText"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"列表"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("完整的pages参数"),s("a",{attrs:{href:"https://uniapp.dcloud.io/collocation/pages.html#pages",target:"_blank",rel:"noopener noreferrer"}},[t._v("详情查看"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("HBuilderX中合并路由界面效果图：\n"),s("img",{attrs:{src:"/images/A8353295-395A-41A1-AF20-A012A2101079.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("注意")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("pages_init.json")]),t._v("文件最终不会导入到工程中。")]),t._v(" "),s("li",[s("code",[t._v("pages_init.json")]),t._v(" 暂不支持带注释(包括：条件编译)。")]),t._v(" "),s("li",[t._v("如果HBuilderX版本低于3.5，或插件作者并没有提供"),s("code",[t._v("pages_init.json")]),t._v("，那么仍然需要手动编辑pages.json注册页面。")])]),t._v(" "),s("h2",{attrs:{id:"开发-uni-modules-插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开发-uni-modules-插件"}},[t._v("#")]),t._v(" 开发 uni_modules 插件")]),t._v(" "),s("h3",{attrs:{id:"新建uni-modules目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#新建uni-modules目录"}},[t._v("#")]),t._v(" 新建uni_modules目录")]),t._v(" "),s("p",[t._v("在uni-app项目根目录下，创建uni_modules目录，在HBuilderX中可以项目右键菜单中点击"),s("code",[t._v("新建uni_modules目录")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/mkdir_uni_modules.png",alt:""}})]),t._v(" "),s("p",[s("strong",[t._v("Tips:")])]),t._v(" "),s("ul",[s("li",[t._v("如果是vue-cli项目，uni_modules目录，位于"),s("code",[t._v("src")]),t._v("下，即"),s("code",[t._v("src/uni_modules")])])]),t._v(" "),s("h3",{attrs:{id:"新建uni-modules插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#新建uni-modules插件"}},[t._v("#")]),t._v(" 新建uni_modules插件")]),t._v(" "),s("ol",[s("li",[t._v("在HBuilderX中uni_modules目录右键点击"),s("code",[t._v("新建uni_modules插件")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/create_uni_modules.png",alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("填写正确的插件ID，选择插件分类")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/create_uni_modules_dialog.png",alt:""}})]),t._v(" "),s("p",[t._v("插件ID命名规范：")]),t._v(" "),s("ul",[s("li",[t._v("格式为：'作者ID-插件英文名称'，示例：'xx-yy'，其中作者ID和插件英文名称只能包含英文、数字")]),t._v(" "),s("li",[t._v("作者ID由插件作者自定义，不能使用'DCloud'、'uni'等关键字，长度要求至少2位字符")]),t._v(" "),s("li",[t._v("插件名称需直观表达插件的作用，例如：tag、button等")])]),t._v(" "),s("p",[s("strong",[t._v("Tips")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("uni_modules")]),t._v("插件可以在package.json的"),s("code",[t._v("uni_modules->dependencies")]),t._v("节点配置三方依赖（依赖的插件也必须是"),s("code",[t._v("uni_modules")]),t._v("插件），如果是依赖了三方的npm插件，可以使用标准的dependencies节点配置。")])]),t._v(" "),s("p",[t._v("通过 uni_modules->dependencies 配置三方"),s("code",[t._v("uni_modules")]),t._v("插件依赖")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uni-badge"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"displayName"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uni-badge 数字角标"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.2.2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"数字角标（徽章）组件，在元素周围展示消息提醒，一般用于列表、九宫格、按钮等地方。"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni_modules"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uni-scss"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"发布到插件市场"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发布到插件市场"}},[t._v("#")]),t._v(" 发布到插件市场")]),t._v(" "),s("p",[t._v("当您的插件开发完毕，可以直接发布到"),s("a",{attrs:{href:"https://ext.dcloud.net.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("插件市场"),s("OutboundLink")],1),t._v("供其他人免费或付费使用，插件市场提供了变现、评价等机制，优秀的插件作者可以做到月入数万元。")]),t._v(" "),s("p",[t._v("发布流程：")]),t._v(" "),s("ol",[s("li",[t._v("在HBuilderX中插件目录右键点击"),s("code",[t._v("发布到插件市场")]),t._v(" "),s("img",{attrs:{src:"/images/upload_uni_modules.png",alt:""}})]),t._v(" "),s("li",[t._v("填写插件信息\n"),s("img",{attrs:{src:"/images/upload_uni_modules_dialog.png",alt:""}}),t._v(" "),s("strong",[t._v("Tips")])])]),t._v(" "),s("ul",[s("li",[t._v("如果需要发布为项目模板，请在项目根目录创建package.json，然后右键菜单发布到插件市场。")]),t._v(" "),s("li",[t._v("发布插件时，可以选择上传当前项目作为示例工程，完整的示例工程，可以方便用户快速上手。")])]),t._v(" "),s("h3",{attrs:{id:"修改插件基本信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改插件基本信息"}},[t._v("#")]),t._v(" 修改插件基本信息")]),t._v(" "),s("p",[t._v("当您的插件发布到插件市场后，如果需要调整插件市场上的一些基本信息，比如插件中文名称，描述，关键词，readme.md等，可以直接在插件目录右键"),s("code",[t._v("修改插件基本信息")])]),t._v(" "),s("ol",[s("li",[t._v("在HBuilderX中插件目录右键点击"),s("code",[t._v("修改插件基本信息")]),t._v(" "),s("img",{attrs:{src:"/images/update_uni_modules.png",alt:""}})]),t._v(" "),s("li",[t._v("修改插件基本信息\n"),s("img",{attrs:{src:"/images/update_uni_modules_dialog.png",alt:""}})])]),t._v(" "),s("h3",{attrs:{id:"发布新版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#发布新版本"}},[t._v("#")]),t._v(" 发布新版本")]),t._v(" "),s("p",[t._v("当您的插件增加了新的功能或修复了Bug，需要发布新版本时，操作与第一次发布一样，可以直接在插件目录右键"),s("code",[t._v("发布到插件市场")])]),t._v(" "),s("p",[s("strong",[t._v("Tips")])]),t._v(" "),s("ul",[s("li",[t._v("在发布窗口中填写的更新日志，会自动与根目录的changelog.md保持同步")])]),t._v(" "),s("h2",{attrs:{id:"已有插件迁移为-uni-modules-插件指南"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#已有插件迁移为-uni-modules-插件指南"}},[t._v("#")]),t._v(" 已有插件迁移为 uni_modules 插件指南")]),t._v(" "),s("ol",[s("li",[t._v("将插件内容迁移至您的uni-app示例项目根目录"),s("code",[t._v("uni_modules")]),t._v("下以插件ID命名的目录下，举例，若您已有的插件ID为"),s("code",[t._v("xx-yy")]),t._v("，则目录结构为："),s("code",[t._v("uni_modules/xx-yy")])]),t._v(" "),s("li",[t._v("运行自己的示例项目，验证插件迁移目录后，所有功能是否正常")])]),t._v(" "),s("ul",[s("li",[t._v("目录迁移，通常会遇到资源引用路径问题，尽可能将所有路径引用修改为相对路径")]),t._v(" "),s("li",[t._v("如果插件带有uniCloud的云函数或数据库，迁移时，注意，插件目录内的uniCloud不能带有厂商后缀，您可以在发布插件时，指定插件支持的云服务商")]),t._v(" "),s("li",[t._v("插件目录不支持pages.json、App.vue、main.js、manifest.json、uni.scss文件，如果需要插件使用者修改这些文件内容，请在插件文档(readme.md)中详细说明。")])]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("当迁移后的所有插件功能均正常时，您就可以向插件市场发布新的支持uni_modules的插件版本（插件市场会同时保留您最后一个非uni_modules插件版本）")])]),t._v(" "),s("ul",[s("li",[t._v("在插件根目录创建package.json，您可以先简单的仅填写一个插件ID即可，其他信息可以通过发布窗口填写（会自动同步回package.json）")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"您的插件ID"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[t._v("插件文档，迁移至插件根目录的readme.md中")]),t._v(" "),s("li",[t._v("右键package.json，点击"),s("code",[t._v("发布到插件市场")]),t._v("，选择分类，填写插件信息（尽可能与插件市场已有信息保持一致）")]),t._v(" "),s("li",[t._v("发布成功后，您可以在插件市场的插件详情页右侧，查看到您的插件已同时提供了"),s("code",[t._v("uni_modules")]),t._v("版本和非"),s("code",[t._v("uni_modules")]),t._v("版本（仅保留最后一个非"),s("code",[t._v("uni_modules")]),t._v("版本）")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/images/ext_uni_modules.png",alt:""}})])])}),[],!1,null,null,null);s.default=e.exports}}]);