(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{453:function(t,e,a){"use strict";a.r(e);var n=a(1),s=Object(n.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"login"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#login"}},[t._v("#")]),t._v(" uni.login(OBJECT)")]),t._v(" "),e("p",[t._v("登录")]),t._v(" "),e("p",[t._v("uni.login是一个客户端API，统一封装了各个平台的各种常见的登录方式，包括App手机号一键登陆、三方登录（微信、微博、QQ、Apple、google、facebook）、各家小程序内置登录。")]),t._v(" "),e("p",[t._v("除了前端API，DCloud还提供了"),e("a",{attrs:{href:"https://doc.dcloud.net.cn/uniCloud/uni-id/summary.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni-id"),e("OutboundLink")],1),t._v("，这是一个云端一体的、完整的、账户开源框架。不仅包括客户端API，还包括前端页面、服务器代码、管理后台等所有与登录账户有关的服务，包括短信验证码、密码加密存储、忘记密码、头像更新等所有常见账户相关功能。")]),t._v(" "),e("p",[e("strong",[t._v("平台差异说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("App")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("Web")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("微信小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("支付宝小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("百度小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("抖音小程序、飞书小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("QQ小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("快手小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("京东小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("元服务")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("小红书小程序")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")])])])]),t._v(" "),e("h3",{attrs:{id:"login-兼容性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#login-兼容性"}},[t._v("#")]),t._v(" login 兼容性")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("HarmonyOS")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("HBuilderX 4.31")])])])]),t._v(" "),e("p",[t._v("大多数登录方式，都需要申请开通相关服务，具体点击下面的文档查看。")]),t._v(" "),e("h3",{attrs:{id:"app平台支持的登录方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#app平台支持的登录方式"}},[t._v("#")]),t._v(" App平台支持的登录方式")]),t._v(" "),e("ul",[e("li",[e("RouterLink",{attrs:{to:"/univerify.html"}},[t._v("手机号一键登录（univerify）")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/tutorial/app-oauth-apple.html"}},[t._v("苹果登录（Sign in with Apple）")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/tutorial/app-oauth-weixin.html"}},[t._v("微信登录")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/tutorial/app-oauth-qq.html"}},[t._v("QQ登录")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/tutorial/app-oauth-weibo.html"}},[t._v("新浪微博登录")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/tutorial/app-oauth-google.html"}},[t._v("Google登录")])],1),t._v(" "),e("li",[e("RouterLink",{attrs:{to:"/tutorial/app-oauth-facebook.html"}},[t._v("Facebook登录")])],1)]),t._v(" "),e("h3",{attrs:{id:"小程序平台支持的登录方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#小程序平台支持的登录方式"}},[t._v("#")]),t._v(" 小程序平台支持的登录方式")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("微信小程序登录"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://docs.alipay.com/mini/introduce/authcode",target:"_blank",rel:"noopener noreferrer"}},[t._v("支付宝小程序登录"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://smartprogram.baidu.com/docs/develop/api/open_log/#%E6%8E%88%E6%9D%83%E6%B5%81%E7%A8%8B%E8%AF%B4%E6%98%8E/",target:"_blank",rel:"noopener noreferrer"}},[t._v("百度小程序登录"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://developer.open-douyin.com/docs/resource/zh-CN/mini-app/develop/api/open-interface/log-in/tt-login/",target:"_blank",rel:"noopener noreferrer"}},[t._v("抖音小程序登录"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://q.qq.com/wiki/develop/miniprogram/API/open_port/port_login.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("QQ小程序登录"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://mp.kuaishou.com/docs/develop/api-next/open/login/ks.login.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("快手小程序登录"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://mp-docs.jd.com/api/openInterface/login.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("京东小程序登录"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://miniapp.xiaohongshu.com/doc/DC473950",target:"_blank",rel:"noopener noreferrer"}},[t._v("小红书小程序登录"),e("OutboundLink")],1)])]),t._v(" "),e("h3",{attrs:{id:"web平台支持的登录方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#web平台支持的登录方式"}},[t._v("#")]),t._v(" web平台支持的登录方式")]),t._v(" "),e("p",[t._v("Web平台常见的登录包括用户名密码、短信验证码、pc端微信扫描、微信公众号登录。这些没有封装在 uni.login API中，但都封装在了uni-id中。请另行参考"),e("a",{attrs:{href:"https://doc.dcloud.net.cn/uniCloud/uni-id/summary.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni-id"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("如不使用uni-id，微信内嵌浏览器运行H5版时，可通过js sdk实现微信登录，需要引入一个单独的js，"),e("a",{attrs:{href:"https://ask.dcloud.net.cn/article/35380",target:"_blank",rel:"noopener noreferrer"}},[t._v("详见"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"object-参数说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#object-参数说明"}},[t._v("#")]),t._v(" OBJECT 参数说明")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数名")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("必填")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("平台差异说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("provider")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("登录服务提供商，通过 "),e("a",{attrs:{href:"/api/plugins/provider"}},[t._v("uni.getProvider")]),t._v(" 获取，如果不设置则弹出登录列表选择界面")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("scopes")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String/Array")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("见平台差异说明")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("授权类型，默认 auth_base。支持 auth_base（静默授权）/ auth_user（主动授权） / auth_zhima（芝麻信用）")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("支付宝小程序")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("timeout")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Number")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("超时时间，单位ms")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("微信小程序、百度小程序、京东小程序、小红书小程序")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("univerifyStyle")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Object")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("a",{attrs:{href:"/univerify"}},[t._v("一键登录")]),t._v("页面样式")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("App 3.0.0+、"),e("code",[t._v("HarmonyOS 不支持")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("onlyAuthorize")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Boolean")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("微信登录")]),t._v("仅请求授权认证")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("App 3.2.6+、"),e("code",[t._v("HarmonyOS 不支持")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("success")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用成功的回调")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("fail")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用失败的回调函数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("complete")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用结束的回调函数（调用成功、失败都会执行）")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})])])]),t._v(" "),e("p",[e("strong",[t._v("onlyAuthorize说明")])]),t._v(" "),e("p",[t._v("微信登录在未配置"),e("code",[t._v("onlyAuthorize")]),t._v("的情况下，调用"),e("code",[t._v("uni.login")]),t._v("接口用户登录凭证("),e("code",[t._v("code")]),t._v(")不返回，用以换取登录信息("),e("code",[t._v("authResult")]),t._v(")；需要在项目manifest.json中配置的"),e("code",[t._v("appsecret")]),t._v("，此参数云端打包后会保存在apk/ipa中，存在参数泄露的风险；HBuilderX3.4.18+ 不再提供此参数的可视化配置。对于安全性要求较低的开发者，可以通过manifest.json -> 源码视图 -> app-plus -> distribute -> sdkConfigs -> oauth -> weixin -> 添加appsecret 配置。")]),t._v(" "),e("p",[e("strong",[t._v("success 返回参数说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数名")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("平台差异说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("authResult")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("登录服务商提供的登录信息，服务商不同返回的结果不完全相同")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("微信登录配置"),e("code",[t._v("onlyAuthorize:true")]),t._v("则此项为空，App 3.2.6+")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("code")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("用户登录凭证。开发者需要在开发者服务器后台，使用 code 换取 openid 和 session_key 等信息")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("微信登录配置"),e("code",[t._v("onlyAuthorize:true")]),t._v("才会返回，App 3.2.6+、京东小程序")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("appleInfo")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[e("code",[t._v("苹果登录")]),t._v("返回的信息")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("App 3.4.3+")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("errMsg")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("描述信息")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})])])]),t._v(" "),e("p",[e("strong",[t._v("示例")])]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("uni"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("login")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("provider")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'weixin'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//使用微信登录")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("loginRes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("loginRes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("authResult"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"注意事项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),e("ul",[e("li",[t._v("百度小程序平台需要在button组件的@login事件后再调用 uni.login ，"),e("a",{attrs:{href:"https://smartprogram.baidu.com/docs/develop/function/login/",target:"_blank",rel:"noopener noreferrer"}},[t._v("详见"),e("OutboundLink")],1),t._v(",否则会返回“请登录”的错误信息，建议在@login事件中调用。")]),t._v(" "),e("li",[t._v("uni.login 已针对百度小程序"),e("a",{attrs:{href:"https://smartprogram.baidu.com/forum/topic/show/125547",target:"_blank",rel:"noopener noreferrer"}},[t._v("兼容性升级"),e("OutboundLink")],1),t._v("转为 getLoginCode 调用，但某些情况下，百度小程序发布时兼容性诊断依然提示swan.login非兼容性改造，"),e("a",{attrs:{href:"https://github.com/dcloudio/uni-app/issues/2443",target:"_blank",rel:"noopener noreferrer"}},[t._v("详见"),e("OutboundLink")],1),t._v("，可使用 "),e("a",{attrs:{href:"#getlogincode"}},[t._v("uni.getLoginCode")]),t._v(" 替代 uni.login 解决。")]),t._v(" "),e("li",[t._v("京东小程序IDE 暂时不支持此uni.login()，请用真机查看；IDE调用，只能返回模拟数据 code为200。")])]),t._v(" "),e("h2",{attrs:{id:"getlogincode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getlogincode"}},[t._v("#")]),t._v(" uni.getLoginCode(OBJECT)")]),t._v(" "),e("p",[t._v("获取宿主 App 登录凭证（Authorization Code）")]),t._v(" "),e("p",[e("strong",[t._v("平台差异说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("App")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("H5")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("微信小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("支付宝小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("百度小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("抖音小程序、飞书小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("QQ小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("快手小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("京东小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("元服务")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("小红书小程序")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")])])])]),t._v(" "),e("p",[e("strong",[t._v("OBJECT 参数说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数名")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("必填")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("timeout")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Number")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("超时时间（单位：ms）")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("success")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用成功的回调函数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("fail")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用失败的回调函数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("complete")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用结束的回调函数（调用成功、失败都会执行）")])])])]),t._v(" "),e("p",[e("strong",[t._v("success 返回参数说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数名")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("平台差异说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("code")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("用户登录凭证（有效期十分钟），开发者需要在开发者服务器后台调用 API ，使用 code 换取 session_key 等信息。用户登录凭证 code 只能使用一次。")])])])]),t._v(" "),e("h2",{attrs:{id:"uni-checksession"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uni-checksession"}},[t._v("#")]),t._v(" uni.checkSession")]),t._v(" "),e("p",[t._v("检查登录状态是否过期")]),t._v(" "),e("blockquote",[e("p",[t._v("1.6.0 新增")])]),t._v(" "),e("p",[e("strong",[t._v("平台差异说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("App")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("H5")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("微信小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("支付宝小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("百度小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("抖音小程序、飞书小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("QQ小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("快手小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("快手小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("京东小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("元服务")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("小红书小程序")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")])])])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("属性")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("必填")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("success")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用成功的回调函数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("fail")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用失败的回调函数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("complete")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用结束的回调函数（调用成功、失败都会执行）")])])])]),t._v(" "),e("h2",{attrs:{id:"getuserinfo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getuserinfo"}},[t._v("#")]),t._v(" uni.getUserInfo(OBJECT)")]),t._v(" "),e("blockquote",[e("p",[t._v("微信小程序端用户头像昵称获取规则已调整，参考 "),e("a",{attrs:{href:"https://developers.weixin.qq.com/community/develop/doc/000cacfa20ce88df04cb468bc52801",target:"_blank",rel:"noopener noreferrer"}},[t._v("用户信息接口调整说明"),e("OutboundLink")],1),t._v("、"),e("a",{attrs:{href:"https://developers.weixin.qq.com/community/develop/doc/00022c683e8a80b29bed2142b56c01",target:"_blank",rel:"noopener noreferrer"}},[t._v("小程序用户头像昵称获取规则调整公告"),e("OutboundLink")],1),t._v("\n支付宝小程序获取用户头像昵称规则已调整，将在 2024年09月15日正式生效。参考 "),e("a",{attrs:{href:"https://open.alipay.com/portal/forum/post/173201040",target:"_blank",rel:"noopener noreferrer"}},[t._v("关于小程序用户头像昵称获取规则调整公告"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("获取用户信息。")]),t._v(" "),e("p",[e("strong",[t._v("平台差异说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("App")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("H5")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("微信小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("支付宝小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("百度小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("抖音小程序、飞书小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("QQ小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("快手小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("京东小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("元服务")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("小红书小程序")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")])])])]),t._v(" "),e("h3",{attrs:{id:"getuserinfo-兼容性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getuserinfo-兼容性"}},[t._v("#")]),t._v(" getUserInfo 兼容性")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("HarmonyOS")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("HBuilderX 4.31")])])])]),t._v(" "),e("p",[e("strong",[t._v("注意：")])]),t._v(" "),e("ul",[e("li",[t._v("微信小程序端，在用户未授权过的情况下调用此接口，不会出现授权弹窗，会直接进入 fail 回调（详见"),e("a",{attrs:{href:"https://developers.weixin.qq.com/community/develop/doc/0000a26e1aca6012e896a517556c01",target:"_blank",rel:"noopener noreferrer"}},[t._v("《微信小程序公告》"),e("OutboundLink")],1),t._v("）。在用户已授权的情况下调用此接口，可成功获取用户信息。")]),t._v(" "),e("li",[t._v("京东小程序端，在用户未授权，调用该接口将直接报错。用户已经授权过，可使用该接口直接获取用户信息，不会弹二次授权框")]),t._v(" "),e("li",[t._v("抖音小程序此接口将逐步废弃，请切换使用"),e("a",{attrs:{href:"#getuserprofile"}},[t._v("uni.getUserProfile")]),t._v("。"),e("a",{attrs:{href:"https://developer.open-douyin.com/docs/resource/zh-CN/mini-app/develop/api/open-interface/user-information/tt-get-user-info",target:"_blank",rel:"noopener noreferrer"}},[t._v("详见"),e("OutboundLink")],1)])]),t._v(" "),e("p",[e("strong",[t._v("OBJECT 参数说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数名")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("必填")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("平台差异说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("provider")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("登录服务提供商，通过 uni.getProvider 获取")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("withCredentials")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Boolean")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("是否带上登录态信息。")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("微信小程序、抖音小程序、飞书小程序、快手小程序")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("lang")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指定返回用户信息的语言，默认为 en。更多值请参考下面的说明。")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("微信小程序")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("timeout")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Number")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("超时时间，单位 ms。")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("微信小程序")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("success")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用成功的回调")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("fail")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用失败的回调函数")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("complete")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用结束的回调函数（调用成功、失败都会执行）")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})])])]),t._v(" "),e("p",[e("strong",[t._v("lang 值说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("zh_CN")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("简体中文")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("zh_TW")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("繁体中文")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("en")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("英文")])])])]),t._v(" "),e("p",[e("strong",[t._v("注意：")]),t._v(" 在小程序 withCredentials 为 true 时或是在 App 调用 uni.getUserInfo，要求此前有调用过 uni.login 且登录态尚未过期。微信基础库2.10.4版本对用户信息相关接口进行了调整，使用 uni.getUserInfo 获取得到的 userInfo 为匿名数据，建议使用 uni.getUserProfile 获取用户信息。")]),t._v(" "),e("p",[e("strong",[t._v("success 返回参数说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("平台差异说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("userInfo")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("OBJECT")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("用户信息对象")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("rawData")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("不包括敏感信息的原始数据字符串，用于计算签名。")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("微信小程序、抖音小程序、飞书小程序、快手小程序、京东小程序")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("signature")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用 sha1( rawData + sessionkey ) 得到字符串，用于校验用户信息。")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("微信小程序、抖音小程序、飞书小程序、快手小程序、京东小程序")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("encryptedData")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("包括敏感数据在内的完整用户信息的加密数据，详细见加密数据解密算法。")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("微信小程序、抖音小程序、飞书小程序、快手小程序")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iv")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("加密算法的初始向量，详细见加密数据解密算法。")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("微信小程序、抖音小程序、飞书小程序、快手小程序")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("errMsg")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("描述信息")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})])])]),t._v(" "),e("p",[e("strong",[t._v("userInfo 参数说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("平台差异说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("nickName")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("用户昵称")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("openId")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("该服务商唯一用户标识")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("App")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("avatarUrl")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("用户头像")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("gender")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("用户性别：0-男，1-女，2-保密")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("京东小程序")])])])]),t._v(" "),e("p",[t._v("除了以上三个必有的信息外，不同服务供应商返回的其它信息会存在差异。")]),t._v(" "),e("h3",{attrs:{id:"app端登录的扩展说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#app端登录的扩展说明"}},[t._v("#")]),t._v(" App端登录的扩展说明")]),t._v(" "),e("p",[t._v("App端还支持更多登录相关API，如"),e("code",[t._v("logout")]),t._v("，"),e("a",{attrs:{href:"https://www.html5plus.org/doc/zh_cn/oauth.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("详见"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("App端登录相关的SDK需要在manifest中配置：")]),t._v(" "),e("ol",[e("li",[t._v("打开 manifest.json -> App模块权限配置，勾选 OAuth(登录鉴权)。")]),t._v(" "),e("li",[t._v("打开 manifest.json -> App SDK配置，查看到登录鉴权。在说明中有蓝色链接，其中包括向微信、QQ、微博等平台申请sdk的链接。")]),t._v(" "),e("li",[t._v("向微信、QQ、微博等平台申请到sdk的信息后，回填到manifest里。")]),t._v(" "),e("li",[t._v("这些配置需要打包生效，真机运行仍然是HBuilder基座的设置，可使用"),e("a",{attrs:{href:"http://ask.dcloud.net.cn/article/12723",target:"_blank",rel:"noopener noreferrer"}},[t._v("自定义基座包"),e("OutboundLink")],1),t._v("。离线打包请参考离线打包文档在原生工程中配置。")]),t._v(" "),e("li",[t._v("配置并打包后，通过"),e("code",[t._v("uni.getProvider")]),t._v("可以得到配置的结果列表，注意这里返回的是manifest配置的，与手机端是否安装微信、QQ、微博无关。")])]),t._v(" "),e("p",[t._v("如果手机端未安装QQ、微博，调用时会启动这些平台的wap页面登录，如果已安装相应客户端，会启动它们的客户端登录。")]),t._v(" "),e("p",[e("strong",[t._v("示例")])]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("uni"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("login")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("provider")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'weixin'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("loginRes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("loginRes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("authResult"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取用户信息")]),t._v("\n    uni"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUserInfo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("provider")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'weixin'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("success")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("infoRes")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'用户昵称为：'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" infoRes"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userInfo"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nickName"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("h3",{attrs:{id:"app-oauth"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#app-oauth"}},[t._v("#")]),t._v(" App端集成其他登录SDK如支付宝、淘宝登录的说明 ")]),t._v(" "),e("ol",[e("li",[t._v("在插件市场寻找插件")])]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://ext.dcloud.net.cn/search?q=%E6%94%AF%E4%BB%98%E5%AE%9D%E7%99%BB%E9%99%86",target:"_blank",rel:"noopener noreferrer"}},[t._v("支付宝登录"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://ext.dcloud.net.cn/search?q=%E7%99%BE%E5%B7%9D",target:"_blank",rel:"noopener noreferrer"}},[t._v("淘宝登录"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://ext.dcloud.net.cn/search?q=%E6%8A%96%E9%9F%B3%E7%99%BB%E5%BD%95",target:"_blank",rel:"noopener noreferrer"}},[t._v("抖音登录"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://ext.dcloud.net.cn/search?q=sharesdk",target:"_blank",rel:"noopener noreferrer"}},[t._v("sharesdk"),e("OutboundLink")],1)])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("内嵌web-view组件，使用web登录模式集成这些三方登录")]),t._v(" "),e("li",[t._v("开发原生插件集成三方sdk，"),e("a",{attrs:{href:"https://uniapp.dcloud.net.cn/plugin/uts-plugin.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("详见"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"getuserprofile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getuserprofile"}},[t._v("#")]),t._v(" uni.getUserProfile(OBJECT)")]),t._v(" "),e("blockquote",[e("p",[t._v("微信小程序端基础库2.27.1及以上版本，"),e("strong",[e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserProfile.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("wx.getUserProfile 接口"),e("OutboundLink")],1),t._v("被收回")]),t._v("，详见"),e("a",{attrs:{href:"https://developers.weixin.qq.com/community/develop/doc/00022c683e8a80b29bed2142b56c01",target:"_blank",rel:"noopener noreferrer"}},[t._v("《小程序用户头像昵称获取规则调整公告》"),e("OutboundLink")],1),t._v("。")])]),t._v(" "),e("p",[t._v("获取用户信息。每次请求都会弹出授权窗口，用户同意后返回 userInfo。")]),t._v(" "),e("p",[e("strong",[t._v("平台差异说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("App")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("H5")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("微信小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("支付宝小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("百度小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("抖音小程序、飞书小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("QQ小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("快手小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("京东小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("元服务")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("小红书小程序")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√（基础库2.10.4）")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√（基础库2.30.0）")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("√")])])])]),t._v(" "),e("p",[e("strong",[t._v("注意：")])]),t._v(" "),e("ul",[e("li",[t._v("如业务需获取用户头像昵称，可以使用"),e("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/userProfile.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("「头像昵称填写能力」"),e("OutboundLink")],1),t._v("（基础库 2.21.2 版本开始支持，覆盖iOS与安卓微信 8.0.16 以上版本）。")]),t._v(" "),e("li",[t._v("该API仅支持微信小程序端（基础库2.10.4-2.27.0版本），微信小程序调整了相关接口（详见"),e("a",{attrs:{href:"https://developers.weixin.qq.com/community/develop/doc/000cacfa20ce88df04cb468bc52801?highLine=getUserProfile%253Afail",target:"_blank",rel:"noopener noreferrer"}},[t._v("《小程序登录、用户信息相关接口调整说明》"),e("OutboundLink")],1),t._v('）。每次触发 uni.getUserProfile 均会弹出授权窗口，用户授权后可成功获取用户信息。该API暂不支持在事件中使用异步操作，否则会触发错误：{errMsg: "getUserProfile:fail can only be invoked by user TAP gesture."}')])]),t._v(" "),e("p",[t._v("抖音从基础库 2.30.0 开始支持本方法，低版本需做兼容处理。"),e("a",{attrs:{href:"https://developer.open-douyin.com/docs/resource/zh-CN/mini-app/develop/api/open-interface/user-information/tt-get-user-profile/",target:"_blank",rel:"noopener noreferrer"}},[t._v("详见"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("strong",[t._v("OBJECT 参数说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数名")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("必填")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("desc")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("是")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("声明获取用户个人信息后的用途，不超过30个字符")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("lang")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("指定返回用户信息的语言，默认为 en。更多值请参考下面的说明。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("success")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用成功的回调")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("fail")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用失败的回调函数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("complete")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用结束的回调函数（调用成功、失败都会执行）")])])])]),t._v(" "),e("p",[e("strong",[t._v("lang 值说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("zh_CN")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("简体中文")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("zh_TW")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("繁体中文")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("en")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("英文")])])])]),t._v(" "),e("p",[e("strong",[t._v("注意：")]),t._v(" 可以使用 "),e("code",[t._v("if(uni.getUserProfile)")]),t._v(" 判断uni.getUserProfile是否可用。")]),t._v(" "),e("p",[e("strong",[t._v("success 返回参数说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("userInfo")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("OBJECT")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("用户信息对象")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("rawData")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("不包括敏感信息的原始数据字符串，用于计算签名。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("signature")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("使用 sha1( rawData + sessionkey ) 得到字符串，用于校验用户信息。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("encryptedData")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("包括敏感数据在内的完整用户信息的加密数据，详细见加密数据解密算法。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("iv")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("加密算法的初始向量，详细见加密数据解密算法。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("cloudID")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("敏感数据对应的云 ID，开通云开发的小程序才会返回，可通过云调用直接获取开放数据，详细见云调用直接获取开放数据")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("errMsg")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("描述信息")])])])]),t._v(" "),e("p",[e("strong",[t._v("userInfo 参数说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("nickName")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("用户昵称")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("avatarUrl")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("用户头像")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("gender")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Number")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("用户性别")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("country")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("用户所在国家")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("province")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("用户所在省份")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("city")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("用户所在城市")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("language")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("显示 country，province，city 所用的语言")])])])]),t._v(" "),e("p",[e("strong",[t._v("gender 的合法值")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("0")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("未知")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("1")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("男性")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("2")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("女性")])])])]),t._v(" "),e("p",[e("strong",[t._v("language 的合法值")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("值")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("en")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("英文")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("zh_CN")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("简体中文")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("zh_TW")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("繁体中文")])])])]),t._v(" "),e("h2",{attrs:{id:"prelogin"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#prelogin"}},[t._v("#")]),t._v(" uni.preLogin(OBJECT)")]),t._v(" "),e("p",[t._v("预登录。用于App手机号一键登录。")]),t._v(" "),e("p",[e("strong",[t._v("平台差异说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("App")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("HarmonyOS Next")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("H5")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("微信小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("支付宝小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("百度小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("抖音小程序、飞书小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("QQ小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("快手小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("京东小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("元服务")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("小红书小程序")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("3.0.0+")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")])])])]),t._v(" "),e("p",[e("strong",[t._v("OBJECT 参数说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数名")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("必填")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("provider")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("登录服务提供商，通过 "),e("a",{attrs:{href:"/api/plugins/provider"}},[t._v("uni.getProvider")]),t._v(" 获取，目前仅支持"),e("a",{attrs:{href:"/univerify"}},[t._v("一键登录")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("success")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用成功的回调")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("fail")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用失败的回调函数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("complete")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用结束的回调函数（调用成功、失败都会执行）")])])])]),t._v(" "),e("h2",{attrs:{id:"closeauthview"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#closeauthview"}},[t._v("#")]),t._v(" uni.closeAuthView()")]),t._v(" "),e("p",[t._v("关闭"),e("a",{attrs:{href:"/univerify"}},[t._v("一键登录")]),t._v("页面。")]),t._v(" "),e("p",[t._v("按照中国移动、中国联通、中国电信等运营商的要求，一键登录必须有界面。可用此API关闭页面。")]),t._v(" "),e("p",[e("strong",[t._v("平台差异说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("App")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("HarmonyOS Next")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("H5")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("微信小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("支付宝小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("百度小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("抖音小程序、飞书小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("QQ小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("快手小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("京东小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("元服务")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("小红书小程序")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("3.0.0+")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")])])])]),t._v(" "),e("h2",{attrs:{id:"getcheckboxstate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getcheckboxstate"}},[t._v("#")]),t._v(" uni.getCheckBoxState(OBJECT)")]),t._v(" "),e("p",[t._v("获取"),e("a",{attrs:{href:"/univerify"}},[t._v("一键登录")]),t._v("条款勾选框状态。")]),t._v(" "),e("p",[e("strong",[t._v("平台差异说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("App")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("HarmonyOS Next")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("H5")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("微信小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("支付宝小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("百度小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("抖音小程序、飞书小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("QQ小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("快手小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("京东小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("元服务")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("小红书小程序")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("3.2.3+")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")])])])]),t._v(" "),e("p",[e("strong",[t._v("OBJECT 参数说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数名")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("必填")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("success")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用成功的回调")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("fail")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用失败的回调函数")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("complete")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("否")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("接口调用结束的回调函数（调用成功、失败都会执行）")])])])]),t._v(" "),e("p",[e("strong",[t._v("success 返回参数说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("参数")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("state")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Boolean")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("一键登录条款勾选框状态")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("errMsg")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("String")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("描述信息")])])])]),t._v(" "),e("h2",{attrs:{id:"getuniverifymanager"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#getuniverifymanager"}},[t._v("#")]),t._v(" uni.getUniverifyManager(OBJECT)")]),t._v(" "),e("p",[t._v("获取全局唯一的一键登录管理器 univerifyManager")]),t._v(" "),e("p",[e("strong",[t._v("平台差异说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("App")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("HarmonyOS Next")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("H5")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("微信小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("支付宝小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("百度小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("抖音小程序、飞书小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("QQ小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("快手小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("京东小程序")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("元服务")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("小红书小程序")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("√ (3.2.13+)")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("4.61")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x")])])])]),t._v(" "),e("p",[e("strong",[t._v("univerifyManager 方法说明")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"left"}},[t._v("方法名")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("类型")]),t._v(" "),e("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("login")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("一键登录")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("preLogin")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("一键登录预登录")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("close")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("关闭一键登陆页面")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("getCheckBoxState")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("获取一键登录条款勾选框状态")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("onButtonsClick")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("订阅一键登录自定义按钮点击事件；"),e("code",[t._v("HarmonyOS 不支持")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"left"}},[t._v("offButtonsClick")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("Function")]),t._v(" "),e("td",{staticStyle:{"text-align":"left"}},[t._v("取消订阅一键登录自定义按钮点击事件；"),e("code",[t._v("HarmonyOS 不支持")])])])])]),t._v(" "),e("p",[e("strong",[t._v("使用示例")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用时不需要传递 provider")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" univerifyManager "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" uni"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getUniverifyManager")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 预登录")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 参数和 uni.preLogin 相同")]),t._v("\nuniverifyManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("preLogin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 调用一键登录弹框")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 仅需传参 univerifyStyle 即可")]),t._v("\nuniverifyManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("login")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("univerifyStyle")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"fullScreen"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"buttons"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"iconWidth"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"45px"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"list"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"provider"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"apple"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"iconPath"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/static/apple.png"')]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"provider"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"weixin"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"iconPath"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/static/wechat.png"')]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("success")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'login success'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("callback")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取一键登录弹框协议勾选状态")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 参数和 uni.getCheckBoxState 相同")]),t._v("\n  univerifyManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCheckBoxState")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("success")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"getCheckBoxState res: "')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 关闭一键登录弹框")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 参数和 uni.closeAuthView 相同")]),t._v("\n        univerifyManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 订阅自定义按钮点击事件")]),t._v("\nuniverifyManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("onButtonsClick")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取消订阅自定义按钮点击事件")]),t._v("\nuniverifyManager"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("offButtonsClick")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("callback"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("h3",{attrs:{id:"harmonyos-univerify"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#harmonyos-univerify"}},[t._v("#")]),t._v(" HarmonyOS 使用 getUniverifyManager 注意事项 ")]),t._v(" "),e("ul",[e("li",[t._v("在使用 "),e("code",[t._v("getUniverifyManager().login")]),t._v(" 时，其中 "),e("code",[t._v("univerifyStyle 参数")]),t._v(" 只支持传递（支持情况和 "),e("a",{attrs:{href:"https://doc.dcloud.net.cn/uni-app-x/api/get-univerify-manager.html#login",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni-app x 一键登录 login 一致"),e("OutboundLink")],1),t._v("）:\n"),e("ul",[e("li",[e("code",[t._v("fullScreen")]),t._v(" 是否全屏显示一键登录弹框")]),t._v(" "),e("li",[e("code",[t._v("logoPath")]),t._v(" 一键登录弹框顶部 logo 图片路径")]),t._v(" "),e("li",[e("code",[t._v("loginBtnText")]),t._v(" 一键登录按钮文案")])])]),t._v(" "),e("li",[t._v("运行到鸿蒙手机调试，必须在 "),e("a",{attrs:{href:"https://uniapp.dcloud.net.cn/univerify.html#%E5%BC%80%E9%80%9A",target:"_blank",rel:"noopener noreferrer"}},[t._v("开通一键登录"),e("OutboundLink")],1),t._v(" 后，在 uniCloud "),e("code",[t._v("一键登录 -> 应用管理")]),t._v(" 添加应用，并将所添加应用的包名配置在 "),e("code",[t._v("manifest")]),t._v(" 中才可以调试运行，否则运行报错")]),t._v(" "),e("li",[t._v("需要在 "),e("code",[t._v("modules.json5")]),t._v(" 中配置以下权限："),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"requestPermissions"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//允许应用程序联网，用于访问网关和认证服务器")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ohos.permission.INTERNET"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取网络状态，判断是否数据、wifi等")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ohos.permission.GET_NETWORK_INFO"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//允许获取wifi信息")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ohos.permission.GET_WIFI_INFO"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//允许应用配置数据网络")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ohos.permission.SET_NETWORK_INFO"')]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//用于创建唯一的gyuid标识")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ohos.permission.APP_TRACKING_CONSENT"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"usedScene"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"abilities"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"EntryAbility"')]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"reason"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$string:gy_oaid_tracking"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此项需要在 `harmony-config/AppScope/resources/base/element/string.json` 中配置，[配置文档](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/resource-categories-and-access-V5#%E8%B5%84%E6%BA%90%E7%BB%84%E7%9B%AE%E5%BD%95?ha_source=Dcloud&ha_sourceId=89000448)")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])]),t._v(" "),e("li",[t._v("配置CHANNEL(非必选)，项目的module.json5文件中配置 GT_INSTALL_CHANNEL:"),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"metadata"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GT_INSTALL_CHANNEL"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CHANNEL"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 填写你想要的渠道名")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])])])])}),[],!1,null,null,null);e.default=s.exports}}]);