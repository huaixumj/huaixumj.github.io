(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{407:function(t,a,n){"use strict";n.r(a);var s=n(1),e=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"什么是-uni-ext-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是-uni-ext-api"}},[t._v("#")]),t._v(" 什么是 uni ext api")]),t._v(" "),a("blockquote",[a("p",[t._v("新增于HBuilderX 3.6.7")])]),t._v(" "),a("p",[t._v("uni ext api，是一种需要下载"),a("a",{attrs:{href:"https://uniapp.dcloud.net.cn/plugin/uni_modules.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni_modules"),a("OutboundLink")],1),t._v("插件才能使用的、uni.开头的js API。")]),t._v(" "),a("p",[t._v("它是uni对象的方法，但不预置在uni-app的runtime中，需要单独下载对应的"),a("code",[t._v("uni_modules")]),t._v("。")]),t._v(" "),a("p",[t._v("示例：")]),t._v(" "),a("p",[t._v("uni.getBatteryInfo，这个API就是一个"),a("code",[t._v("ext api")]),t._v("，需要下载插件才能使用。"),a("a",{attrs:{href:"https://uniapp.dcloud.net.cn/api/system/batteryInfo.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("详见"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("背景1，uni-app runtime越来越大")])]),t._v(" "),a("p",[t._v("uni对象的api，如uni.navigateTo，之前都是内置在uni-app的runtime中的，跟随uni-app/HBuilder的升级而变化。")]),t._v(" "),a("p",[t._v("随着各家小程序和uni-app的演进，uni-app的api越来越多，而很多api又不常用，这会增加uni-app的runtime体积，尤其是在web和app平台。")]),t._v(" "),a("p",[t._v("比如很多小程序都内置有"),a("code",[t._v("getBatteryInfo")]),t._v("获取电量的API，在uni-app中理应拉齐各端实现，但在uni-app的web和app上内置它并不合适。")]),t._v(" "),a("p",[t._v("所以推出了"),a("code",[t._v("uni ext api")]),t._v("，这些API以"),a("code",[t._v("uni_modules")]),t._v("的方式出现，从插件市场单独下载。但导入到工程后，仍使用"),a("code",[t._v("uni.getBatteryInfo")]),t._v("方式来调用。")]),t._v(" "),a("p",[t._v("为此，在这些"),a("code",[t._v("uni_modules")]),t._v("的"),a("code",[t._v("package.json")]),t._v("中提供了一种特殊的注册方式，允许插件向uni对象自动挂载api。（只有DCloud官方插件，以"),a("code",[t._v("uni-")]),t._v("开头的插件，才能使用此机制）")]),t._v(" "),a("ul",[a("li",[t._v("背景2，uts将重构uni-app的内部实现")])]),t._v(" "),a("p",[t._v("在过去，uni-app的web和小程序端，是github的独立项目，由DCloud的js团队维护。而uni-app的app端，是另2个独立项目，由DCloud的原生团队维护。\n每次新加一个api，需要各个团队在不同的工程里开发，尤其是app端，需要先在原生项目里开发，然后在前端项目里封装。还需要再另一个语法提示工程中编写代码提示。")]),t._v(" "),a("p",[t._v("有了uts后，uni-app的实现机制将被重构，大幅的简化。")]),t._v(" "),a("p",[t._v("每个api，都使用uts这门统一的语言来开发，不再使用不同的技术语言。作为一个独立的"),a("code",[t._v("uni_modules")]),t._v("，独立的工程，有独立的版本。")]),t._v(" "),a("p",[t._v("仍然以"),a("code",[t._v("uni.getBatteryInfo")]),t._v("电量为例，开发这个api，不再需要在庞大复杂的uni-app的若干个项目里编码，也不需要再关心功能间关联和耦合。")]),t._v(" "),a("p",[t._v("只需要在"),a("code",[t._v("uni-getBatteryInfo")]),t._v("这个"),a("code",[t._v("uni_modules")]),t._v("下开发，目录结构如下。")]),t._v(" "),a("p",[t._v("这个目录清晰的列出了这个插件要做的所有事情：在不同的目录下编写uts或js代码、在d.ts里写语法提示。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("├── uni_modules\n│   ├── uni-getbatteryinfo\n│   │   ├── changelog.md\n│   │   ├── index.d.ts // 类型声明，需要同时扩展 uni 声明当前注册的 API，将废弃，使用interface.uts代替\n│   │   ├── interface.uts  // 声明插件对外暴露的API及类型\n│   │   ├── package.json\n│   │   ├── readme.md\n│   │   └── utssdk // 在不同目录实现平台能力\n│   │       ├── app-android\n│   │       │   └── index.uts\n│   │       ├── app-ios\n│   │       │   └── index.uts\n│   │       ├── mp-weixin\n│   │       │   └── index.js\n│   │       └── web\n│   │           └── index.js\n")])])]),a("p",[t._v("这种模式，还给开发者带来若干好处，比如开放性和灵活性。")]),t._v(" "),a("ul",[a("li",[t._v("以往，uni-app内置api如果有bug，普通开发者很难看懂源码，很难参与完善。")])]),t._v(" "),a("p",[t._v("现在，在uts的支持下，普通前端也可以review这些api的实现，发现其中的问题和提出改进方案。")]),t._v(" "),a("ul",[a("li",[t._v("以往，这些uni api的bug被修复时，需要等待HBuilder发版，由于每次发版都需要发很多功能，可能bug1虽然已经修好，但bug2复测出问题，导致版本不能及时发布。")])]),t._v(" "),a("p",[t._v("现在，ext api的"),a("code",[t._v("uni_modules")]),t._v("脱离HBuilder独立升级，快速解决开发者的问题。并且开发者可以自己修本地工程中ext api的bug。让问题得以更快速的解决。")]),t._v(" "),a("ul",[a("li",[t._v("背景3，内置api复写")])]),t._v(" "),a("p",[t._v("很多uni的内置api，比如"),a("code",[t._v("uni.showWaiting")]),t._v("，实现的比较简单，在web端，常见的waiting都有更丰富的样式、使用更多的图片资源。")]),t._v(" "),a("p",[t._v("uni-app的runtime不适合内置很多waiting样式和资源，而使用三方插件，又需要按三方插件的写法调用，之前工程里写好的"),a("code",[t._v("uni.showWaiting")]),t._v("的代码不得不重改。")]),t._v(" "),a("p",[t._v("有了"),a("code",[t._v("ext api")]),t._v("，可以实现一个"),a("code",[t._v("uni-showwaiting")]),t._v("的"),a("code",[t._v("uni_modules")]),t._v("，在web端提供更丰富的效果，并且开源，可自由裁剪和增补。")]),t._v(" "),a("p",[t._v("导入这个"),a("code",[t._v("uni_modules")]),t._v("后，之前的"),a("code",[t._v("uni.showWaiting")]),t._v("的api的功能就被复写。")]),t._v(" "),a("p",[t._v("综上，背景1、2、3的问题，都将使用"),a("code",[t._v("uni ext api")]),t._v("来解决。uni-app很多新增的、不常用的api将采用"),a("code",[t._v("ext api")]),t._v("方式。")]),t._v(" "),a("p",[t._v("在uts的发展路线上，uni-app自身也将使用uts实现；使用uts将可以开发完整的uni-app。")]),t._v(" "),a("p",[t._v("目前所有的"),a("code",[t._v("ext api")]),t._v("，在未来的uts版的uni-app，其内置的uni对象的api中，均会得到复用。也就是说"),a("code",[t._v("ext api")]),t._v("将大幅推进下一代uni-app（纯uts版）的上线速度。")]),t._v(" "),a("p",[t._v("欢迎广大开发者参与到"),a("code",[t._v("uni ext api")]),t._v("的开源共建中来。")]),t._v(" "),a("h2",{attrs:{id:"注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),a("ol",[a("li",[t._v("由于开发api是以uni.开头的，所以无法像普通插件那样由开发者自己开发、自己发布。")])]),t._v(" "),a("p",[t._v("参与共建的开发者需要在DCloud官方插件的开源项目中提pr，由官方审核后再发布新版uni_modules。")]),t._v(" "),a("p",[t._v("也只有"),a("code",[t._v("uni-")]),t._v("开头的插件，才能在package.json中编写注册声明，挂载方法到uni对象上。")]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("code",[t._v("uni ext api")]),t._v("的版本将不再跟随HBuilder和uni-app cli的版本，它将是独立的版本。")])]),t._v(" "),a("p",[t._v("只有uni的内置api才跟随HBuilder升级。请记得内置api和"),a("code",[t._v("ext api")]),t._v("的区别。")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("code",[t._v("ext api")]),t._v("的实现不一定都是uts，但如果使用了uts，则将受uts自身的约束。如")])]),t._v(" "),a("ul",[a("li",[t._v("uts在iOS上真机运行必须打包自定义基座。后续官方会继续优化")]),t._v(" "),a("li",[t._v("uts在Android上涉及arr、jar、so库等三方sdk的时候，也需打包自定义基座才能真机运行。")]),t._v(" "),a("li",[t._v("wgt升级只对js、css生效，uts代码无法热更新。但这不意味着使用uts的项目就失去热更新能力，只是uts部分不能热更。js、vue、css、图片仍然可以打包成wgt热更。")])]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[a("code",[t._v("ext api")]),t._v("在入口文件"),a("code",[t._v("export")]),t._v("的API，必须在"),a("code",[t._v("package.json")]),t._v("中编写注册声明")])]),t._v(" "),a("h2",{attrs:{id:"如何开发uni-ext-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何开发uni-ext-api"}},[t._v("#")]),t._v(" 如何开发uni ext api")]),t._v(" "),a("h3",{attrs:{id:"创建一个符合规则的uni-modules插件-通常是utssdk类型-如uni-getbatteryinfo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建一个符合规则的uni-modules插件-通常是utssdk类型-如uni-getbatteryinfo"}},[t._v("#")]),t._v(" 创建一个符合规则的"),a("code",[t._v("uni_modules")]),t._v("插件（通常是"),a("code",[t._v("utssdk")]),t._v("类型），如"),a("code",[t._v("uni-getbatteryinfo")])]),t._v(" "),a("p",[a("strong",[t._v("注意：")]),t._v(" 插件ID格式为："),a("code",[t._v("uni-API名称全小写")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("├── uni_modules\n│   ├── uni-getbatteryinfo\n│   │   ├── changelog.md\n│   │   ├── interface.uts // 类型声明\n│   │   ├── package.json\n│   │   ├── readme.md\n│   │   └── utssdk // 在不同目录实现平台能力\n│   │       ├── app-android\n│   │       │   └── index.uts\n│   │       ├── app-ios\n│   │       │   └── index.uts\n│   │       ├── mp-weixin\n│   │       │   └── index.js\n│   │       └── web\n│   │           └── index.js\n")])])]),a("h3",{attrs:{id:"配置package-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置package-json"}},[t._v("#")]),t._v(" 配置"),a("code",[t._v("package.json")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni_modules"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni-ext-api"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// string | string[] | Record<string,string>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("默认导出")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni_modules"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni-ext-api"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"getBatteryInfo"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 等同于")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// import getBatteryInfo from "@/uni_modules/uni-getbatteryinfo";')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// uni.getBatteryInfo = getBatteryInfo")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("导出多个")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni_modules"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni-ext-api"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"getBatteryInfo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"isCharging"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 等同于")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// import { getBatteryInfo, isCharging } from "@/uni_modules/uni-getbatteryinfo";')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// uni.getBatteryInfo = getBatteryInfo")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// uni.isCharging = isCharging")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("导出别名")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni_modules"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni-ext-api"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"onUserCaptureScreen"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"onCaptureScreen"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"offUserCaptureScreen"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"offCaptureScreen"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 等同于")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// import { onCaptureScreen, offCaptureScreen } from "@/uni_modules/uni-getbatteryinfo";')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// uni.onUserCaptureScreen = onCaptureScreen")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// uni.offUserCaptureScreen = offCaptureScreen")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("指定支持的运行环境")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni_modules"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni-ext-api"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uni"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"request"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"request"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可选别名配置")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"app"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 表示在app平台，仅在iOS swift环境下生效")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"kotlin"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"swift"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("注意：")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("所有 uni ext api 均需要提供 utssdk/interface.uts 文件")])]),t._v(" "),a("li",[a("p",[t._v("所有对外暴露的方法，类型均需要在 interface.uts 中定义")])]),t._v(" "),a("li",[a("p",[t._v("在具体平台实现中，通过引用 interface.uts 中的定义的方法，类型来约束实现")])]),t._v(" "),a("li",[a("p",[t._v("声明对象字面量时，必须指定具体类型，如：const res:GetBatteryInfoSuccess = { level:10,.. }")])]),t._v(" "),a("li",[a("p",[t._v("命名规范：")]),t._v(" "),a("ul",[a("li",[t._v("API入参类型命名为"),a("code",[t._v("API名称首字母大写 + 'Options'")]),t._v("，")])]),t._v(" "),a("blockquote",[a("p",[t._v("如 uni.getBatteryInfo(options)，则 options 类型命名为："),a("code",[t._v("type GetBatteryInfoOptions = {}")])])]),t._v(" "),a("ul",[a("li",[t._v("异步API success,fail 回调结果类型命名为"),a("code",[t._v("API名称首字母大写 + 'Success'")]),t._v(" 和 "),a("code",[t._v("API名称首字母大写 + 'Fail'")])])]),t._v(" "),a("blockquote",[a("p",[t._v("如 uni.getBatteryInfo() 的 success,fail 回调结果类型为："),a("code",[t._v("type GetBatteryInfoSuccess = {}")]),t._v(" 和 "),a("code",[t._v("type GetBatteryInfoFail = {}")])])]),t._v(" "),a("ul",[a("li",[t._v("事件API 回调结果类型命名为"),a("code",[t._v("API名称首字母大写 + 'CallbackResult'")])])]),t._v(" "),a("blockquote",[a("p",[t._v("如 uni.onUserCaptureScreen 的 callback 回调结果类型为："),a("code",[t._v("type OnUserCaptureScreenCallbackResult = {}")])])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://gitcode.net/dcloud/uni-api/-/tree/dev/uni_modules/uni-getbatteryinfo",target:"_blank",rel:"noopener noreferrer"}},[t._v("示例(获取电量)参考"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[t._v("HBuilderX3.96及以下使用uni ext api后，云打包同时勾选android和iOS会导致打出来的包不能正确包含uni ext api插件，解决方案：升级至3.97+或android和iOS单独打包")])])]),t._v(" "),a("h2",{attrs:{id:"如何使用uni-ext-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何使用uni-ext-api"}},[t._v("#")]),t._v(" 如何使用uni ext api")]),t._v(" "),a("p",[t._v("在"),a("a",{attrs:{href:"https://ext.dcloud.net.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("插件市场"),a("OutboundLink")],1),t._v("查找"),a("code",[t._v("uni ext api")]),t._v("插件，导入"),a("code",[t._v("HBuilderX")]),t._v("中的项目即可直接使用。")]),t._v(" "),a("p",[t._v("如："),a("a",{attrs:{href:"https://ext.dcloud.net.cn/plugin?name=uni-getbatteryinfo",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni-getbatteryinfo"),a("OutboundLink")],1),t._v("，导入后，即可直接使用"),a("code",[t._v("uni.getBatteryInfo")])])])}),[],!1,null,null,null);a.default=e.exports}}]);