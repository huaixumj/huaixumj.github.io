(window.webpackJsonp=window.webpackJsonp||[]).push([[511],{895:function(t,n,e){"use strict";e.r(n);var s=e(1),i=Object(s.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("blockquote",[n("p",[t._v("HBuilderX 2.7.10+ 版本以上支持FCM")])]),t._v(" "),n("h2",{attrs:{id:"概述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),n("p",[t._v("在海外网络环境下，部分网络在连接"),n("code",[t._v("uni-push")]),t._v("技术支持供应商个推的推送服务时，可能出现不稳定的情况。此时，开发者可以接入 FCM 辅助通道，当在个推服务断线的情况下，通过谷歌的 FCM 推送通道下发消息，提升推送到达率。")]),t._v(" "),n("p",[n("strong",[t._v("使用FCM时手机端需安装Google移动服务（GMS），并且可以正常连接Google服务（国内网络需要翻墙）")])]),t._v(" "),n("p",[t._v("使用FCM必须先开通使用"),n("code",[t._v("uni-push")]),t._v("：")]),t._v(" "),n("ul",[n("li",[t._v("开通"),n("code",[t._v("uni-push")]),t._v("服务参考："),n("RouterLink",{attrs:{to:"/uni-push/open.html"}},[t._v("如何开通uni-push")])],1),t._v(" "),n("li",[t._v("App端使用"),n("code",[t._v("uni-push")]),t._v("参考：\n"),n("ul",[n("li",[n("RouterLink",{attrs:{to:"/unipush-v2.html"}},[t._v("uni-push 2.0")])],1),t._v(" "),n("li",[n("RouterLink",{attrs:{to:"/unipush-v1.html"}},[t._v("uni-push 1.0")])],1)])])]),t._v(" "),n("h2",{attrs:{id:"从谷歌后台申请key信息"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#从谷歌后台申请key信息"}},[t._v("#")]),t._v(" 从谷歌后台申请key信息")]),t._v(" "),n("p",[t._v("进入 "),n("a",{attrs:{href:"https://firebase.google.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Firebase官网"),n("OutboundLink")],1),t._v("创建项目，获取"),n("code",[t._v("google-services.json")]),t._v("文件及"),n("code",[t._v("Server key")]),t._v("。")]),t._v(" "),n("p",[t._v("登录google账号，如果没有账号请先注册\n"),n("img",{attrs:{src:"https://img.cdn.aliyun.dcloud.net.cn/client/ask/unipush/fcm/signin.png",alt:""}})]),t._v(" "),n("p",[t._v("登录后点击右上角的“Go to console”\n"),n("img",{attrs:{src:"https://img.cdn.aliyun.dcloud.net.cn/client/ask/unipush/fcm/gotoconsole.png",alt:""}})]),t._v(" "),n("p",[t._v("打开项目列表页面，点击“Add project”创建项目\n"),n("img",{attrs:{src:"https://img.cdn.aliyun.dcloud.net.cn/client/ask/unipush/fcm/addproject.png",alt:""}})]),t._v(" "),n("p",[t._v("输入项目名称（根据自己应用取名），点击“Continue”\n"),n("img",{attrs:{src:"https://img.cdn.aliyun.dcloud.net.cn/client/ask/unipush/fcm/createproject1.png",alt:""}})]),t._v(" "),n("p",[t._v("确认是否需要使用Google Analytics服务（根据自己需要开启或关闭），点击“Continue”\n"),n("img",{attrs:{src:"https://img.cdn.aliyun.dcloud.net.cn/client/ask/unipush/fcm/createproject2.png",alt:""}})]),t._v(" "),n("p",[t._v("确认后创建项目，点击“Continue”\n"),n("img",{attrs:{src:"https://img.cdn.aliyun.dcloud.net.cn/client/ask/unipush/fcm/createproject3.png",alt:""}})]),t._v(" "),n("p",[t._v("进入项目详情页面，点击“Android”图标添加Android应用\n"),n("img",{attrs:{src:"https://img.cdn.aliyun.dcloud.net.cn/client/ask/unipush/fcm/android.png",alt:""}})]),t._v(" "),n("p",[t._v("输入Android应用信息（包名、昵称、证书SHA-1），点击“Register App”\n"),n("img",{attrs:{src:"https://img.cdn.aliyun.dcloud.net.cn/client/ask/unipush/fcm/regapp.png",alt:""}})]),t._v(" "),n("p",[t._v("注册Android应用后下载配置文件“google-services.json”，"),n("strong",[t._v("保存google-services.json文件后面需要使用")]),t._v("\n点击“Next”继续\n"),n("img",{attrs:{src:"https://img.cdn.aliyun.dcloud.net.cn/client/ask/unipush/fcm/download.png",alt:""}})]),t._v(" "),n("p",[t._v("此步骤中的操作云端打包机已经处理，忽略提示信息，继续点击“Next”，进入下一步\n完成注册Android应用，点击“Continue to console”回到项目详情页面\n"),n("img",{attrs:{src:"https://img.cdn.aliyun.dcloud.net.cn/client/ask/unipush/fcm/continuetoconsole.png",alt:""}})]),t._v(" "),n("p",[t._v("点击“Project settings”，进入项目设置页面\n"),n("img",{attrs:{src:"https://img.cdn.aliyun.dcloud.net.cn/client/ask/unipush/fcm/settings.png",alt:""}})]),t._v(" "),n("p",[t._v("切换到“Cloud Messaging”项，获取“Server key”，"),n("strong",[t._v("保存Server key后面需要使用")])]),t._v(" "),n("p",[t._v("由于新版"),n("code",[t._v("Firebase Cloud Messaging API (V1)")]),t._v("不提供"),n("code",[t._v("Server key")]),t._v(", 所以需要手动开启旧版 "),n("code",[t._v("Cloud Messaging API")]),t._v(" 。\n"),n("img",{attrs:{src:"https://native-res.dcloud.net.cn/images/uniapp/push/firebase/firebase_android_setup_get_server_key.png",alt:""}})]),t._v(" "),n("p",[t._v("跳转到Api管理页面启动"),n("code",[t._v("Cloud Messaging API")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://native-res.dcloud.net.cn/images/uniapp/push/firebase/firebase_android_open_old_api.png",alt:""}})]),t._v(" "),n("p",[t._v("启动"),n("code",[t._v("Cloud Messaging API")]),t._v("后即可得到"),n("code",[t._v("Server key")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://native-res.dcloud.net.cn/images/uniapp/push/firebase/firebase_android_server_key.png",alt:""}})]),t._v(" "),n("h2",{attrs:{id:"uni-push后台配置fcm参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#uni-push后台配置fcm参数"}},[t._v("#")]),t._v(" "),n("code",[t._v("uni-push")]),t._v("后台配置FCM参数")]),t._v(" "),n("p",[t._v("参考文档 "),n("RouterLink",{attrs:{to:"/uni-push/open.html#other-config"}},[t._v("配置厂商推送参数")]),t._v(" 完成FCM参数配置。")],1),t._v(" "),n("p",[t._v("配置保存成功后在HBuilderX中重新提交云端打包，并在“App-云打包”界面选择"),n("code",[t._v("google play")]),t._v("渠道：\n"),n("img",{attrs:{src:"https://img.cdn.aliyun.dcloud.net.cn/client/ask/unipush/fcm/hx_package.png",alt:""}})]),t._v(" "),n("p",[t._v("如果你已经完成了"),n("code",[t._v("uni-push")]),t._v("的代码开发，只需完成上述配置和打包即可，不用修改代码。")]),t._v(" "),n("h2",{attrs:{id:"本地离线打包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#本地离线打包"}},[t._v("#")]),t._v(" 本地离线打包")]),t._v(" "),n("p",[t._v("Android平台离线sdk集成"),n("code",[t._v("uni-push")]),t._v("支持FCM可参考："),n("a",{attrs:{href:"https://nativesupport.dcloud.net.cn/AppDocs/usemodule/androidModuleConfig/push?id=%e8%b0%b7%e6%ad%8c%e6%8e%a8%e9%80%81",target:"_blank",rel:"noopener noreferrer"}},[t._v("Push(消息推送)"),n("OutboundLink")],1)]),t._v(" "),n("h2",{attrs:{id:"注意事项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),n("p",[n("strong",[t._v("FCM 离线消息仅支持GOOGLE 推送，暂不支持国内设备商的海外发行版本")])])])}),[],!1,null,null,null);n.default=i.exports}}]);