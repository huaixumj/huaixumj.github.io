(window.webpackJsonp=window.webpackJsonp||[]).push([[323],{709:function(e,t,i){"use strict";i.r(t);var a=i(1),r=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("blockquote",[t("p",[e._v("腾讯TBS x5内核仅支持Android平台；iOS只能使用自带的WKWebview/UIWebview")])]),e._v(" "),t("p",[e._v("以下说明中的“腾讯TBS x5内核“精简为“x5内核”。\n集成x5内核说明：")]),e._v(" "),t("ol",[t("li",[e._v("首先需要升级到HBuilderX2.5.3 版本或更高")]),e._v(" "),t("li",[e._v("按以下说明配置项目的manifest.json，然后提交云打包或使用"),t("a",{attrs:{href:"http://ask.dcloud.net.cn/article/35115",target:"_blank",rel:"noopener noreferrer"}},[e._v("自定义基座"),t("OutboundLink")],1),e._v("生效")])]),e._v(" "),t("p",[e._v("集成x5内核后哪些页面会由x5内核渲染？")]),e._v(" "),t("ol",[t("li",[e._v("所有plus.webview.create创建的webview")]),e._v(" "),t("li",[e._v("uni-app中所有vue页面")]),e._v(" "),t("li",[e._v("uni-app中的web-view组件")])]),e._v(" "),t("h3",{attrs:{id:"配置使用x5内核"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置使用x5内核"}},[e._v("#")]),e._v(" 配置使用X5内核")]),e._v(" "),t("p",[e._v("打开项目的manifest.json文件，在“App模块配置”中勾选“Android X5 Webview(腾讯TBS)”：\n"),t("img",{attrs:{src:"https://native-res.dcloud.net.cn/images/uniapp/android/x5-manifest.png",alt:""}})]),e._v(" "),t("p",[t("strong",[e._v("提示")])]),e._v(" "),t("blockquote",[t("p",[e._v("使用X5内核模块提交云端打包后才能生效，真机运行调试时请使用"),t("a",{attrs:{href:"http://ask.dcloud.net.cn/article/35115",target:"_blank",rel:"noopener noreferrer"}},[e._v("自定义基座"),t("OutboundLink")],1),t("br"),e._v(" "),t("a",{attrs:{href:"https://uniapp.dcloud.io/tutorial/app-android-abifilters",target:"_blank",rel:"noopener noreferrer"}},[e._v("CPU类型配置"),t("OutboundLink")],1),e._v("不支持“x86”，建议仅配置“armeabi-v7a” 否则可能无法正常使用X5内核"),t("br"),e._v("\nHBuilderX3.0.7+版本"),t("a",{attrs:{href:"https://uniapp.dcloud.io/tutorial/app-android-abifilters",target:"_blank",rel:"noopener noreferrer"}},[e._v("CPU类型配置"),t("OutboundLink")],1),e._v("开始支持“arm64-v8a”"),t("br"),e._v("\n本地离线打包请参考："),t("a",{attrs:{href:"https://nativesupport.dcloud.net.cn/AppDocs/usemodule/androidModuleConfig/x5",target:"_blank",rel:"noopener noreferrer"}},[e._v("X5 Webview 配置"),t("OutboundLink")],1),t("br"),e._v("\nuni小程序SDK请参考："),t("a",{attrs:{href:"https://nativesupport.dcloud.net.cn/UniMPDocs/UseModule/android/x5",target:"_blank",rel:"noopener noreferrer"}},[e._v("unimp小程序集成x5教程"),t("OutboundLink")],1)])]),e._v(" "),t("p",[t("a",{attrs:{id:"mattersNeedingAttention"}})]),e._v(" "),t("h3",{attrs:{id:"x5内核能解决什么问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#x5内核能解决什么问题"}},[e._v("#")]),e._v(" X5内核能解决什么问题：")]),e._v(" "),t("ol",[t("li",[e._v("x5适配了rom的自定义主题字体，与原生字体保持一致。不会出现一个界面部分字体为原生字体、部分字体为webview字体的问题。之前系统webview在部分手机上不能适配rom自定义主题的字体。（注意：部分设备可能需要重新系统或不支持自定义主题字体）")]),e._v(" "),t("li",[e._v("系统的webview有浏览器兼容问题，低端Android的webview有很多新语法都不支持。使用x5可以拉齐webview内核。对于5+App和wap2app，可以全部拉齐。对于uni-app，由于uni-app自带js引擎，在js和组件层面本身就不存在浏览器兼容问题，只有vue页面的css涉及浏览器兼容问题。如果你想使用比如sticky等新css语法，此时可通过x5拉齐。如果开发者比较注意，不使用太新的语法的话，其实此时x5在这方面没有用处")]),e._v(" "),t("li",[e._v("x5内核自带的video实现强于html的video，支持视频格式更多。（这个只能用于5+app和wap2app的html里的自带video，以及uni-app的web-view组件里的video。uni-app默认的video组件本身就是原生的，和x5无关）")]),e._v(" "),t("li",[e._v("远程web页面防劫持是x5内核的一大亮点")])]),e._v(" "),t("h3",{attrs:{id:"验证是否使用x5以及x5版本号的方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#验证是否使用x5以及x5版本号的方法"}},[e._v("#")]),e._v(" 验证是否使用x5以及x5版本号的方法")]),e._v(" "),t("ul",[t("li",[e._v("3.4.14+以上的HBuilderX，使用 "),t("a",{attrs:{href:"https://uniapp.dcloud.io/api/system/info.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("uni.getSystemInfo"),t("OutboundLink")],1),e._v(" ，看返回的 browserName 和 browserVersion")]),e._v(" "),t("li",[e._v("低版本HBuilderX 使用 "),t("code",[e._v("plus.navigator.getUserAgent()")])])]),e._v(" "),t("p",[e._v("x5内核的UserAgent如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Mozilla/5.0 (Linux; Android 11; PEXM00 Build/RKQ1.201217.002; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/77.0.3865.120 MQQBrowser/6.2 TBS/045738\n")])])]),t("p",[e._v("注意需打包后测试，至少需要自定义基座。")]),e._v(" "),t("h3",{attrs:{id:"x5内核的注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#x5内核的注意事项"}},[e._v("#")]),e._v(" X5内核的注意事项")]),e._v(" "),t("ol",[t("li",[e._v("由于x5使用动态热更新加载x5内核。在Google Play审核是不允许的，所以无法提交Google Play")]),e._v(" "),t("li",[e._v("x5不支持在PC模拟器上运行，一切真机为主")]),e._v(" "),t("li",[e._v("x5内核对webview嵌套支持的不友好。使用x5渲染的页面尽量不要使用webview嵌套（父子页面等）容易出现动画卡顿等现象")]),e._v(" "),t("li",[e._v("因x5加载内核机制问题，云打包APK第一次安装运行可能x5还没有下载，此时不是x5内核渲染页面，而是系统webview渲染页面。但x5下载完毕后，杀掉进程重新运行，就会使用x5内核渲染页面")]),e._v(" "),t("li",[e._v("并非所有手机都有x5内核，当手机端没有时x5内核时，App启动后会先下载内核，在x5加载成功前，调用webview仍然是系统webview")]),e._v(" "),t("li",[e._v("html5 嵌入iframe视频fixed定位会导致应用闪退")]),e._v(" "),t("li",[e._v("部分系统(华为)修改字体后不会重启系统。导致x5页面不能够立即更换字体库重新进行渲染。需要杀掉进程重新启动应用（back退出应用无效）才可以重置字体库进行页面渲染")]),e._v(" "),t("li",[e._v("APK本身已经集成了X5才能通过wgt升级。如果apk本身没集成X5则不可以通过WGT升级支持X5。需要改为APK升级！")]),e._v(" "),t("li",[e._v("可通过plus.navigator.getUserAgent判断UA中是否包含MQQBrowser关键字判断当前webview是否为X5渲染。 HX2.6.16+支持")]),e._v(" "),t("li",[e._v("x5内核渲染页面的滚动条。会随着页面内容的长短显示滚动滑块。可按住滚动滑块拖动实现快速滚动。与普通webview滚动条有差异")])]),e._v(" "),t("h3",{attrs:{id:"x5内核自更新"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#x5内核自更新"}},[e._v("#")]),e._v(" x5内核自更新")]),e._v(" "),t("p",[e._v("x5内核存在自更新机制。所以可能存在历史版本升级了x5内核导致的兼容性问题。集成的同学需要注意！")]),e._v(" "),t("h3",{attrs:{id:"适配问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#适配问题"}},[e._v("#")]),e._v(" 适配问题")]),e._v(" "),t("p",[e._v("目前已知 TBS45738版本更新后会导致 uniapp vue页面的input组件adjust-position=false失效！使用x5内核的同学请知晓尽快适配，可以改为nvue或不适用x5内核。")]),e._v(" "),t("h3",{attrs:{id:"汇总x5浏览器内核加载失败问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#汇总x5浏览器内核加载失败问题"}},[e._v("#")]),e._v(" 汇总x5浏览器内核加载失败问题")]),e._v(" "),t("ul",[t("li",[e._v("周五周六（18:00-21:00）服务器维护不支持下载")]),e._v(" "),t("li",[e._v("不支持X86设备")]),e._v(" "),t("li",[e._v("频繁下载x5浏览器内核的IP会被限流下载")]),e._v(" "),t("li",[e._v("非wifi环境需要配置"),t("code",[e._v("allowDownloadWithoutWiFi")]),e._v("为true开启下载")]),e._v(" "),t("li",[e._v("离线打包debug环境下，可会导致下载失败")])]),e._v(" "),t("h3",{attrs:{id:"非wifi情况下载x5浏览器内核"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#非wifi情况下载x5浏览器内核"}},[e._v("#")]),e._v(" 非WiFi情况下载X5浏览器内核")]),e._v(" "),t("p",[e._v("manifest.json 配置webView节点")]),e._v(" "),t("ul",[t("li",[e._v("5+app 放在plus节点")]),e._v(" "),t("li",[e._v("uni-app 放在app-plus节点")])]),e._v(" "),t("p",[t("strong",[e._v("示例：")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('app-plus {\n\t...\n\t...\n\t"webView": {// 3.5.0 + 仅Android支持\n\t    "x5": { // 此属性需要勾选 Android X5 Webview 模块，详细参见下面的说明\n\t        "timeOut": 3000, // 超时时间\n\t        "showTipsWithoutWifi": true, // 是否在非WiFi网络环境时，显示用户确认下载x5内核的弹窗。默认值false\n\t        "allowDownloadWithoutWiFi": false // 是否允许用户在非WiFi网络时进行x5内核的下载。默认值false（如果为true，就不会显示用户确认的弹窗。）\n\t    }\n\t}\n}\n\n')])])])])}),[],!1,null,null,null);t.default=r.exports}}]);