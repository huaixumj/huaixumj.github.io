(window.webpackJsonp=window.webpackJsonp||[]).push([[433],{819:function(e,t,a){"use strict";a.r(t);var n=a(1),s=Object(n.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"nvue介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nvue介绍"}},[e._v("#")]),e._v(" nvue介绍")]),e._v(" "),t("p",[t("code",[e._v("uni-app")]),e._v(" App 端内置了一个基于 weex 改进的原生渲染引擎，提供了原生渲染能力。")]),e._v(" "),t("p",[e._v("在 App 端，如果使用 vue 页面，则使用 webview 渲染；如果使用 nvue 页面(native vue 的缩写)，则使用原生渲染。一个 App 中可以同时使用两种页面，比如首页使用 nvue，二级页使用 vue 页面，hello uni-app 示例就是如此。")]),e._v(" "),t("p",[e._v("虽然 nvue 也可以多端编译，输出 H5 和小程序，但 nvue 的 css 写法受限，所以如果你不开发 App，那么不需要使用 nvue。")]),e._v(" "),t("p",[e._v("以往的 weex ，有个很大的问题是它只是一个高性能的渲染器，没有足够的 API 能力（比如各种 push sdk 集成、蓝牙等能力调用），使得开发时非常依赖原生工程师协作，开发者本来想节约成本，结果需要前端、iOS、Android 3 拨人开发，适得其反。 nvue 解决了这个问题，让前端工程师可以直接开发完整 App，并提供丰富的插件生态和云打包。这些组合方案，帮助开发者切实的提高效率、降低成本。")]),e._v(" "),t("p",[e._v("同时"),t("code",[e._v("uni-app")]),e._v("扩展了 weex 原生渲染引擎的很多排版能力，修复了很多 bug。比如")]),e._v(" "),t("ul",[t("li",[e._v("Android 端良好支持边框阴影，"),t("a",{attrs:{href:"/tutorial/nvue-css#android-box-shadow"}},[e._v("详情")])]),e._v(" "),t("li",[e._v("iOS 端支持高斯模糊，"),t("a",{attrs:{href:"https://ask.dcloud.net.cn/article/36617#view",target:"_blank"}},[e._v("详情")])]),e._v(" "),t("li",[e._v("可实现区域滚动长列表+左右拖动列表+吸顶的复杂排版效果")]),e._v(" "),t("li",[e._v("优化圆角边框绘制性能")]),e._v(" "),t("li",[e._v("扩展了更多的 css")])]),e._v(" "),t("h2",{attrs:{id:"适用场景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#适用场景"}},[e._v("#")]),e._v(" 适用场景")]),e._v(" "),t("p",[e._v("nvue 的组件和 API 写法与 vue 页面一致，其内置组件还比 vue 页面内置组件增加了更多，"),t("a",{attrs:{href:"https://uniapp.dcloud.io/component/list",target:"_blank",rel:"noopener noreferrer"}},[e._v("详见"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("p",[e._v("如果你熟悉 weex 或 react native 开发，那么 nvue 是你的更优选择，能切实提升你的开发效率，降低成本。")]),e._v(" "),t("p",[e._v("如果你是 web 前端，不熟悉原生排版，那么建议你仍然以使用 vue 页面为主，在 App 端某些 vue 页面表现不佳的场景下使用 nvue 作为强化补充。这些场景如下：")]),e._v(" "),t("ol",[t("li",[e._v("需要高性能的区域长列表或瀑布流滚动。webview 的页面级长列表滚动是没有性能问题的（就是滚动条覆盖 webview 整体高度），但页面中某个区域做长列表滚动，则需要使用 nvue 的"),t("code",[e._v("list")]),e._v("、"),t("code",[e._v("recycle-list")]),e._v("、"),t("code",[e._v("waterfall")]),e._v("等组件("),t("a",{attrs:{href:"https://uniapp.dcloud.io/component/list",target:"_blank",rel:"noopener noreferrer"}},[e._v("详见"),t("OutboundLink")],1),e._v(")。这些组件的性能要高于 vue 页面里的区域滚动组件"),t("code",[e._v("scroll-view")]),e._v("。")]),e._v(" "),t("li",[e._v("复杂高性能的自定义下拉刷新。uni-app 的 pages.json 里可以配置原生下拉刷新，但引擎内置的下拉刷新样式只有雪花和 circle 圈 2 种样式。如果你需要自己做复杂的下拉刷新，推荐使用 nvue 的 refresh 组件。当然"),t("a",{attrs:{href:"https://ext.dcloud.net.cn/search?q=%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0",target:"_blank",rel:"noopener noreferrer"}},[e._v("插件市场"),t("OutboundLink")],1),e._v("里也有很多 vue 下的自定义下拉刷新插件，只要是基于 renderjs 或 wxs 的，性能也可以商用，只是没有 nvue 的"),t("code",[e._v("refresh")]),e._v("组件更极致。")]),e._v(" "),t("li",[e._v("左右拖动的长列表。在 webview 里，通过"),t("code",[e._v("swiper")]),e._v("+"),t("code",[e._v("scroll-view")]),e._v("实现左右拖动的长列表，前端模拟下拉刷新，这套方案的性能不好。此时推荐使用 nvue，比如新建 uni-app 项目时的"),t("a",{attrs:{href:"https://ext.dcloud.net.cn/plugin?id=103",target:"_blank",rel:"noopener noreferrer"}},[e._v("新闻示例模板"),t("OutboundLink")],1),e._v("，就采用了 nvue，切换很流畅。")]),e._v(" "),t("li",[e._v("实现区域滚动长列表+左右拖动列表+吸顶的复杂排版效果，效果可参考 hello uni-app 模板里的"),t("code",[e._v("swiper-list")]),e._v("。"),t("a",{attrs:{href:"https://ext.dcloud.net.cn/plugin?id=2128",target:"_blank",rel:"noopener noreferrer"}},[e._v("详见"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("如需要将软键盘右下角按钮文字改为“发送”，则需要使用 nvue。比如聊天场景，除了软键盘右下角的按钮文字处理外，还涉及聊天记录区域长列表滚动，适合 nvue 来做。")]),e._v(" "),t("li",[e._v("解决前端控件无法覆盖原生控件的层级问题。当你使用"),t("code",[e._v("map")]),e._v("、"),t("code",[e._v("video")]),e._v("、"),t("code",[e._v("live-pusher")]),e._v("等原生组件时，会发现前端写的"),t("code",[e._v("view")]),e._v("等组件无法覆盖原生组件，层级问题处理比较麻烦，此时使用 nvue 更好。或者在 vue 页面上也可以覆盖一个 subnvue（一种非全屏的 nvue 页面覆盖在 webview 上），以解决 App 上的原生控件层级问题。"),t("a",{attrs:{href:"https://uniapp.dcloud.io/component/native-component",target:"_blank",rel:"noopener noreferrer"}},[e._v("详见"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("如深度使用"),t("code",[e._v("map")]),e._v("组件，建议使用 nvue。除了层级问题，App 端 nvue 文件的 map 功能更完善，和小程序拉齐度更高，多端一致性更好。")]),e._v(" "),t("li",[e._v("如深度使用"),t("code",[e._v("video")]),e._v("，建议使用 nvue。比如如下 2 个场景：video 内嵌到 swiper 中，以实现抖音式视频滑动切换，例子见"),t("a",{attrs:{href:"https://ext.dcloud.net.cn/search?q=%E4%BB%BF%E6%8A%96%E9%9F%B3",target:"_blank",rel:"noopener noreferrer"}},[e._v("插件市场"),t("OutboundLink")],1),e._v("；nvue 的视频全屏后，通过"),t("code",[e._v("cover-view")]),e._v("实现内容覆盖，比如增加文字标题、分享按钮。")]),e._v(" "),t("li",[e._v("直播推流：nvue 下有"),t("code",[e._v("live-pusher")]),e._v("组件，和小程序对齐，功能更完善，也没有层级问题。")]),e._v(" "),t("li",[e._v("对 App 启动速度要求极致化。App 端如果首页使用 nvue 且在 manifest 里配置 fast 模式，那么 App 的启动速度可以控制在 1 秒左右。而使用 vue 页面的话，App 的启动速度一般是 3 秒起，取决于你的代码性能和体积。")])]),e._v(" "),t("p",[e._v("但注意，在某些场景下，nvue 不如 vue 页面，如下：")]),e._v(" "),t("ol",[t("li",[t("code",[e._v("canvas")]),e._v("。nvue 的 canvas 性能不高，尤其是 Android App 平台，所以这个组件干脆没有内置，而是需要单独引入。操作 canvas 动画，最高性能的方式是使用 vue 页面的 renderjs 技术，在 hello uni-app 里的 canvas 示例就是如此。")]),e._v(" "),t("li",[e._v("动态横竖屏。nvue 页面的 css 不支持媒体查询，所以横竖屏动态切换、动态适配屏幕是很困难的。")])]),e._v(" "),t("h2",{attrs:{id:"纯原生渲染模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#纯原生渲染模式"}},[e._v("#")]),e._v(" 纯原生渲染模式")]),e._v(" "),t("p",[e._v("uni-app 在 App 端，支持 vue 页面和 nvue 页面混搭、互相跳转。也支持纯 nvue 原生渲染。")]),e._v(" "),t("p",[e._v("启用纯原生渲染模式，可以减少 App 端的包体积、减少使用时的内存占用。因为 webview 渲染模式的相关模块将被移除。")]),e._v(" "),t("p",[e._v("在 manifest.json 源码视图的"),t("code",[e._v('"app-plus"')]),e._v("下配置"),t("code",[e._v('"renderer":"native"')]),e._v("，即代表 App 端启用纯原生渲染模式。此时 pages.json 注册的 vue 页面将被忽略，vue 组件也将被原生渲染引擎来渲染。")]),e._v(" "),t("p",[e._v("如果不指定该值，默认是不启动纯原生渲染的。")]),e._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[e._v("\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// manifest.json")]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\t   "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// App平台特有配置")]),e._v("\n\t   "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"app-plus"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\t      "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"renderer"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"native"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//App端纯原生渲染模式")]),e._v("\n\t   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h2",{attrs:{id:"编译模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译模式"}},[e._v("#")]),e._v(" 编译模式")]),e._v(" "),t("p",[t("strong",[e._v("weex 编译模式和 uni-app 编译模式")])]),e._v(" "),t("p",[e._v("如你之前是 weex 开发者，可以继续查阅本章节，否则可以跳过看下一节"),t("a",{attrs:{href:"#%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B"}},[e._v("快速上手")]),e._v("。")]),e._v(" "),t("p",[e._v("weex 的组件和 JS API，与 uni-app 不同。uni-app 与微信小程序相同。")]),e._v(" "),t("p",[e._v("考虑到 weex 用户的迁移，uni-app 也支持 weex 的代码写法。在 manifest.json 中可以配置使用"),t("strong",[e._v("weex 编译模式")]),e._v("或"),t("strong",[e._v("uni-app 编译模式")]),e._v("。选择 weex 编译模式时将不支持 uni-app 的组件和 jsapi，需要开发者参考 weex 官方文档的写法来写代码。 比如 weex 编译模式用"),t("code",[e._v("<div>")]),e._v("。uni-app 编译模式则使用"),t("code",[e._v("<view>")]),e._v("。")]),e._v(" "),t("p",[e._v("一般情况建议使用"),t("code",[e._v("uni-app")]),e._v("模式，除非历史 weex 代码较多，需要逐步过渡。同时注意 weex 编译模式的切换是项目级的，不支持同项目下某个 nvue 页面使用 weex 模式，另一个 nvue 页面使用 uni-app 模式。")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th"),e._v(" "),t("th",[e._v("weex 编译模式")]),e._v(" "),t("th",[e._v("uni-app 编译模式")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("平台")]),e._v(" "),t("td",[e._v("仅 App")]),e._v(" "),t("td",[e._v("所有端，包含小程序和 H5")])]),e._v(" "),t("tr",[t("td",[e._v("组件")]),e._v(" "),t("td",[e._v("weex 组件如 div")]),e._v(" "),t("td",[e._v("uni-app 组件如 view")])]),e._v(" "),t("tr",[t("td",[e._v("生命周期")]),e._v(" "),t("td",[e._v("只支持 weex 生命周期")]),e._v(" "),t("td",[e._v("支持所有 uni-app 生命周期")])]),e._v(" "),t("tr",[t("td",[e._v("JS API")]),e._v(" "),t("td",[e._v("weex API、uni API、Plus API")]),e._v(" "),t("td",[e._v("weex API、uni API、Plus API")])]),e._v(" "),t("tr",[t("td",[e._v("单位")]),e._v(" "),t("td",[e._v("750px 是屏幕宽度，wx 是固定像素单位")]),e._v(" "),t("td",[e._v("750rpx 是屏幕宽度，px 是固定像素单位")])]),e._v(" "),t("tr",[t("td",[e._v("全局样式")]),e._v(" "),t("td",[e._v("手动引入")]),e._v(" "),t("td",[e._v("app.vue 的样式即为全局样式")])]),e._v(" "),t("tr",[t("td",[e._v("页面滚动")]),e._v(" "),t("td",[e._v("必须给页面套或组件")]),e._v(" "),t("td",[e._v("默认支持页面滚动")])])])]),e._v(" "),t("p",[e._v("在 manifest.json 中修改 2 种编译模式，"),t("code",[e._v("manifest.json")]),e._v(" -> "),t("code",[e._v("app-plus")]),e._v(" -> "),t("code",[e._v("nvueCompiler")]),e._v(" 切换编译模式。")]),e._v(" "),t("p",[t("code",[e._v("nvueCompiler")]),e._v(" 有两个值：")]),e._v(" "),t("ul",[t("li",[e._v("weex")]),e._v(" "),t("li",[e._v("uni-app")])]),e._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[e._v("\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// manifest.json")]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// App平台特有配置")]),e._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"app-plus"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"nvueCompiler"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"uni-app"')]),e._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("//是否启用 uni-app 模式")]),e._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("p",[e._v("在 "),t("code",[e._v("manifest.json")]),e._v(" 配置文件中，HBuilderX2.4 之前版本，默认值为 "),t("code",[e._v("weex")]),e._v(" 模式，HBuilderX2.4+版本默认值改为 "),t("code",[e._v("uni-app")]),e._v(" 模式。")]),e._v(" "),t("p",[e._v("weex 编译模式不支持 "),t("code",[e._v("onNavigationBarButtonTap")]),e._v(" 生命周期函数的写法。在 nvue 中监听原生标题栏按钮点击事件，详见："),t("a",{attrs:{href:"https://uniapp.dcloud.net.cn/tutorial/page#lifecycle",target:"_blank",rel:"noopener noreferrer"}},[e._v("uni.onNavigationBarButtonTap"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("p",[e._v("weex 编译模式不支持 onShow 生命周期，但熟悉 5+的话，可利用监听 webview 的"),t("code",[e._v("addEventListener")]),e._v(" show 事件实现 onShow 效果。")]),e._v(" "),t("p",[e._v("weex 编译模式不支持"),t("code",[e._v("vuex")]),e._v("。")]),e._v(" "),t("p",[e._v("nvue 的页面跳转，与 weex 不同，仍然遵循 uni-app 的路由模型。vue 页面和 nvue 页面之间不管怎么跳转，都遵循这个模型。包括 nvue 页面跳向 nvue 页面。每个页面都需要在 pages.json 中注册，调用 uni-app 的 "),t("a",{attrs:{href:"https://uniapp.dcloud.net.cn/api/router",target:"_blank",rel:"noopener noreferrer"}},[e._v("路由 API"),t("OutboundLink")],1),e._v(" 进行跳转。")]),e._v(" "),t("p",[e._v("原生开发没有页面滚动的概念，页面内容高过屏幕高度时，内容并不会自动滚动；只有将页面内容放在"),t("code",[e._v("list")]),e._v("、"),t("code",[e._v("waterfall")]),e._v("、"),t("code",[e._v("scroll-view/scroller")]),e._v("这几个组件下内容才可滚动。这不符合前端开发的习惯，所以在 nvue 编译为 "),t("code",[e._v("uni-app")]),e._v("模式时，"),t("code",[e._v("uni-app")]),e._v("框架会给 nvue 页面外层自动嵌套一个 "),t("code",[e._v("scroller")]),e._v("，从而实现页面内容的自动滚动。")]),e._v(" "),t("p",[e._v("注意：")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("uni-app")]),e._v("框架仅对 nvue 页面嵌套"),t("code",[e._v("scroller")]),e._v("容器，不会给组件自动套"),t("code",[e._v("scroller")]),e._v("容器；")]),e._v(" "),t("li",[e._v("若 nvue 页面有"),t("code",[e._v("recycle-list")]),e._v("组件时，"),t("code",[e._v("uni-app")]),e._v("框架也不会自动给页面嵌套"),t("code",[e._v("scroller")]),e._v("容器")]),e._v(" "),t("li",[e._v("若你不希望自动嵌套"),t("code",[e._v("scroller")]),e._v("容器，可在"),t("code",[e._v("pages.json")]),e._v("中通过如下配置进行关闭：")])]),e._v(" "),t("div",{staticClass:"language-javascript extra-class"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"path"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('""')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"style"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"disableScroll"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 不嵌套 scroller")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("p",[e._v("weex 编译模式下支持使用 weex ui ，例子"),t("a",{attrs:{href:"https://ext.dcloud.net.cn/plugin?id=442",target:"_blank",rel:"noopener noreferrer"}},[e._v("详见"),t("OutboundLink")],1),e._v("。但相比 uni-app 插件市场及官方"),t("a",{attrs:{href:"https://ext.dcloud.net.cn/plugin?id=55",target:"_blank",rel:"noopener noreferrer"}},[e._v("uni ui"),t("OutboundLink")],1),e._v("而言，weex 语法的组件生态还是比较欠缺的。")]),e._v(" "),t("p",[t("strong",[e._v("HBuilderX 3.1.0+ 开始支持新的样式编译模式")])]),e._v(" "),t("ul",[t("li",[e._v("weex 编译模式：老模式，样式支持与普通 weex 相同")]),e._v(" "),t("li",[e._v("uni-app 编译模式：新模式，在 weex 原有样式基础上支持组合选择器（相邻兄弟选择器、普通兄弟选择器、子选择器、后代选择器）"),t("a",{attrs:{href:"https://ask.dcloud.net.cn/article/38751",target:"_blank",rel:"noopener noreferrer"}},[e._v("详见"),t("OutboundLink")],1)])]),e._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[e._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// manifest.json")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// App平台特有配置")]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"app-plus"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n          "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"nvueStyleCompiler"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"uni-app"')]),e._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h2",{attrs:{id:"快速上手"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#快速上手"}},[e._v("#")]),e._v(" 快速上手")]),e._v(" "),t("h3",{attrs:{id:"_1-新建-nvue-页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-新建-nvue-页面"}},[e._v("#")]),e._v(" 1.新建 nvue 页面")]),e._v(" "),t("p",[e._v("在 HBuilderX 的 "),t("code",[e._v("uni-app")]),e._v(" 项目中，新建页面，弹出界面右上角可以选择是建立"),t("code",[e._v("vue")]),e._v("页面还是"),t("code",[e._v("nvue")]),e._v("页面，或者 2 个同时建。")]),e._v(" "),t("p",[e._v("不管是 vue 页面还是 nvue 页面，都需要在"),t("code",[e._v("pages.json")]),e._v("中注册。如果在 HBuilderX 中新建页面是会自动注册的，如果使用其他编辑器，则需要自行在 pages.json 里注册。")]),e._v(" "),t("p",[e._v("如果一个页面路由下同时有 vue 页面和 nvue 页面，即出现同名的 vue 和 nvue 文件。那么在 App 端，会仅使用 nvue 页面，同名的 vue 文件将不会被编译到 App 端。而在非 App 端，会优先使用 vue 页面。")]),e._v(" "),t("p",[e._v("如果不同名，只有 nvue 页面，则在非 app 端，只有 uni-app 编译模式的 nvue 文件才会编译。")]),e._v(" "),t("h3",{attrs:{id:"_2-开发-nvue-页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-开发-nvue-页面"}},[e._v("#")]),e._v(" 2.开发 nvue 页面")]),e._v(" "),t("p",[t("code",[e._v("nvue")]),e._v(" 页面结构同 "),t("code",[e._v("vue")]),e._v(", 由 "),t("code",[e._v("template")]),e._v("、"),t("code",[e._v("style")]),e._v("、"),t("code",[e._v("script")]),e._v(" 构成。")]),e._v(" "),t("ul",[t("li",[e._v("template： 模板写法、数据绑定同 vue。组件支持 2 种模式，\n"),t("ul",[t("li",[e._v("weex 组件，同 weex 写法，参考："),t("a",{attrs:{href:"http://emas.weex.io/zh/docs/components/a.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("weex 内置组件"),t("OutboundLink")],1),e._v("；")]),e._v(" "),t("li",[e._v("uni-app 组件，同 uni-app 写法。")]),e._v(" "),t("li",[e._v("App 端 nvue 专用组件，详见"),t("a",{attrs:{href:"https://uniapp.dcloud.io/component/barcode",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://uniapp.dcloud.io/component/barcode"),t("OutboundLink")],1),e._v("。")])])]),e._v(" "),t("li",[e._v("style：由于采用原生渲染，"),t("strong",[e._v("并非所有浏览器的 css 均支持，布局模型只支持 flex 布局")]),e._v("，虽然不会造成某些界面布局无法实现，但写法要注意。详见："),t("a",{attrs:{href:"/tutorial/nvue-css"}},[e._v("样式")])]),e._v(" "),t("li",[e._v("script：写法同 vue，并支持 3 种 API：\n"),t("ul",[t("li",[e._v("nvue API ：仅支持 App 端，uni-app 编译模式也可使用。使用前需先引入对应模块，参考："),t("a",{attrs:{href:"/tutorial/nvue-api"}},[e._v("模块引入 API")])]),e._v(" "),t("li",[e._v("uni API："),t("a",{attrs:{href:"https://uniapp.dcloud.io/api/README",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://uniapp.dcloud.io/api/README"),t("OutboundLink")],1)]),e._v(" "),t("li",[e._v("plus API：仅支持 App 端。"),t("a",{attrs:{href:"http://www.html5plus.org/doc/h5p.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://www.html5plus.org/doc/h5p.html"),t("OutboundLink")],1)])])])]),e._v(" "),t("h3",{attrs:{id:"_3-调试-nvue-页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-调试-nvue-页面"}},[e._v("#")]),e._v(" 3.调试 nvue 页面")]),e._v(" "),t("p",[e._v("HBuilderX 内置了 weex 调试工具的强化版，包括审查界面元素、看 log、debug 打断点，"),t("a",{attrs:{href:"https://uniapp.dcloud.net.cn/tutorial/debug/debug-app.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("详见"),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"render-whole"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#render-whole"}},[e._v("#")]),e._v(" render-whole")]),e._v(" "),t("p",[e._v("在 HBuilder X 3.1.0 起版本，nvue 新增 "),t("code",[e._v("render-whole")]),e._v("属性，类型"),t("code",[e._v("Boolean")]),e._v("。")]),e._v(" "),t("ul",[t("li",[e._v('设置 render-whole="true"时，视图层将组件以及子组件的信息结构一次性和原生层通讯，通过整个节点的重绘提升了排版渲染性能。')]),e._v(" "),t("li",[e._v('设置 render-whole="false"时，视图层将以子节点一个接着一个和原生层通讯再重绘。总体的渲染时间可能更久。')])]),e._v(" "),t("p",[e._v("默认启用"),t("code",[e._v("render-whole")]),e._v("为"),t("code",[e._v("true")]),e._v("的组件列表")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("text")])]),e._v(" "),t("li",[t("code",[e._v("cell")])]),e._v(" "),t("li",[t("code",[e._v("header")])]),e._v(" "),t("li",[t("code",[e._v("cell-slot")])]),e._v(" "),t("li",[t("code",[e._v("recycle-list")])])]),e._v(" "),t("p",[t("strong",[e._v("使用")])]),e._v(" "),t("div",{staticClass:"language-html extra-class"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("swiper")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v(":render-whole")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("true"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("</")]),e._v("swiper")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n")])])]),t("p",[t("strong",[e._v("演示")])]),e._v(" "),t("blockquote",[t("p",[e._v("此演示在 Android 5.1 版本手机上的效果，高版本手机效果没有这么明显")])]),e._v(" "),t("p",[t("img",{staticStyle:{width:"300px"},attrs:{src:"https://qiniu-web-assets.dcloud.net.cn/unidoc/zh/render-whole.gif",loading:"lazy"}})]),e._v(" "),t("p",[e._v("示例工程"),t("a",{attrs:{href:"https://qiniu-web-assets.dcloud.net.cn/unidoc/zh/NvueOptimization.zip",target:"_blank",rel:"noopener noreferrer"}},[e._v("点击下载"),t("OutboundLink")],1)]),e._v(" "),t("h2",{attrs:{id:"nvue开发与vue开发的常见区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nvue开发与vue开发的常见区别"}},[e._v("#")]),e._v(" nvue开发与vue开发的常见区别")]),e._v(" "),t("p",[e._v("基于原生引擎的渲染，虽然还是前端技术栈，但和web开发肯定是有区别的。")]),e._v(" "),t("ol",[t("li",[e._v("nvue 页面控制显隐只可以使用"),t("code",[e._v("v-if")]),e._v("不可以使用"),t("code",[e._v("v-show")])]),e._v(" "),t("li",[e._v("nvue 页面只能使用"),t("code",[e._v("flex")]),e._v("布局，不支持其他布局方式。页面开发前，首先想清楚这个页面的纵向内容有什么，哪些是要滚动的，然后每个纵向内容的横轴排布有什么，按 flex 布局设计好界面。")]),e._v(" "),t("li",[e._v("nvue 页面的布局排列方向默认为竖排（"),t("code",[e._v("column")]),e._v("），如需改变布局方向，可以在 "),t("code",[e._v("manifest.json")]),e._v(" -> "),t("code",[e._v("app-plus")]),e._v(" -> "),t("code",[e._v("nvue")]),e._v(" -> "),t("code",[e._v("flex-direction")]),e._v(" 节点下修改，仅在 uni-app 模式下生效。"),t("a",{attrs:{href:"https://uniapp.dcloud.io/collocation/manifest?id=nvue",target:"_blank",rel:"noopener noreferrer"}},[e._v("详情"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("li",[e._v("nvue页面编译为H5、小程序时，会做一件css默认值对齐的工作。因为weex渲染引擎只支持flex，并且默认flex方向是垂直。而H5和小程序端，使用web渲染，默认不是flex，并且设置"),t("code",[e._v("display:flex")]),e._v("后，它的flex方向默认是水平而不是垂直的。所以nvue编译为H5、小程序时，会自动把页面默认布局设为flex、方向为垂直。当然开发者手动设置后会覆盖默认设置。")]),e._v(" "),t("li",[e._v("文字内容，必须、只能在"),t("code",[e._v("<text>")]),e._v("组件下。不能在"),t("code",[e._v("<div>")]),e._v("、"),t("code",[e._v("<view>")]),e._v("的"),t("code",[e._v("text")]),e._v("区域里直接写文字。否则即使渲染了，也无法绑定js里的变量。")]),e._v(" "),t("li",[e._v("只有"),t("code",[e._v("text")]),e._v("标签可以设置字体大小，字体颜色。")]),e._v(" "),t("li",[e._v("布局不能使用百分比、没有媒体查询。")]),e._v(" "),t("li",[e._v("nvue 切换横竖屏时可能导致样式出现问题，建议有 nvue 的页面锁定手机方向。")]),e._v(" "),t("li",[e._v("支持的css有限，不过并不影响布局出你需要的界面，"),t("code",[e._v("flex")]),e._v("还是非常强大的。"),t("RouterLink",{attrs:{to:"/tutorial/nvue-css.html#flex"}},[e._v("详见")])],1),e._v(" "),t("li",[e._v("不支持背景图。但可以使用"),t("code",[e._v("image")]),e._v("组件和层级来实现类似web中的背景效果。因为原生开发本身也没有web这种背景图概念")]),e._v(" "),t("li",[e._v("css选择器支持的比较少，只能使用 class 选择器。"),t("RouterLink",{attrs:{to:"/tutorial/nvue-css.html"}},[e._v("详见")])],1),e._v(" "),t("li",[e._v("nvue 的各组件在安卓端默认是透明的，如果不设置"),t("code",[e._v("background-color")]),e._v("，可能会导致出现重影的问题。")]),e._v(" "),t("li",[t("code",[e._v("class")]),e._v(" 进行绑定时只支持数组语法。")]),e._v(" "),t("li",[e._v("Android端在一个页面内使用大量圆角边框会造成性能问题，尤其是多个角的样式还不一样的话更耗费性能。应避免这类使用。")]),e._v(" "),t("li",[e._v("nvue页面没有"),t("code",[e._v("bounce")]),e._v("回弹效果，只有几个列表组件有"),t("code",[e._v("bounce")]),e._v("效果，包括 "),t("code",[e._v("list")]),e._v("、"),t("code",[e._v("recycle-list")]),e._v("、"),t("code",[e._v("waterfall")]),e._v("。")]),e._v(" "),t("li",[e._v("原生开发没有页面滚动的概念，页面内容高过屏幕高度并不会自动滚动，只有部分组件可滚动（"),t("code",[e._v("list")]),e._v("、"),t("code",[e._v("waterfall")]),e._v("、"),t("code",[e._v("scroll-view/scroller")]),e._v("），要滚的内容需要套在可滚动组件下。这不符合前端开发的习惯，所以在 nvue 编译为 uni-app模式时，给页面外层自动套了一个 "),t("code",[e._v("scroller")]),e._v("，页面内容过高会自动滚动。（组件不会套，页面有"),t("code",[e._v("recycle-list")]),e._v("时也不会套）。后续会提供配置，可以设置不自动套。")]),e._v(" "),t("li",[e._v("在 App.vue 中定义的全局js变量不会在 nvue 页面生效。"),t("code",[e._v("globalData")]),e._v("和"),t("code",[e._v("vuex")]),e._v("是生效的。")]),e._v(" "),t("li",[e._v("App.vue 中定义的全局css，对nvue和vue页面同时生效。如果全局css中有些css在nvue下不支持，编译时控制台会报警，建议把这些不支持的css包裹在"),t("a",{attrs:{href:"https://uniapp.dcloud.io/platform",target:"_blank",rel:"noopener noreferrer"}},[e._v("条件编译"),t("OutboundLink")],1),e._v("里，"),t("code",[e._v("APP-PLUS-NVUE")])]),e._v(" "),t("li",[e._v("不能在 "),t("code",[e._v("style")]),e._v(" 中引入字体文件，nvue 中字体图标的使用参考："),t("RouterLink",{attrs:{to:"/tutorial/nvue-api.html#addrule"}},[e._v("加载自定义字体")]),e._v("。如果是本地字体，可以用"),t("code",[e._v("plus.io")]),e._v("的API转换路径。")],1),e._v(" "),t("li",[e._v("目前不支持在 nvue 页面使用 "),t("code",[e._v("typescript/ts")]),e._v("。")]),e._v(" "),t("li",[e._v("nvue 页面关闭原生导航栏时，想要模拟状态栏，可以"),t("a",{attrs:{href:"https://ask.dcloud.net.cn/article/35111",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考文章"),t("OutboundLink")],1),e._v("。但是，仍然强烈建议在nvue页面使用原生导航栏。nvue的渲染速度再快，也没有原生导航栏快。原生排版引擎解析"),t("code",[e._v("json")]),e._v("绘制原生导航栏耗时很少，而解析nvue的js绘制整个页面的耗时要大的多，尤其在新页面进入动画期间，对于复杂页面，没有原生导航栏会在动画期间产生整个屏幕的白屏或闪屏。")])]),e._v(" "),t("h2",{attrs:{id:"ios-平台下拉组件-refresh-组件注意问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ios-平台下拉组件-refresh-组件注意问题"}},[e._v("#")]),e._v(" iOS 平台下拉组件 refresh 组件注意问题")]),e._v(" "),t("p",[e._v("iOS 平台默认情况下滚动容器组件（如"),t("code",[e._v("list")]),e._v("、"),t("code",[e._v("waterfall")]),e._v("组件）内容不足时，由于没有撑满容器的可视区域会导致无法上下滚动，此时无法操作下拉刷新功能，无法触发"),t("code",[e._v("refresh")]),e._v("组件的"),t("code",[e._v("@refresh")]),e._v("、"),t("code",[e._v("@pullingdown")]),e._v("事件。 此时可在容器组件中配置"),t("code",[e._v("alwaysScrollableVertical")]),e._v("属性值为"),t("code",[e._v("true")]),e._v("来设置支持上下滚动，支持下拉刷新操作。")]),e._v(" "),t("h5",{attrs:{id:"用法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#用法"}},[e._v("#")]),e._v(" 用法")]),e._v(" "),t("div",{staticClass:"language-html extra-class"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("list")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("class")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("scroll-v list"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("enableBackToTop")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("true"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("scroll-y")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("alwaysScrollableVertical")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("true"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("refresh")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("class")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("refresh"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("@refresh")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("onrefresh()"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("@pullingdown")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("onpullingdown"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("\x3c!-- refresh content --\x3e")]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("</")]),e._v("refresh")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("cell")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("v-for")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("(newsitem,index) in list"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),t("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v(":key")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[t("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("newsitem.id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("\x3c!-- cell content --\x3e")]),e._v("\n\t"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("</")]),e._v("cell")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token tag"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("</")]),e._v("list")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n")])])]),t("blockquote",[t("p",[e._v("Android 平台不存在此问题")])])])}),[],!1,null,null,null);t.default=s.exports}}]);