(window.webpackJsonp=window.webpackJsonp||[]).push([[331],{716:function(t,a,s){"use strict";s.r(a);var n=s(1),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ios平台capabilities配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ios平台capabilities配置"}},[t._v("#")]),t._v(" iOS平台Capabilities配置")]),t._v(" "),a("p",[t._v("在XCode中可给工程添加设置Capabilities，如图所示："),a("br"),t._v(" "),a("img",{attrs:{src:"https://native-res.dcloud.net.cn/images/uniapp/ios/xcode-capabilities.png",alt:""}})]),t._v(" "),a("p",[t._v("配置后，会更新XCode工程的.entitlements和Info.plist文件，此文章介绍如何在HBuilderX中配置iOS平台的Capabilities。")]),t._v(" "),a("h2",{attrs:{id:"hbuilderx4-18及以上版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hbuilderx4-18及以上版本"}},[t._v("#")]),t._v(" HBuilderX4.18及以上版本")]),t._v(" "),a("p",[a("strong",[t._v("注意：uni-app x 项目只支持此方式配置")])]),t._v(" "),a("p",[t._v("将 XCode 工程中的 .entitlements 文件中的内容配置到 "),a("code",[t._v("iOS原生应用配置文件和资源")]),t._v(" 的 "),a("code",[t._v("UniApp.entitlements")]),t._v(" 文件，详情参考："),a("a",{attrs:{href:"https://uniapp.dcloud.net.cn/tutorial/app-nativeresource-ios.html#entitlements",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置文件UniApp.entitlements"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("将 XCode 工程中的 Info.plist 文件中的内容配置到 "),a("code",[t._v("iOS原生应用配置文件和资源")]),t._v(" 的 "),a("code",[t._v("Info.plist")]),t._v(" 文件，详情参考："),a("a",{attrs:{href:"https://uniapp.dcloud.net.cn/tutorial/app-nativeresource-ios.html#infoplist",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置文件 Info.plist"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"hbuilderx4-18以前版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hbuilderx4-18以前版本"}},[t._v("#")]),t._v(" HBuilderX4.18以前版本")]),t._v(" "),a("p",[t._v("将XCode工程中的 .entitlements 和 Info.plist 文件中的内容转换为json格式数据配置到manifest.json文件中，使得HBuilderX云端打包工程设置相应的Capabilities。")]),t._v(" "),a("p",[t._v("打开项目的manifest.json文件，在源码视图中进行配置")]),t._v(" "),a("ul",[a("li",[t._v("5  APP项目"),a("br"),t._v('\n在"plus" -> "distribute" -> "apple"添加"capabilities"节点')]),t._v(" "),a("li",[t._v("uni-app项目"),a("br"),t._v('\n在"app-plus" -> "distribute" -> "ios"添加"capabilities"节点')])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"capabilities"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"entitlements"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 合并到工程entitlements文件的数据（json格式）")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"plists"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 合并到工程Info.plist文件的数据（json格式）")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("p",[t._v("其中entitlements数据（json）将转换成XCode工程中entitlements文件的数据（字典格式）\nplists节点数据将转换成XCode工程中Info.plist文件的数据（字典格式）")]),t._v(" "),a("a",{attrs:{id:"unilink"}}),t._v(" "),a("h2",{attrs:{id:"通用链接-universal-link-配置教程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通用链接-universal-link-配置教程"}},[t._v("#")]),t._v(" 通用链接（Universal Link）配置教程")]),t._v(" "),a("p",[a("strong",[t._v("为了简化配置使用通用链接，推荐使用UniCloud快速生成通用链接，详情参考："),a("a",{attrs:{href:"https://uniapp.dcloud.io/api/plugins/universal-links",target:"_blank",rel:"noopener noreferrer"}},[t._v("一键生成iOS通用链接"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("Universal Link是苹果在WWDC 2015上提出的iOS 9的新特性之一。此特性类似于深层链接，并能够方便地通过打开一个Https链接来直接启动您的客户端应用(手机有安装App)。对比起以往所使用的URL Sheme, 这种新特性在实现web-app的无缝链接时能够提供极佳的用户体验。\n使用前请阅读"),a("a",{attrs:{href:"https://developer.apple.com/library/archive/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12-SW1",target:"_blank",rel:"noopener noreferrer"}},[t._v("苹果官方文档"),a("OutboundLink")],1),a("br"),t._v(" "),a("strong",[t._v("使用通用链接（Universal Link）必须要有域名，下面的配置中将要用到")])]),t._v(" "),a("h3",{attrs:{id:"第一步-开启associated-domains服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一步-开启associated-domains服务"}},[t._v("#")]),t._v(" 第一步：开启Associated Domains服务")]),t._v(" "),a("p",[t._v("登录苹果开发者网站，在“Certificates, Identifiers & Profiles”页面选择“Identifiers”中选择对应的App ID，确保开启Associated Domains服务"),a("br"),t._v(" "),a("img",{attrs:{src:"https://native-res.dcloud.net.cn/images/uniapp/ios/apple-capabilities.png",alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("开启Associated Domains服务后需要重新生成profile文件，提交云端打包时使用")])]),t._v(" "),a("a",{attrs:{id:"associatedDomains"}}),t._v(" "),a("h3",{attrs:{id:"第二步-配置associated-domains-域名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二步-配置associated-domains-域名"}},[t._v("#")]),t._v(" 第二步：配置Associated Domains（域名）")]),t._v(" "),a("h4",{attrs:{id:"uni-app-5-app项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uni-app-5-app项目"}},[t._v("#")]),t._v(" uni-app/5+ App项目")]),t._v(" "),a("p",[a("strong",[t._v("使用HBuilderX可视化界面配置")]),a("br"),t._v("\n打开项目的manifest.json文件，切换到“App常用其它设置”项，在“iOS设置”下的“关联域（Associated Domains）”中进行配置："),a("br"),t._v(" "),a("img",{attrs:{src:"https://native-res.dcloud.net.cn/images/uniapp/ios/hx-ass-domains.png",alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("使用HBuilderX源码视图配置")]),a("br"),t._v('\n打开项目的manifest.json文件，切换到“源码视图”项，在uni-app项目在"app-plus" -> "distribute" -> "ios" -> "capabilities" -> "entitlements"节点下添加"com.apple.developer.associated-domains"字段，字段值为字符串数组，每个字符串为要关联的域名：')]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"capabilities"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"entitlements"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"com.apple.developer.associated-domains"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"applinks:demo.dcloud.net.cn"')]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("其中demo.dcloud.net.cn是应用通用链接的域名（这里不要包含path），请修改为自己应用要使用的域名")])]),t._v(" "),a("blockquote",[a("p",[t._v('5+ App项目源码视图配置节点为："plus" -> "distribute" -> "apple" -> "capabilities" -> "entitlements"')])]),t._v(" "),a("p",[t._v("保存后提交云端打包生效。")]),t._v(" "),a("h4",{attrs:{id:"uni-app-x项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uni-app-x项目"}},[t._v("#")]),t._v(" uni-app x项目")]),t._v(" "),a("p",[t._v('uni-app x项目不再支持maniest.json中配置，需在项目下创建 "nativeResources" -> "ios" 目录，添加'),a("code",[t._v("UniApp.entitlements")]),t._v("文件配置。"),a("br"),t._v("\n详情参考："),a("a",{attrs:{href:"https://uniapp.dcloud.net.cn/tutorial/app-nativeresource-ios.html#domains",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://uniapp.dcloud.net.cn/tutorial/app-nativeresource-ios.html#domains"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("strong",[t._v("本地离线打包配置")]),a("br"),t._v("\n在原生XCode工程中配置通用链接域名（使用HBuilderX云端打包跳过）"),a("br"),t._v(" "),a("img",{attrs:{src:"https://native-res.dcloud.net.cn/images/uniapp/ios/xcode-ass-domains1.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://native-res.dcloud.net.cn/images/uniapp/ios/xcode-ass-domains2.png",alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("HBuilderX中自带的默认真机运行基座HBuilderX注册的通用链接为：https://demo.dcloud.net.cn/ulink/")])]),t._v(" "),a("h3",{attrs:{id:"第三步-服务器配置apple-app-site-association文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三步-服务器配置apple-app-site-association文件"}},[t._v("#")]),t._v(" 第三步：服务器配置apple-app-site-association文件")]),t._v(" "),a("p",[t._v("需要在上面域名对应的服务器上放apple-app-site-association文件。\napple-app-site-association文件配置如下：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"applinks"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"apps"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"details"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"appID"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"G56NU654TV.io.dcloud.HBuilder"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"paths"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/ulink/*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("apps\n必须对应一个空的数组")]),t._v(" "),a("li",[t._v("appID\n由前缀和ID两部分组成,可以登录苹果开发者网站，在“Certificates, Identifiers & Profiles”页面选择“Identifiers”中选择对应的App ID查看")]),t._v(" "),a("li",[t._v("paths\n对应域名中的path，用于过滤可以跳转到App的链接，支持通配符*，?以及NOT进行匹配，匹配的优先级是从左至右依次降低")])]),t._v(" "),a("p",[a("strong",[t._v("注意：不要直接拷贝使用上面的示例，必须根据自己应用的配置修改")]),a("br"),t._v("\n把配置好的apple-app-site-association文件上传到你自己的服务器，确保通过https://demo.dcloud.net.cn/.well-known/apple-app-site-association可访问。")]),t._v(" "),a("p",[a("strong",[t._v("其中demo.dcloud.net.cn为上面配置的域名")]),a("br"),t._v("\n应用安装后会通过访问上面的url向系统注册应用的通用链接。")]),t._v(" "),a("blockquote",[a("p",[t._v("推荐方案：将apple-app-site-association文件部署到，免费的阿里云版unicloud的 "),a("a",{attrs:{href:"https://uniapp.dcloud.io/uniCloud/hosting?id=%e7%ae%80%e4%bb%8b",target:"_blank",rel:"noopener noreferrer"}},[t._v("前端网页托管"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"app端处理通用链接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#app端处理通用链接"}},[t._v("#")]),t._v(" app端处理通用链接")]),t._v(" "),a("h4",{attrs:{id:"uni-app-5-app项目-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uni-app-5-app项目-2"}},[t._v("#")]),t._v(" uni-app/5+ App项目")]),t._v(" "),a("p",[t._v("可通过5+ API的"),a("a",{attrs:{href:"https://www.html5plus.org/doc/zh_cn/runtime.html#plus.runtime.launcher",target:"_blank",rel:"noopener noreferrer"}},[t._v("plus.runtime.launcher"),a("OutboundLink")],1),t._v('判断应用启动来源，如果其值为"uniLink"则表示通过通用链接启动应。\n这时可通过5+ API的'),a("a",{attrs:{href:"https://www.html5plus.org/doc/zh_cn/runtime.html#plus.runtime.arguments",target:"_blank",rel:"noopener noreferrer"}},[t._v("plus.runtime.arguments"),a("OutboundLink")],1),t._v("获取启动参数，通用链接启动的情况将返回完整的通用链接地址。")]),t._v(" "),a("h4",{attrs:{id:"uni-app-x项目-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uni-app-x项目-2"}},[t._v("#")]),t._v(" uni-app x项目")]),t._v(" "),a("p",[t._v("在 App.uvue 文件的应用生命周期 "),a("a",{attrs:{href:"https://doc.dcloud.net.cn/uni-app-x/collocation/app.html#onlaunch",target:"_blank",rel:"noopener noreferrer"}},[t._v("onLaunch"),a("OutboundLink")],1),t._v(" 和 "),a("a",{attrs:{href:"https://doc.dcloud.net.cn/uni-app-x/collocation/app.html#onshow",target:"_blank",rel:"noopener noreferrer"}},[t._v("onShow"),a("OutboundLink")],1),t._v(" 回调参数中可通过 appLink 属性获取通用链接地址。")]),t._v(" "),a("p",[t._v("也可以通过 API： "),a("a",{attrs:{href:"https://doc.dcloud.net.cn/uni-app-x/api/launch.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni.getLaunchOptionsSync"),a("OutboundLink")],1),t._v(" 和 "),a("a",{attrs:{href:"https://doc.dcloud.net.cn/uni-app-x/api/launch.html#getenteroptionssync",target:"_blank",rel:"noopener noreferrer"}},[t._v("uni.getEnterOptionsSync"),a("OutboundLink")],1),t._v(" 返回值中的 appLink 属性获取通用链接地址。")]),t._v(" "),a("h3",{attrs:{id:"注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),a("ul",[a("li",[t._v("apple-app-site-association文件不需要.json后缀")]),t._v(" "),a("li",[t._v("对apple-app-site-association文件的请求仅在App第一次启动时进行，如果此时网络连接出了问题apple会缓存请求，等有网的时候再去请求，如果没有请求此文件通用连接会失效")]),t._v(" "),a("li",[t._v("iOS 9.2开始，在相同的domain内Universal Links不生效，必须要跨域才生效")])])])}),[],!1,null,null,null);a.default=e.exports}}]);