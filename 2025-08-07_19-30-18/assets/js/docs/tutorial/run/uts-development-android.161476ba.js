(window.webpackJsonp=window.webpackJsonp||[]).push([[458],{842:function(t,a,d){"use strict";d.r(a);var r=d(1),s=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"android-uts-扩展开发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#android-uts-扩展开发"}},[t._v("#")]),t._v(" Android UTS 扩展开发")]),t._v(" "),a("blockquote",[a("p",[t._v("版本要求: HBuilderX 3.6.9+")])]),t._v(" "),a("p",[t._v("HBuilderX 3.6.9+， 新增 uts 插件 Android 平台 真机运行支持通过 Gradle 下载三方仓储。")]),t._v(" "),a("p",[t._v("运行带有 uts 插件的项目到 Android 设备，如果您遇到以下提示，请配置"),a("a",{attrs:{href:"#%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"}},[t._v("运行环境")])]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://web-ext-storage.dcloud.net.cn/hx/84E1472F-A959-4440-9C47-B8D8A4D0C9BB.png",loading:"lazy"}}),t._v(" "),a("h2",{attrs:{id:"uts-扩展插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#uts-扩展插件"}},[t._v("#")]),t._v(" uts 扩展插件")]),t._v(" "),a("p",[t._v("当您运行带有 uts 插件的项目到 Android 设备时，会自动安装【uts 开发扩展 - Android】插件，请务必安装。具体如下：")]),t._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://qiniu-web-assets.dcloud.net.cn/unidoc/zh/20221111171012.jpg",loading:"lazy"}}),t._v(" "),a("h2",{attrs:{id:"环境配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#环境配置"}},[t._v("#")]),t._v(" 环境配置")]),t._v(" "),a("p",[t._v("入口【设置 - 运行配置】：如图")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://web-ext-storage.dcloud.net.cn/hx/uts-android-4.png",alt:"image",loading:"lazy"}})]),t._v(" "),a("p",[t._v("HBuilderX 4.27之前，入口在 设置-插件配置 中。")]),t._v(" "),a("h3",{attrs:{id:"上面的截图展示了以下配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上面的截图展示了以下配置"}},[t._v("#")]),t._v(" 上面的截图展示了以下配置：")]),t._v(" "),a("h4",{attrs:{id:"配置-gradle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-gradle"}},[t._v("#")]),t._v(" 配置 Gradle")]),t._v(" "),a("p",[t._v("gradle是Android的库管理工具。如果你的电脑没有单独安装gradle的话（Android Studio自带的gradle版本太低），按如下步骤下载。")]),t._v(" "),a("ol",[a("li",[t._v("点击图标 1 的下载地址进入下载页面。如图所示，点击红圈部分下载工具包。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://qiniu-web-assets.dcloud.net.cn/unidoc/zh/gradle.png",alt:"image",loading:"lazy"}})]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("将步骤 1 下载的内容解压后，找到 bin 目录下的执行脚本，填入图标 2 处。")])]),t._v(" "),a("p",[a("strong",[t._v("注意")])]),t._v(" "),a("ul",[a("li",[t._v("内置的下载模板中 Android Gradle Plugin 使用的最低版本为 7.4.0，所以 Gradle "),a("strong",[t._v("最低版本要求7.5")]),t._v("及以上。")]),t._v(" "),a("li",[t._v("mac 为"),a("code",[t._v("%解压路径%/bin/gradle")]),t._v("；window 为"),a("code",[t._v("%解压路径%\\bin\\gradle.bat")]),t._v("。")])]),t._v(" "),a("h4",{attrs:{id:"配置-gradle-jdk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-gradle-jdk"}},[t._v("#")]),t._v(" 配置 Gradle JDK")]),t._v(" "),a("ul",[a("li",[t._v("不同版本 Gradle 依赖不同版本的 JDK 。HbuilderX 4.27之前 内置的 JDK 为 11，HBuilderX 4.27+ 内置的 JDK 为 17。Gradle8.0 以上，JDK 最低要求为17。请根据HbuilderX实际版本手动下载并配置 JDK 路径。配置方式如下")])]),t._v(" "),a("ol",[a("li",[a("p",[t._v("点击图标 3 的下载地址进入下载页面，选择所需要的版本。\n如本地已安装 JDK 可跳过此步骤。如果本地安装过Android Studio，那么其自带JDK，路径一般在“C:\\Program Files\\Android\\Android Studio\\jre”。")])]),t._v(" "),a("li",[a("p",[t._v("将步骤 1 下载的内容解压，填入图标 4 处（Mac电脑找到 Home 目录，Win电脑为解压后的根目录），可参考文档最后的示例。")])])]),t._v(" "),a("p",[a("strong",[t._v("注意")])]),t._v(" "),a("ul",[a("li",[t._v("HBuilderX 4.02+支持此配置项")]),t._v(" "),a("li",[t._v("Gradle8.0 最低要求 JDK 版本为 17。更多版本要求"),a("a",{attrs:{href:"https://developer.android.google.cn/build/releases/past-releases?hl=zh-cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考文档"),a("OutboundLink")],1)])]),t._v(" "),a("h4",{attrs:{id:"配置-android-sdk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-android-sdk"}},[t._v("#")]),t._v(" 配置 Android SDK")]),t._v(" "),a("p",[t._v("点击图标 5 的下载地址进入安卓官网，提供如下两种形式，下载Android Studio 或 单独下载 Command line tools only。")]),t._v(" "),a("h5",{attrs:{id:"◇-下载-android-studio"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#◇-下载-android-studio"}},[t._v("#")]),t._v(" ◇ 下载 Android Studio")]),t._v(" "),a("ol",[a("li",[t._v("如图所示，根据平台下载 Android Studio")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://qiniu-web-assets.dcloud.net.cn/unidoc/zh/sdk-2.png",alt:"image",loading:"lazy"}})]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("安装后必须启动 Android Studio，Android Studio 启动后会开始自动下载 Android SDK（需翻墙）。Android Studio初始化完毕后，一般会在如下目录找到 Android Studio 中 sdk 的路径，然后填入图标 6 处。")])]),t._v(" "),a("ul",[a("li",[t._v("默认路径 mac 为"),a("code",[t._v("/Users/用户名/Library/Android/sdk")]),t._v("；window 为"),a("code",[t._v("C:\\Users\\用户名\\AppData\\Local\\Android\\Sdk")])])]),t._v(" "),a("h5",{attrs:{id:"◇-如不想安装-android-studio-可通过下载-command-line-tools-only"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#◇-如不想安装-android-studio-可通过下载-command-line-tools-only"}},[t._v("#")]),t._v(" ◇ 如不想安装 Android Studio 可通过下载 Command line tools only")]),t._v(" "),a("p",[t._v("Android Studio占用体积较大，空间不足时可考虑单独下载 Command line tools only")]),t._v(" "),a("ol",[a("li",[t._v("如图所示，根据平台下载 Command line tools only。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://qiniu-web-assets.dcloud.net.cn/unidoc/zh/sdk.png",alt:"image",loading:"lazy"}})]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("下载解压后通过`%解压目录%/bin/sdkmanager 脚本安装 build-tools 和 platforms")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('sdkmanager --sdk_root=%sdk路径% --install "build-tools;30.0.0"\n\nsdkmanager --sdk_root=%sdk路径% --install "platforms;android-30"\n')])])]),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[t._v("将"),a("code",[t._v("%sdk路径%")]),t._v("填入图标 6 处。")])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://developer.android.google.cn/studio/command-line/sdkmanager",target:"_blank",rel:"noopener noreferrer"}},[t._v("sdkmanager 使用文档"),a("OutboundLink")],1)])])]),t._v(" "),a("p",[a("strong",[t._v("注意")])]),t._v(" "),a("ul",[a("li",[t._v("下载 Android Studio 和下载 Command line tools only 选择一种形式下载 sdk 即可。")])]),t._v(" "),a("h4",{attrs:{id:"配置示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置示例"}},[t._v("#")]),t._v(" 配置示例")]),t._v(" "),a("p",[t._v("mac系统配置后如下图（根据本地目录结构有所不同）\n"),a("img",{attrs:{src:"https://web-ext-storage.dcloud.net.cn/hx/uts-android-1.png",alt:"image",loading:"lazy"}})]),t._v(" "),a("p",[t._v("win系统配置后如下图（根据本地目录结构有所不同）\n"),a("img",{attrs:{src:"https://web-ext-storage.dcloud.net.cn/hx/uts-android-3.png",alt:"image",loading:"lazy"}})]),t._v(" "),a("p",[a("strong",[t._v("注意")])]),t._v(" "),a("ul",[a("li",[t._v("如果环境已存在可以直接设置本地的工具包路径")]),t._v(" "),a("li",[t._v("此插件依赖 sdk 目录下 build-tools 版本不低于 30.0.0")]),t._v(" "),a("li",[t._v("此插件依赖 sdk 目录下 platforms 版本不低于 android-30")])]),t._v(" "),a("h2",{attrs:{id:"gradle缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gradle缓存"}},[t._v("#")]),t._v(" gradle缓存")]),t._v(" "),a("blockquote",[a("p",[t._v("项目依赖的三方仓储下载完成后会生成缓存，缓存如果有效，下次运行将直接跳过配置检测和下载过程。如需要缓存主动失效可清理gradle的缓存目录，正常存放于"),a("code",[t._v("用户目录/.gradle/caches")]),t._v("。")])])])}),[],!1,null,null,null);a.default=s.exports}}]);