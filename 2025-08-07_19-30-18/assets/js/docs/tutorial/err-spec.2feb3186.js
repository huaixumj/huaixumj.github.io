(window.webpackJsonp=window.webpackJsonp||[]).push([[405],{790:function(r,t,s){"use strict";s.r(t);var a=s(1),e=Object(a.a)({},(function(){var r=this,t=r._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[t("h1",{attrs:{id:"uni错误规范"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uni错误规范"}},[r._v("#")]),r._v(" uni错误规范")]),r._v(" "),t("h2",{attrs:{id:"背景"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#背景"}},[r._v("#")]),r._v(" 背景")]),r._v(" "),t("p",[r._v("小程序平台的错误信息，大多返回的格式是errCode和errMsg。但不同的小程序平台，返回的errCode有可能不一样。")]),r._v(" "),t("p",[r._v("在实际开发中，uni-app引擎、三方插件、开发者自己的业务代码，都会返回错误，但errCode也可能彼此冲突。")]),r._v(" "),t("p",[r._v("在统一的错误拦截和uni统计中，混乱的errCode会造成很多问题。")]),r._v(" "),t("p",[r._v("很多错误是由更底层的错误引发的，但只暴露最外层错误难以入手排查，需要暴露更底层的错误。")]),r._v(" "),t("p",[r._v("为了进一步规范错误信息格式，uni-app定义了更完善的错误规范：")]),r._v(" "),t("ol",[t("li",[r._v("补充了errSubject，用于区隔不同平台或不同模块errCode相同的情况")]),r._v(" "),t("li",[r._v("补充了cause，用于反馈错误的上一层来源。比如在app平台，uni.login API返回错误时，可能是底层的三方社交登录sdk报了错，此时会把三方sdk的错误追加到cause里")])]),r._v(" "),t("p",[r._v("从2022-11-11起，DCloud新增的所有API将使用这套uni错误规范。同时我们推荐所有的插件作者也使用这套规范，在errSubject中声明自己的插件id。")]),r._v(" "),t("h2",{attrs:{id:"定义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定义"}},[r._v("#")]),r._v(" 定义")]),r._v(" "),t("p",[r._v("所有异步API，都应通过callback回调返回错误，在回调函数参数中包含错误信息，回调函数参数为UniError类型")]),r._v(" "),t("p",[r._v("完整错误类型定义如下：")]),r._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[r._v("//源错误信息")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("interface")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("SourceError")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("{")]),r._v("\n    message"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[r._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v("\n    subject"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[r._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v("\n    code"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[r._v("number")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v("\n    cause"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v(" SourceError "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("|")]),r._v(" UniAggregateError\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("}")]),r._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[r._v("//Uni聚合源错误信息")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("interface")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("UniAggregateError")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("extends")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("SourceError")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("{")]),r._v("\n\terrors"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[r._v("Array")]),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("<")]),r._v("SourceError"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("|")]),r._v("UniAggregateError"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(">")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("}")]),r._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[r._v("//uni错误信息")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("interface")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("UniError")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("{")]),r._v("\n\terrSubject"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[r._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v("\n\terrCode"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[r._v("number")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v("\n\terrMsg"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[r._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v("\n\tdata"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v(" Object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v("\n\tcause"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("?")]),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v(" SourceError "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("|")]),r._v(" UniAggregateError\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("}")]),r._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[r._v("//回调函数")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("function")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[r._v("CallBack")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("(")]),r._v("err"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v("UniError"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("{")]),r._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[r._v("//console.log(JSON.stringify(res));")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("}")]),r._v("\n")])])]),t("h2",{attrs:{id:"sourceerror"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sourceerror"}},[r._v("#")]),r._v(" SourceError")]),r._v(" "),t("p",[r._v("用于保存引起错误的源错误，如app端三方SDK的错误信息，包括以下属性：")]),r._v(" "),t("ul",[t("li",[r._v('subject\n源错误（如app端三方SDK）模块名称，如uni-ad中的穿山甲广告SDK的模块名称为"csj"')]),r._v(" "),t("li",[r._v("code\n源错误（如app端三方SDK）的原始错误码")]),r._v(" "),t("li",[r._v("message\n源错误（如app端三方SDK）的原始错误描述信息")]),r._v(" "),t("li",[r._v("cause\n上级源错误，只有一个源错误时是SourceError，包含多个源错误时封装成AggregateError")])]),r._v(" "),t("p",[t("strong",[r._v("注意")]),r._v("\n源错误可以根据业务情况扩展其它属性，如uni-ad中，可以添加slotId来表示聚合的三方广告位标识")]),r._v(" "),t("h2",{attrs:{id:"uniaggregateerror"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uniaggregateerror"}},[r._v("#")]),r._v(" UniAggregateError")]),r._v(" "),t("p",[r._v("用于保存多个源错误，如app端某个错误可能是由多个三方SDK的错误引起，可将多个源错误组成UniAggregateError对象。\n包括以下属性：")]),r._v(" "),t("ul",[t("li",[r._v("errors\n数组，可包含SourceError或UniAggregateError对象")])]),r._v(" "),t("h2",{attrs:{id:"unierror"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#unierror"}},[r._v("#")]),r._v(" UniError")]),r._v(" "),t("p",[r._v("Uni统一错误信息，用于统一各平台（端）错误信息")]),r._v(" "),t("ul",[t("li",[r._v('errSubject\n统一错误主题（模块）名称，字符串类型，存在多级模块时使用"::"分割，即"模块名称::二级模块名称"，参考'),t("a",{attrs:{href:"#errsubject"}},[r._v("errSubject（模块/主题）名称")])]),r._v(" "),t("li",[r._v("errCode\n统一错误码，数字类型，通常0表示成功，其它为错误码。"),t("br"),r._v("\n对于已经实现的API，继续保留现有errCode规范（保留向下兼容）。"),t("br"),r._v("\n错误码长度及规范参考微信小程序的"),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/framework/usability/PublicErrno.html#%E9%94%99%E8%AF%AF%E7%A0%81%E5%88%97%E8%A1%A8",target:"_blank",rel:"noopener noreferrer"}},[r._v("Errno错误码"),t("OutboundLink")],1),r._v("，使用 7 位数错误码，第 1 - 2 位标识 API 接口的一级类目，第 3 - 4 位标识 API 接口的二级类目，第 5 - 7 位表示具体的错误类型。"),t("br"),r._v("\n其他平台，与微信小程序相同的错误，错误码应尽量保持一致。"),t("br"),r._v("\n定义平台专有错误码时，为了避免冲突，错误码的第 5 - 7 位按以下规则：\n"),t("ul",[t("li",[r._v("跨端（App/Web）：使用6xx")]),r._v(" "),t("li",[r._v("App-Android端：使用7xx")]),r._v(" "),t("li",[r._v("App-iOS端：使用8xx")]),r._v(" "),t("li",[r._v("Web端：使用9xx")]),r._v(" "),t("li",[r._v("harmony next端：使用5xx")])])]),r._v(" "),t("li",[r._v("errMsg\n统一错误描述信息，字符串类型，应准确描述引起的错误原因")]),r._v(" "),t("li",[r._v("data\n可选，错误时返回的数据，比如获取设备信息时，如部分数据获取成功，部分数据获取失败，此时触发错误回调，需将获取成功的数据放到data属性中")]),r._v(" "),t("li",[r._v("cause\n可选，源错误信息，可以包含多个错误，详见"),t("a",{attrs:{href:"#sourceerror"}},[r._v("SourceError")])])]),r._v(" "),t("p",[r._v("当源错误存在多个时，需要将SourceError封装到AggregateError对象中，按以下方式获取SourceError数组：")]),r._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("function")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[r._v("CallBack")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("(")]),r._v("err"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v("UniError"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("{")]),r._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("var")]),r._v(" cerrs"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v("SourceError"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("]")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v(" err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(".")]),r._v("cause"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(".")]),r._v("errors"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(";")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("}")]),r._v("\n")])])]),t("h2",{attrs:{id:"errsubject"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#errsubject"}},[r._v("#")]),r._v(" errSubject（模块/主题）名称")]),r._v(" "),t("p",[r._v("errSubject属性值表示返回错误的调用模块名称。")]),r._v(" "),t("table",[t("thead",[t("tr",[t("th",[r._v("模块名称")]),r._v(" "),t("th",[r._v("描述")])])]),r._v(" "),t("tbody",[t("tr",[t("td",[r._v("uni-runtime")]),r._v(" "),t("td",[r._v("app端SDK运行环境错误")])]),r._v(" "),t("tr",[t("td",[r._v("uni-secure-network")]),r._v(" "),t("td",[r._v("安全网络")])]),r._v(" "),t("tr",[t("td",[r._v("uni-ad")]),r._v(" "),t("td",[r._v("uni-ad")])]),r._v(" "),t("tr",[t("td",[r._v("uni-push")]),r._v(" "),t("td",[r._v("UniPush")])]),r._v(" "),t("tr",[t("td",[r._v("uni-login")]),r._v(" "),t("td",[r._v("OAuth（登录鉴权）")])]),r._v(" "),t("tr",[t("td",[r._v("uni-verify")]),r._v(" "),t("td",[r._v("一键登录")])])])]),r._v(" "),t("p",[t("strong",[r._v("注意")])]),r._v(" "),t("ul",[t("li",[r._v("uni内置模块errSubject属性值为“uni-模块英文名称”，如果英文名称由多个单词组成，单词键应该加-分割")]),r._v(" "),t("li",[r._v("uni API的errSubject属性值\n"),t("ul",[t("li",[r._v("uni.XXX API时\nerrSubject属性值为“uni-API名称”，如uni.getSystemInfo()，错误回调中errSubject属性值为“uni-getSystemInfo”")]),r._v(" "),t("li",[r._v("Object.XX API时\nerrSubject属性值为“uni-Object名称-API名称”，如SocketTask.onMessage()，错误回调中errSubject属性值为“uni-SocketTask-onMessage”")])])]),r._v(" "),t("li",[r._v("uni插件中返回错误时建议将“插件id”作为errSubject属性值，如果插件的API较多时可将每个API单独定义errSubject，建议使用errSubject属性值格式为“插件id-API名称”。")])]),r._v(" "),t("h2",{attrs:{id:"uts插件或uvue页面中使用unierror"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#uts插件或uvue页面中使用unierror"}},[r._v("#")]),r._v(" uts插件或uvue页面中使用UniError")]),r._v(" "),t("p",[r._v("在uni-app、uni-app x中的错误信息建议统一使用UniError对象，以便在发生错误时统一捕获处理，特别是以下情况：")]),r._v(" "),t("ul",[t("li",[r._v("在uts插件中封装API给uni-app使用时，返回的错误信息要求使用UniError对象。")]),r._v(" "),t("li",[r._v("在uni-app x项目的uvue页面中，抛出错误要求使用UniError对象。")])]),r._v(" "),t("p",[r._v("在App端，UniError和SourceError都是从uts的"),t("a",{attrs:{href:"https://uniapp.dcloud.net.cn/uts/buildin-object-api/error.html",target:"_blank",rel:"noopener noreferrer"}},[r._v("Error"),t("OutboundLink")],1),r._v("继承。")]),r._v(" "),t("h3",{attrs:{id:"构造unierror对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构造unierror对象"}},[r._v("#")]),r._v(" 构造UniError对象")]),r._v(" "),t("p",[r._v("UniError对象必须通过 new 操作符构造")]),r._v(" "),t("p",[t("strong",[r._v("语法")])]),r._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("new")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("UniError")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(")")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("new")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("UniError")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("(")]),r._v("errSubject"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[r._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v(" errCode"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[r._v("number")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v(" errMsg"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[r._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(")")]),r._v("\n")])])]),t("p",[t("strong",[r._v("参数")])]),r._v(" "),t("ul",[t("li",[r._v('errSubject\n统一错误主题（模块）名称，字符串类型，存在多级模块时使用"::"分割，即"模块名称::二级模块名称"，参考'),t("a",{attrs:{href:"#errsubject"}},[r._v("errSubject（模块/主题）名称")])]),r._v(" "),t("li",[r._v("errCode\n统一错误码，数字类型，通常0表示成功，其它为错误码")]),r._v(" "),t("li",[r._v("errMsg\n统一错误描述信息，字符串类型，应准确描述引起的错误原因")])]),r._v(" "),t("p",[t("strong",[r._v("示例")])]),r._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[r._v("//创建一个UniError")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("let")]),r._v(" error "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("new")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("UniError")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[r._v('"uni-apidName"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[r._v("60000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[r._v('"Custom uni error"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(";")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[r._v("//设置data数据（可选）")]),r._v("\nerror"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(".")]),r._v("data "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("{")]),r._v("\n\t"),t("span",{pre:!0,attrs:{class:"token string-property property"}},[r._v('"dataName"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[r._v('"custom data value"')]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(";")]),r._v("\n")])])]),t("h3",{attrs:{id:"构造sourceerror对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构造sourceerror对象"}},[r._v("#")]),r._v(" 构造SourceError对象")]),r._v(" "),t("p",[r._v("当错误信息是有三方SDK或其它模块引起时，可以将三方SDK或其它模块的错误信息封装在SourceError中作为UniError的源错误")]),r._v(" "),t("p",[t("strong",[r._v("语法")])]),r._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("new")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("SourceError")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(")")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("new")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("SourceError")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("(")]),r._v("message"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[r._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(")")]),r._v("\n")])])]),t("p",[t("strong",[r._v("参数")])]),r._v(" "),t("ul",[t("li",[r._v("message\n源错误描述信息，字符串类型")])]),r._v(" "),t("p",[t("strong",[r._v("示例")])]),r._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[r._v("//创建一个SourceError")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("let")]),r._v(" sourceError "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("new")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("SourceError")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[r._v('"Third SDK error message"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(";")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[r._v("//创建一个UniError")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("let")]),r._v(" error "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("new")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("UniError")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[r._v('"uni-apidName"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[r._v("60000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[r._v('"Custom uni error"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(";")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[r._v("//设置源错误")]),r._v("\nerror"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(".")]),r._v("cause "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v(" sourceError"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(";")]),r._v("\n")])])]),t("h3",{attrs:{id:"构造uniaggregateerror对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#构造uniaggregateerror对象"}},[r._v("#")]),r._v(" 构造UniAggregateError对象")]),r._v(" "),t("p",[r._v("当错误是由多个SourceError源错误引起时，可以将多个源错误放到一个UniAggregateError对象中")]),r._v(" "),t("p",[t("strong",[r._v("语法")])]),r._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("new")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("UniAggregateError")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("(")]),r._v("errors"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(":")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[r._v("Array")]),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("<")]),r._v("SourceError"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(")")]),r._v("\n")])])]),t("p",[t("strong",[r._v("参数")])]),r._v(" "),t("ul",[t("li",[r._v("errors\n源错误数组，Array"),t("SourceError"),r._v("类型")],1)]),r._v(" "),t("p",[t("strong",[r._v("示例")])]),r._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[r._v("//创建UniAggregateError")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("let")]),r._v(" aggregateError "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("new")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("UniAggregateError")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("[")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("new")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("SourceError")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[r._v('"First 3rd SDK error message"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("new")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("SourceError")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[r._v('"Second 3rd SDK error message"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(";")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[r._v("//创建一个UniError")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("let")]),r._v(" error "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[r._v("new")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[r._v("UniError")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[r._v('"uni-apidName"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[r._v("60000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(",")]),r._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[r._v('"Custom uni error"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(";")]),r._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[r._v("//设置源错误")]),r._v("\nerror"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(".")]),r._v("cause "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("=")]),r._v(" aggregateError"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(";")]),r._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);