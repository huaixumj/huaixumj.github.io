(window.webpackJsonp=window.webpackJsonp||[]).push([[318],{704:function(a,t,s){"use strict";s.r(t);var r=s(1),n=Object(r.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("Android平台配置CPU类型针对的是为了提高运行效率使用C/C++语言开发生成的so库，需要为各cpu类型平台单独编译生成对应指令的so库。Java语言开发的代码运行在虚拟机中，由虚拟机适配CPU类型，不涉及到此问题。")]),a._v(" "),t("p",[a._v("5+ app/uni-app 项目中使用so库的功能（模块）")]),a._v(" "),t("ul",[t("li",[a._v("Audio（录音）：支持mp3格式")]),a._v(" "),t("li",[a._v("Geolocation（定位）：百度")]),a._v(" "),t("li",[a._v("LivePush（直播推流）")]),a._v(" "),t("li",[a._v("Maps（地图）：高德、百度")]),a._v(" "),t("li",[a._v("OAuth（登录鉴权）：新浪微博")]),a._v(" "),t("li",[a._v("Push（消息推送）：个推、UniPush")]),a._v(" "),t("li",[a._v("Share（分享）：新浪微博")]),a._v(" "),t("li",[a._v("Speech（语音输入）：百度，"),t("strong",[a._v("注意：讯飞不支持64位")])]),a._v(" "),t("li",[a._v("Weex（原生渲染）：uni-app（自定义组件模式、nvue页面）， "),t("strong",[a._v("注意：HBuilderX2.1.5及以上版本支持")])]),a._v(" "),t("li",[a._v("Android X5 Webview（腾讯TBS）：腾讯X5内核，"),t("strong",[a._v("注意：不支持x86")])])]),a._v(" "),t("blockquote",[t("p",[a._v("HBuilderX2.7.0+ 调整 云端打包默认不再包含 x86 CPU类型库，减少apk包体积"),t("a",{attrs:{href:"#nox86"}},[a._v("详情")]),a._v("\nHBuilderX2.1.5+ 开始支持Android平台的新增适配64位CPU类型，云端打包支持配置App支持的CPU类型\n满足Google Play从2019年8月1日起上传的App必需支持64位CPU的要求。")])]),a._v(" "),t("h3",{attrs:{id:"cpu类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cpu类型"}},[a._v("#")]),a._v(" CPU类型")]),a._v(" "),t("p",[a._v("HBuilderX已适配支持以下主流CPU类型：")]),a._v(" "),t("ul",[t("li",[a._v("armeabi-v7a\n第7代及以上的ARM处理器（ARM32位），市面上大多数手机使用此CPU类型。")]),a._v(" "),t("li",[a._v("arm64-v8a\n第8代、64位ARM处理器（ARM64位），最近两年新发的设备使用此CPU类型，可以兼容使用armeabi-v7a的so库。")]),a._v(" "),t("li",[a._v("x86\n少部分平板使用x86，AS模拟器中选了intel x86时使用x86处理器，以及其它常用三方模拟器通常使用x86")])]),a._v(" "),t("blockquote",[t("p",[a._v("不支持64位x86指令cpu，即不支持x86_64")])]),a._v(" "),t("p",[t("strong",[a._v("注意：不勾选x86在模拟器上可能无法正常运行，以下是常见模拟器是否需要包含x86的情况")])]),a._v(" "),t("ul",[t("li",[a._v("雷电模拟器：\n3.x必须包含x86，否则无法正常运行；4.x无需包含x86。")]),a._v(" "),t("li",[a._v("夜神模拟器：\n必须包含x86，否则无法正常运行")]),a._v(" "),t("li",[a._v("MuMu模拟器：\n无需包含x86")]),a._v(" "),t("li",[a._v("逍遥模拟器：\n无需包含x86")]),a._v(" "),t("li",[a._v("BlueStacks（蓝叠模拟器）：\n无需包含x86")]),a._v(" "),t("li",[a._v("腾讯模拟器（手游助手）：\n必须包含x86，否则无法正常运行")]),a._v(" "),t("li",[a._v("其它模拟器：\n未测试验证，建议包含x86，确保在模拟器正常运行")])]),a._v(" "),t("h3",{attrs:{id:"配置支持的cpu类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置支持的cpu类型"}},[a._v("#")]),a._v(" 配置支持的CPU类型")]),a._v(" "),t("p",[t("strong",[a._v("可视化界面配置")])]),a._v(" "),t("p",[a._v("5+ app/uni-app 项目，打开manifest.json文件，在 “App常用其它设置” -> “Android设置” -> “支持CPU类型” 项中勾选需要支持的CPU类型：\n"),t("img",{attrs:{src:"https://native-res.dcloud.net.cn/images/uniapp/others/abifilters-manifest.png",alt:""}})]),a._v(" "),t("blockquote",[t("p",[a._v("uni-app x 项目暂不支持可视化配置")])]),a._v(" "),t("p",[t("strong",[a._v("源码视图配置")])]),a._v(" "),t("p",[a._v("打开项目的manifest.json文件，切换到“源码视图”，根据项目类型进行配置")]),a._v(" "),t("ul",[t("li",[a._v('5+ app/uni-app 项目\n在 "app-plus" -> "distribute" -> "android" 节点的 abiFilters 属性配置支持的CPU类型，示例如下：')])]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("  "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[a._v('"app-plus"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[a._v('"distribute"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[a._v('"android"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[a._v('"abiFilters"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"armeabi-v7a"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n          "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"arm64-v8a"')]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//...")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//...")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//...")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//..")]),a._v("\n")])])]),t("ul",[t("li",[a._v('uni-app x项目\n在 "app" -> "distribute" -> "android" 节点的 abiFilters 属性配置支持的CPU类型，示例如下：')])]),a._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v(" "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[a._v('"app"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[a._v('"distribute"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[a._v('"android"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n       "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[a._v('"abiFilters"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n         "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"armeabi-v7a"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n         "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"arm64-v8a"')]),a._v("\n       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n       "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//...")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n     "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//...")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n   "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//...")]),a._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("//..")]),a._v("\n")])])]),t("h4",{attrs:{id:"离线打包配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#离线打包配置"}},[a._v("#")]),a._v(" 离线打包配置")]),a._v(" "),t("p",[a._v("使用Android studio打开Android原生项目，打开对应项目的build.gradle文件。\n在Android -> defaultConfig下添加支持的CPU类型，如下示例：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("defaultConfig{\n\tndk {\n    abiFilters 'arm64-v8a','armeabi-v7a'\n  }\n}\n")])])]),t("p",[t("strong",[a._v("注意：离线打包仅支持arm64-v8a、armeabi-v7a、x86三种类型，建议根据自己需求选择打包的CPU类型")])]),a._v(" "),t("h3",{attrs:{id:"default"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#default"}},[a._v("#")]),a._v(" 默认值")]),a._v(" "),t("ul",[t("li",[a._v("HBuilderX3.92及以下版本，默认值为armeabi-v7a")]),a._v(" "),t("li",[a._v("HBuilderX3.93及以上版本，为了充分发挥CPU性能，默认值调整为arm64-v8a。解决在部分华为鸿蒙新设备（如Mate60、Mate X5等）应用启动慢的问题。")])]),a._v(" "),t("h3",{attrs:{id:"cpu类型选择建议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cpu类型选择建议"}},[a._v("#")]),a._v(" CPU类型选择建议")]),a._v(" "),t("p",[a._v("ARM64位（arm64-v8a）CPU可以兼容ARM32的指令，也就是说只选择armeabi-v7a类型的so库也可以在64位手机上运行，只是没有完全发挥CPU的性能。\n选择支持的CPU类型时请参考以下建议：")]),a._v(" "),t("ul",[t("li",[a._v("如果不在意apk大小，三种CPU类型都勾选")]),a._v(" "),t("li",[a._v("如果要尽量发挥新设备性能，选择arm64-v8a")]),a._v(" "),t("li",[a._v("如果在意apk大小，选择armeabi-v7a（几乎在所有ARM指令的所有设备上都可正常运行）")]),a._v(" "),t("li",[a._v("如果想兼容性能和apk大小，建议选择armeabi-v7a、arm64-v8a")]),a._v(" "),t("li",[a._v("如果要兼容一些平板和模拟器，选择armeabi-v7a、x86\n不是所有模拟都仅支持x86指令，如雷电（4.x）、MuMu等模拟器也是支持ARM指令。")])]),a._v(" "),t("h3",{attrs:{id:"查看apk支持的cpu类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看apk支持的cpu类型"}},[a._v("#")]),a._v(" 查看apk支持的CPU类型")]),a._v(" "),t("p",[a._v("使用解压工具打开apk，在lib目录下可以查看到支持的CPU类型，如下图所示：")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://native-res.dcloud.net.cn/images/uniapp/others/abifilters-apk.png",alt:""}})]),a._v(" "),t("h3",{attrs:{id:"常见问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[a._v("#")]),a._v(" 常见问题")]),a._v(" "),t("h4",{attrs:{id:"在部分华为鸿蒙设备上启动应用慢的问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在部分华为鸿蒙设备上启动应用慢的问题"}},[a._v("#")]),a._v(" 在部分华为鸿蒙设备上启动应用慢的问题")]),a._v(" "),t("p",[a._v("部分华为新设备（Mate60、Mate X5等）使用的芯片运行32位应用时只能跑在小核上，相当于限制的CPU的性能，如果应用只包含armeabi-v7a会导致应用启动速度非常慢。需要勾选arm64-v8a来解决此问题。\n为了适配更多的新设备，建议开发者尽量勾选arm64-v8a。")]),a._v(" "),t("h4",{attrs:{id:"cpu类型配置了x86-云端打包后缺没有包含x86"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cpu类型配置了x86-云端打包后缺没有包含x86"}},[a._v("#")]),a._v(" CPU类型配置了x86，云端打包后缺没有包含x86")]),a._v(" "),t("p",[a._v("如果勾选了不支持x86的内置模块或uni原生插件，云端打包后不会包含x86")]),a._v(" "),t("ul",[t("li",[a._v("不支持x86的内置模块\n"),t("ul",[t("li",[a._v("Android X5 Webview（腾讯TBS）")])])]),a._v(" "),t("li",[a._v("uni原生插件\n"),t("ul",[t("li",[a._v("云端插件可以在插件页面详情页面的“平台兼容性”中查看兼容的CPU类型")]),a._v(" "),t("li",[a._v("内地插件可以在"),t("a",{attrs:{href:"https://nativesupport.dcloud.net.cn/NativePlugin/course/package?id=abis",target:"_blank",rel:"noopener noreferrer"}},[a._v("package.json查看abis属性配置"),t("OutboundLink")],1)])])])]),a._v(" "),t("h4",{attrs:{id:"上架google-play市场对cpu类型的要求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上架google-play市场对cpu类型的要求"}},[a._v("#")]),a._v(" 上架Google Play市场对CPU类型的要求")]),a._v(" "),t("p",[a._v('提交Google Play时要求支持64位，建议选择"armeabi-v7a"和"arm64-v8a"两个即可，也可以只选择"arm64-v8a"。')]),a._v(" "),t("p",[t("strong",[a._v('注意：不要勾选"x86"')])]),a._v(" "),t("h4",{attrs:{id:"cpu类型错误安装提示"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cpu类型错误安装提示"}},[a._v("#")]),a._v(" CPU类型错误安装提示")]),a._v(" "),t("p",[a._v("如果打包选择的CPU类型与设备不兼容，会导致无法正常安装。\n通过adb命令安装通常会提示如下错误：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("Performing Streamed Install\nadb: failed to install android_debug.apk: Failure [INSTALL_FAILED_NO_MATCHING_ABIS: Failed to extract native libraries, res=-113]\n")])])]),t("p",[a._v("使用Android Studio自带的x86模拟器，将不包含x86 cpu类型的apk拖到模拟器安装时会弹出如下提示框：")]),a._v(" "),t("p",[t("img",{attrs:{src:"https://native-res.dcloud.net.cn/images/uniapp/others/abifilters-error.png",alt:""}})]),a._v(" "),t("h4",{attrs:{id:"nox86"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nox86"}},[a._v("#")]),a._v(" HBuilderx2.7.0+ 云端打包默认CPU类型不再包含x86")]),a._v(" "),t("p",[a._v("目前市面上常见的手机都是使用ARM处理器，很少有设备使用x86处理器，因此从HBuilderX2.7.0开始云端打包调整为默认不再包含x86的CPU类型，减少apk包大小：")]),a._v(" "),t("ul",[t("li",[a._v("uni-app项目\n基础功能apk减少5M+，使用的三方SDK及uni原生插件越多，减少的包尺寸越大，具体值取决于其包含的x86类型的so库大小")]),a._v(" "),t("li",[a._v("5+App、Wap2App项目\n基础功能apk减少100K+，如果使用的三方SDK中存在so库则减少的尺寸较大，具体值取决于其包含的x86类型的so库大小")])]),a._v(" "),t("p",[t("strong",[a._v("注意：大多数模拟器（如夜神）必须包含x86，否则应用启动时可能会白屏，请根据上面教程进行配置")])])])}),[],!1,null,null,null);t.default=n.exports}}]);