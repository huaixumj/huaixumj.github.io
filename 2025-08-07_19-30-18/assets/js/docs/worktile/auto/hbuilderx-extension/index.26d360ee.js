(window.webpackJsonp=window.webpackJsonp||[]).push([[539],{923:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"extension"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extension"}},[t._v("#")]),t._v(" 自动化测试插件")]),t._v(" "),s("h2",{attrs:{id:"description"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#description"}},[t._v("#")]),t._v(" 插件说明")]),t._v(" "),s("p",[t._v("本插件，用于在HBuilderX内运行uni-app自动化测试，支持H5、微信小程序、Android、iOS、Harmony自动化测试。")]),t._v(" "),s("p",[t._v("主要功能有：")]),t._v(" "),s("ul",[s("li",[t._v("初始化测试环境（创建测试配置文件、以及安装测试所需的环境）")]),t._v(" "),s("li",[t._v("运行测试 (运行项目下所有测试用例、运行某一个测试用例)")]),t._v(" "),s("li",[t._v("新建测试用例 （uni-app pages页面，右键菜单【新建测试用例】）")]),t._v(" "),s("li",[t._v("查看历史测试报告 （HBuilderX顶部运行菜单）")])]),t._v(" "),s("h2",{attrs:{id:"note"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#note"}},[t._v("#")]),t._v(" 测试注意事项")]),t._v(" "),s("ol",[s("li",[t._v("本插件支持"),s("code",[t._v("uni-app普通项目")]),t._v("和"),s("code",[t._v("uniapp-cli项目")]),t._v("。uniapp-cli项目，运行自动化测试，需要在当前项目下安装自动化测试依赖。")]),t._v(" "),s("li",[t._v("Windows电脑不支持运行测试到"),s("code",[t._v("ios手机")]),t._v("。")]),t._v(" "),s("li",[t._v("MacOSX电脑，仅支持运行测试到"),s("code",[t._v("iOS模拟器")]),t._v("，不支持ios真机，测试iOS模拟器，需要电脑装安装XCode。")]),t._v(" "),s("li",[t._v("运行测试到H5，仅支持"),s("code",[t._v("chrome")]),t._v("浏览器，不支持其它浏览器。")]),t._v(" "),s("li",[t._v("运行测试到Android手机，如果HBuilderX仅检测到一个android设备，"),s("code",[t._v("直接")]),t._v("运行测试到当前已连接设备。"),s("code",[t._v("多个")]),t._v("设备时，会弹窗要求选择手机。")]),t._v(" "),s("li",[t._v("node: 当本机未安装node时，将使用HBuilderX"),s("code",[t._v("内置node")]),t._v("运行测试。反之，本机安装了node，则使用本机的node。")]),t._v(" "),s("li",[t._v("运行测试到微信小程序，必须在manifest.json内，配置微信小程序 appid。如果微信开发者工具无法成功打开项目，首次请手动打开。")])]),t._v(" "),s("h2",{attrs:{id:"test-install"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#test-install"}},[t._v("#")]),t._v(" 插件安装")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://ext.dcloud.net.cn/plugin?id=5708",target:"_blank",rel:"noopener noreferrer"}},[t._v("插件安装地址"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("如下图所示，在插件市场，进入"),s("a",{attrs:{href:"https://ext.dcloud.net.cn/plugin?id=5708",target:"_blank",rel:"noopener noreferrer"}},[t._v("插件详情页"),s("OutboundLink")],1),t._v("，点击【导入插件】，会自动拉起本地安装的HBuilderX。")]),t._v(" "),s("img",{staticStyle:{zoom:"50%",border:"1px solid #eee","border-radius":"5px"},attrs:{src:"https://web-ext-storage.dcloud.net.cn/doc/uni-test/plugins_install_1.jpeg",loading:"lazy"}}),t._v(" "),s("blockquote",[s("p",[t._v("特别注意：插件安装，依赖HBuilderX 终端插件。")])]),t._v(" "),s("h2",{attrs:{id:"env"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#env"}},[t._v("#")]),t._v(" 测试环境安装")]),t._v(" "),s("p",[s("strong",[t._v("插件依赖：")])]),t._v(" "),s("ul",[s("li",[t._v("H5、微信、ios、android自动化测试依赖"),s("code",[t._v("puppeteer")]),t._v("、"),s("code",[t._v("adbkit")]),t._v("、"),s("code",[t._v("node-simctl")]),t._v("、"),s("code",[t._v("jest")]),t._v("、"),s("code",[t._v("playwright")]),t._v("，运行插件时，如果未安装此依赖，将会弹窗自动安装。")]),t._v(" "),s("li",[s("code",[t._v("注意")]),t._v("：本插件0.0.3版本及以下，node: 当本机未安装node时，将使用HBuilderX内置的node运行测试。反之，本机安装了node，则使用本机的node。")]),t._v(" "),s("li",[s("code",[t._v("注意")]),t._v("：本插件0.0.4+版本，新增配置项 支持自定义设置使用何种node版本进行uni-app编译")])]),t._v(" "),s("p",[s("strong",[t._v("特别注意：")])]),t._v(" "),s("ul",[s("li",[t._v("uni-app普通项目，需要通过插件"),s("code",[t._v("hbuilderx-for-uniapp-test")]),t._v("来安装测试环境。")]),t._v(" "),s("li",[t._v("uniapp-cli项目，只需在项目下安装相关测试依赖即可。"),s("a",{attrs:{href:"#cli"}},[t._v("详情")])])]),t._v(" "),s("h4",{attrs:{id:"uni-app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#uni-app"}},[t._v("#")]),t._v(" uni-app普通项目")]),t._v(" "),s("p",[t._v("uni-app普通项目，"),s("code",[t._v("初始化测试环境")]),t._v("或"),s("code",[t._v("运行测试")]),t._v("时，如果未安装相关依赖，会自动安装。")]),t._v(" "),s("p",[t._v("如下图所示，项目管理器，选中项目，右键菜单【初始化测试环境】")]),t._v(" "),s("p",[t._v("注意：安装环境依赖时，如果检测到项目下不存在测试配置文件 "),s("code",[t._v("env.js")]),t._v(" 和"),s("a",{attrs:{href:"../../auto/quick-start#jestconfigjs"}},[t._v("jest.config.js")]),t._v("，则会自动创建测试配置文件。")]),t._v(" "),s("img",{staticStyle:{zoom:"70%",border:"1px solid #eee","border-radius":"10px"},attrs:{src:"https://web-ext-storage.dcloud.net.cn/doc/uni-test/env_install.gif",loading:"lazy"}}),t._v(" "),s("h4",{attrs:{id:"cli"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cli"}},[t._v("#")]),t._v(" uniapp-cli项目")]),t._v(" "),s("p",[t._v("uniapp-cli项目，自动化测试运行，将使用"),s("strong",[t._v("项目下的依赖库")]),t._v("。")]),t._v(" "),s("p",[t._v("打开命令行，进入项目目录，输入如下命令进行安装:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--save")]),t._v(" cross-env puppeteer adbkit node-simctl jest playwright @playwright/test\n")])])]),s("h2",{attrs:{id:"create-testcase"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-testcase"}},[t._v("#")]),t._v(" 创建测试用例")]),t._v(" "),s("p",[t._v("uni-app项目，pages页面，右键菜单，创建测试用例")]),t._v(" "),s("img",{staticStyle:{zoom:"70%",border:"1px solid #eee","border-radius":"15px"},attrs:{src:"https://web-ext-storage.dcloud.net.cn/doc/uni-test/testcase_create.gif",loading:"lazy"}}),t._v(" "),s("h2",{attrs:{id:"test-run"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#test-run"}},[t._v("#")]),t._v(" 测试运行")]),t._v(" "),s("p",[t._v("创建测试用例之后，选中项目，右键菜单【运行uni-app自动化测试】，选择运行平台，即可开始运行测试。")]),t._v(" "),s("img",{staticStyle:{zoom:"70%",border:"1px solid #eee","border-radius":"10px"},attrs:{src:"https://web-ext-storage.dcloud.net.cn/doc/uni-test/run_test.gif",loading:"lazy"}}),t._v(" "),s("p",[s("strong",[t._v("注意")]),t._v("：如果要运行指定的测试用例，请在项目管理器"),s("strong",[t._v("选中")]),t._v("要运行的用例，右键菜单【运行当前测试用例】")]),t._v(" "),s("h4",{attrs:{id:"platform"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#platform"}},[t._v("#")]),t._v(" 测试平台说明")]),t._v(" "),s("ul",[s("li",[t._v("Windows电脑"),s("strong",[t._v("不支持")]),t._v("运行测试到"),s("code",[t._v("ios手机")])]),t._v(" "),s("li",[t._v("MacOSX电脑，仅支持运行测试到"),s("code",[t._v("ios模拟器")]),t._v("，"),s("strong",[t._v("不支持")]),t._v("ios真机。")]),t._v(" "),s("li",[t._v("运行测试到H5，仅支持"),s("code",[t._v("chrome")]),t._v("浏览器，"),s("strong",[t._v("不支持")]),t._v("其它浏览器。")]),t._v(" "),s("li",[t._v("运行测试到Android手机，如果HBuilderX仅检测到"),s("strong",[t._v("一个android设备")]),t._v("，直接运行测试到当前已连接设备。多个设备时，会弹窗要求选择手机。")])]),t._v(" "),s("h4",{attrs:{id:"select-platform"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#select-platform"}},[t._v("#")]),t._v(" 选择测试平台")]),t._v(" "),s("p",[t._v("如下图所示，运行测试时，支持选择对应平台。")]),t._v(" "),s("img",{staticStyle:{zoom:"50%",border:"1px solid #eee","border-radius":"5px"},attrs:{src:"https://web-ext-storage.dcloud.net.cn/doc/uni-test/test_platforms.png",loading:"lazy"}}),t._v(" "),s("h4",{attrs:{id:"select-devices"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#select-devices"}},[t._v("#")]),t._v(" 选择设备")]),t._v(" "),s("blockquote",[s("p",[t._v("如果无法获取到设备信息，请"),s("RouterLink",{attrs:{to:"/tutorial/run/run-app-faq.html"}},[t._v("参考")])],1)]),t._v(" "),s("img",{staticStyle:{zoom:"45%",border:"1px solid #eee","border-radius":"5px"},attrs:{src:"https://web-ext-storage.dcloud.net.cn/doc/uni-test/uni-app-test-select-device.jpg",loading:"lazy"}}),t._v(" "),s("h2",{attrs:{id:"extension-config"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extension-config"}},[t._v("#")]),t._v(" 插件配置")]),t._v(" "),s("p",[t._v("点击菜单【设置】【插件配置】，找到hbuilderx-for-uniapp-test项，即可看到设置项。")]),t._v(" "),s("img",{staticStyle:{zoom:"50%",border:"1px solid #eee","border-radius":"5px"},attrs:{src:"https://web-ext-storage.dcloud.net.cn/doc/uni-test/plugins_settings.png",loading:"lazy"}}),t._v(" "),s("p",[s("strong",[t._v("如上图")])]),t._v(" "),s("ul",[s("li",[t._v("支持自定义"),s("strong",[t._v("测试报告")]),t._v("路径。")]),t._v(" "),s("li",[t._v("自动修改jest.config.js文件中的testMatch，默认为"),s("code",[t._v("true")]),t._v("。去掉勾选后，将不再自动修改testMatch。")]),t._v(" "),s("li",[t._v("插件0.0.4+版本，新增配置项 支持自定义设置使用何种node版本进行uni-app编译。即您可以选择使用HBuilderX"),s("code",[t._v("内置的Node")]),t._v("、还是使用"),s("code",[t._v("操作系统")]),t._v("安装的Node进行uni-app编译。")])]),t._v(" "),s("h2",{attrs:{id:"howtowritetestcase"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#howtowritetestcase"}},[t._v("#")]),t._v(" 如何编写测试用例")]),t._v(" "),s("blockquote",[s("p",[t._v("uni-app自动化测试，使用了业内常见的jest测试库。")])]),t._v(" "),s("ul",[s("li",[t._v("uni-app项目，pages目录下，右键菜单【创建测试用例】，选择模板。")]),t._v(" "),s("li",[t._v("测试用例文件名，必须为xxx.test.js")]),t._v(" "),s("li",[t._v("测试用例编写，请遵循jest规范。")])]),t._v(" "),s("h4",{attrs:{id:"jest-testcase"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jest-testcase"}},[t._v("#")]),t._v(" jest用例解析")]),t._v(" "),s("p",[t._v("下面将使用一个最简单的示例，来讲解测试用例的组成。")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("describe")]),t._v(" 表示一组用例, decribe会形成一个作用域")]),t._v(" "),s("li",[s("strong",[t._v("it")]),t._v(" 测试函数")]),t._v(" "),s("li",[s("strong",[t._v("test")]),t._v(" 测试函数，类似it")]),t._v(" "),s("li",[s("strong",[t._v("expect")]),t._v(" 匹配器。 "),s("a",{attrs:{href:"https://jestjs.io/zh-Hans/docs/expect",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用文档"),s("OutboundLink")],1)])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("# 求和测试\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sum test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'adds 1 + 2 to equal 3'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toBe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'adds 1 + 1 to equal 3'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toBe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h4",{attrs:{id:"example"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[t._v("#")]),t._v(" uni-app页面用例示例")]),t._v(" "),s("p",[t._v("以uni-app【默认模板】index页面为例。")]),t._v(" "),s("p",[t._v("编写测试用例，检查"),s("code",[t._v("index.vue")]),t._v("页面，标题是否为"),s("code",[t._v("Hello")])]),t._v(" "),s("img",{staticStyle:{zoom:"50%",border:"1px solid #eee","border-radius":"20px"},attrs:{src:"https://web-ext-storage.dcloud.net.cn/doc/uni-test/uniapp-test-example.jpg",loading:"lazy"}}),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test title'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" page"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        page "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" program"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentPage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" page"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("waitFor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("it")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'check page title'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" el "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" page"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.title'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" titleText "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" el"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("text")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("expect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("titleText"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toEqual")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Hello'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("扩展：如上测试代码中，使用了"),s("code",[t._v("beforeAll")]),t._v("函数，它用于在所有测试之前执行。"),s("a",{attrs:{href:"#setupteardown"}},[t._v("了解jest更多钩子函数")])]),t._v(" "),s("h2",{attrs:{id:"setupteardown"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setupteardown"}},[t._v("#")]),t._v(" Setup and Teardown")]),t._v(" "),s("blockquote",[s("p",[t._v("通常在编写测试时，您需要在测试运行之前进行一些设置工作，并且在测试运行之后需要进行一些完成工作。可以使用Jest的钩子函数来解决这个问题.")])]),t._v(" "),s("p",[s("strong",[t._v("jest中有4个钩子函数")])]),t._v(" "),s("ul",[s("li",[t._v("beforeAll：所有测试之前执行")]),t._v(" "),s("li",[t._v("afterAll：所有测试执行完之后")]),t._v(" "),s("li",[t._v("beforeEach：每个测试实例之前执行")]),t._v(" "),s("li",[t._v("afterEach：每个测试实例完成之后执行")])]),t._v(" "),s("p",[t._v("文档扩展: "),s("a",{attrs:{href:"https://jestjs.io/docs/setup-teardown",target:"_blank",rel:"noopener noreferrer"}},[t._v("jest setup-teardown"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"sequence"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sequence"}},[t._v("#")]),t._v(" 钩子函数的执行顺序")]),t._v(" "),s("p",[t._v("用下列代码，我们来查看一下函数执行顺序")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("describe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test Run Sequence'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1 - beforeAll'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1 - afterAll'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1 - beforeEach'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("afterEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1 - afterEach'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1 - test'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("strong",[t._v("运行结果")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  test Run Sequence\n    ✓ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" ms"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" beforeAll\n\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" beforeEach\n\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" test\n\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" afterEach\n\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log\n    "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" afterAll\n\nTest Suites"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" passed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" total\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Tests")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" passed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" total\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Snapshots")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" total\n"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Time")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("        "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.454")]),t._v(" s\n")])])]),s("h2",{attrs:{id:"snippets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#snippets"}},[t._v("#")]),t._v(" 内置Jest代码块")]),t._v(" "),s("blockquote",[s("p",[t._v("为了更快速的编写测试用例，本插件内置了jest部分代码块")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("prefix")]),t._v(" "),s("th",[t._v("代码块")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("describe")]),t._v(" "),s("td",[t._v("describe('', () => {});")])]),t._v(" "),s("tr",[s("td",[t._v("test")]),t._v(" "),s("td",[t._v("test('', () => {});")])]),t._v(" "),s("tr",[s("td",[t._v("ta")]),t._v(" "),s("td",[t._v("test('', async () => {await});")])]),t._v(" "),s("tr",[s("td",[t._v("beforeAll")]),t._v(" "),s("td",[t._v("beforeAll(() => {});")])]),t._v(" "),s("tr",[s("td",[t._v("afterEach")]),t._v(" "),s("td",[t._v("afterEach(() => {});")])]),t._v(" "),s("tr",[s("td",[t._v("afterAll")]),t._v(" "),s("td",[t._v("afterAll(() => {});")])]),t._v(" "),s("tr",[s("td",[t._v("beforeAll")]),t._v(" "),s("td",[t._v("beforeAll(() => {});")])])])]),t._v(" "),s("h2",{attrs:{id:"envjs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#envjs"}},[t._v("#")]),t._v(" env.js")]),t._v(" "),s("blockquote",[s("p",[t._v("提醒：下面关于env.js的介绍，大部分情况下，自动化测试插件会自动修改，无需您手动调整。如果不确定，请勿修改。")])]),t._v(" "),s("p",[t._v("通常，测试项目下有个测试配置文件env.js，内容如下:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// is-custom-runtime = true，修改env.js时，将不会使用标准基座路径，替代env.js中已配置的android、ios基座路径。")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"is-custom-runtime"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"UNI_TEST_CUSTOM_ENV"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 自动化测试插件 1.9.0版本新增`UNI_TEST_CUSTOM_ENV`")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"xx"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xx"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"compile"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"h5"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此处省略........")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"mp-weixin"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此处省略........")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"app-plus"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此处省略........")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"env-js-uni-test-custom-env"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#env-js-uni-test-custom-env"}},[t._v("#")]),t._v(" env.js UNI_TEST_CUSTOM_ENV")]),t._v(" "),s("blockquote",[s("p",[t._v("提示：大部分场景下，您不会用到UNI_TEST_CUSTOM_ENV。修改请慎重。")])]),t._v(" "),s("p",[t._v("下面将对"),s("code",[t._v("UNI_TEST_CUSTOM_ENV")]),t._v("做介绍。")]),t._v(" "),s("p",[t._v("自动化测试插件 1.9.0版本新增"),s("code",[t._v("UNI_TEST_CUSTOM_ENV")]),t._v(", 用于读取自定义环境变量，并传递给uniapp自动化测试框架命令行。后期会随时扩充新的key。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"UNI_TEST_CUSTOM_ENV"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// APPID 用于测试自定义基座 ")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"UNI_TEST_BASE_APPID"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__UNI__xxxxxxxx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 基座包名 用于测试自定义基座")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"UNI_TEST_BASE_PACKAGE_NAME"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"io.xxx.xxx"')]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"share-test-libs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#share-test-libs"}},[t._v("#")]),t._v(" 多个HBuilderX时，如何共用一个测试依赖？")]),t._v(" "),s("p",[t._v("场景：电脑上安装了HBuilderX 正式版、Dev、Alpha版本，每个程序plugins目录都重新安装一遍测试依赖？答案：不需要。")]),t._v(" "),s("p",[t._v("解决方案：")]),t._v(" "),s("ol",[s("li",[t._v("进入HBuilderX安装目录，将plugins目录下的hbuilderx-for-uniapp-test-lib目录，拷贝到电脑其它目录。")]),t._v(" "),s("li",[t._v("拷贝后，在命令行进入"),s("code",[t._v("上面的拷贝目录下")]),t._v("，执行"),s("code",[t._v("npm install")])]),t._v(" "),s("li",[t._v("打开HBuilderX菜单【设置】【源码视图】，增加配置项:")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('{\n\t"hbuilderx-for-uniapp-test.customTestEnvironmentDependencyDir" : "自定义的测试依赖node_modules路径，路径必须以node_modules结尾"\n}\n')])])])])}),[],!1,null,null,null);s.default=e.exports}}]);